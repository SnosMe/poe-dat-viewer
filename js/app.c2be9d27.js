(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],f=0,d=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/poe-dat-viewer/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"01e5":function(e,t,r){"use strict";var n=r("af29"),a=r.n(n);a.a},"0e21":function(e,t,r){},"3f68":function(e,t,r){"use strict";var n=r("8984"),a=r.n(n);a.a},"499b":function(e,t,r){},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),a=r.n(n);a.a},"61d7":function(e,t,r){e.exports={code:"ExportSchema_code_NS_l7"}},"782d":function(e,t,r){e.exports=r.p+"img/discord-badge.b9bc316a.svg"},8984:function(e,t,r){},"9c0c":function(e,t,r){},af29:function(e,t,r){},c57a:function(e,t,r){"use strict";var n=r("61d7"),a=r.n(n);t["default"]=a.a},cd2f:function(e,t,r){"use strict";var n=r("499b"),a=r.n(n);a.a},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("analyze")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex",width:"100%",height:"100%"}},[r("content-tree"),r("div",{staticClass:"layout-column flex-1",staticStyle:{"min-width":"0"}},[r("div",{staticClass:"app-titlebar"},[e.viewer.datFile?r("div",{staticClass:"ellipsis q-mr-xs"},[e._v(e._s(e.viewer.datFile.meta.name))]):e._e(),r("q-space"),r("q-btn",{staticClass:"q-mr-sm",attrs:{padding:"0 sm",label:"Import","no-caps":"",flat:""},on:{click:function(t){e.app.importDialog=!0}}}),r("q-btn",{staticClass:"q-mr-sm",attrs:{padding:"0 sm",label:"Help","no-caps":"",flat:""},on:{click:function(t){e.app.helpDialog=!0}}}),r("q-btn",{attrs:{padding:"0 sm",label:"Settings","no-caps":"",flat:""},on:{click:function(t){e.app.settingsDialog=!0}}})],1),r("q-dialog",{model:{value:e.app.exportSchemaDialog,callback:function(t){e.$set(e.app,"exportSchemaDialog",t)},expression:"app.exportSchemaDialog"}},[r("export-schema")],1),r("q-dialog",{model:{value:e.app.helpDialog,callback:function(t){e.$set(e.app,"helpDialog",t)},expression:"app.helpDialog"}},[r("help-content")],1),r("q-dialog",{model:{value:e.app.importDialog,callback:function(t){e.$set(e.app,"importDialog",t)},expression:"app.importDialog"}},[r("import-dialog")],1),r("q-dialog",{model:{value:e.app.settingsDialog,callback:function(t){e.$set(e.app,"settingsDialog",t)},expression:"app.settingsDialog"}},[r("settings-dialog")],1),r("div",{staticClass:"flex no-wrap bg-blue-grey-9 q-pa-sm"},[r("div",{staticClass:"flex no-wrap"},[0===e.selections.length?[r("div",{staticClass:"text-blue-grey-4 text-italic"},[e._v("No bytes selected")])]:1===e.selections.length?[r("q-btn",{attrs:{padding:"0 sm",label:"Define column","no-caps":"",color:"blue-grey-8"},on:{click:e.defineColumn}})]:e.selections.length>1?[r("div",{staticClass:"text-blue-grey-2 q-pr-xs"},[e._v("Selections")]),e._l(e.selections,(function(t){return r("div",{staticClass:"q-px-xs q-mr-xs font-mono bg-blue-grey-2 text-blue-grey-10 rounded-borders"},[e._v(e._s(t))])}))]:e._e()],2),r("q-space"),r("div",{staticClass:"flex no-wrap q-gutter-x-sm"},[e.viewer.rowSorting?r("q-btn",{attrs:{padding:"0 sm",label:"Reset sorting","no-caps":"",color:"blue-grey-8"},on:{click:function(t){e.viewer.rowSorting=null}}}):e._e(),r("q-btn",{attrs:{disable:!e.viewer.datFile,padding:"0 sm",label:"Export data","no-caps":"",color:"blue-grey-8"},on:{click:e.exportDataJson}}),r("q-btn",{attrs:{disable:!e.viewer.datFile,padding:"0 sm",label:"Export schema","no-caps":"",color:"blue-grey-8"},on:{click:function(t){e.app.exportSchemaDialog=!0}}})],1)],1),r("div",{staticClass:"flex min-h-0 flex-1"},[r("div",{staticClass:"layout-column min-w-0 flex-1"},[r("div",{staticClass:"flex-1 font-mono scroll",staticStyle:{"--ppc":"8px","letter-spacing":"calc(var(--ppc) - 1ch)"},attrs:{id:"viewer-fancy-scroll"}},[r("q-virtual-scroll",{staticStyle:{"min-width":"min-content"},attrs:{items:e.rows,"virtual-scroll-item-size":21,"scroll-target":"#viewer-fancy-scroll > .scroll"},scopedSlots:e._u([{key:"before",fn:function(){return[r("viewer-head",{attrs:{headers:e.viewer.headers,columns:e.viewer.columns}})]},proxy:!0},{key:"default",fn:function(t){var n=t.index;return[r("data-row",{attrs:{"row-idx":e.rows[n],format:e.rowFormat}})]}}])})],1),r("div",{staticClass:"app-footer bg-blue-grey-9 q-pa-sm text-white text-body2 flex"},[r("div",[e._v("Made by Alexander Drozdov, v"+e._s(e.appVersion)+" "),r("a",{staticClass:"q-link text-white border-b",attrs:{href:"https://github.com/SnosMe/poe-dat-viewer"}},[e._v("GitHub")])]),e._m(0)])]),r("div",{staticClass:"flex-shrink-0"},[r("header-props")],1)]),r("download-progress")],1)],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"flex q-ml-lg",attrs:{href:"https://discord.gg/SJjBdT3"}},[n("img",{attrs:{src:r("782d")}})])}],l=(r("cb29"),r("a15b"),r("d81d"),r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex no-wrap"},[r("div",{staticClass:"viewer-rownum"},[e._v(e._s(e.rowNum))]),e._l(e.formatted,(function(t){return r("div",{staticClass:"viewer-row",class:{"viewer-row--border":t.dataStart,"viewer-row--selected":t.selected,"text-grey-7":1===t.color,"text-green-9":2===t.color,"text-indigo-14":3===t.color},style:{width:"calc(var(--ppc) * "+t.width+")"}},[e._v(e._s(t.text))])}))],2)}),c=[],u=(r("4d90"),r("99af"),r("4de4"),r("a630"),r("13d5"),r("dca8"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("3835")),f=r("2909"),d=(r("c975"),r("a9e3"),4278124286),h=0xfefefefefeff0000,p=new TextDecoder("utf-16le"),v=[0,0,0,0],g={BOOL:1,BYTE:1,SHORT:2,LONG:4,LONGLONG:8,STRING:{4:4,8:8},KEY:{4:4,8:8},KEY_FOREIGN:{4:8,8:16},ARRAY:{4:8,8:16}};function m(e,t,r){if(1===t&&r)return function(t){return e.getUint8(t)};if(2===t&&r)return function(t){return e.getUint16(t)};if(4===t&&r)return function(t){return e.getUint32(t)};if(8===t&&r)return function(t){return Number(e.getBigUint64(t))};if(1===t&&!r)return function(t){return e.getInt8(t)};if(2===t&&!r)return function(t){return e.getInt16(t)};if(4===t&&!r)return function(t){return e.getInt32(t)};if(8===t&&!r)return function(t){return Number(e.getBigInt64(t))};throw new Error("never")}function y(e,t){if(4===t)return function(t){return e.getFloat32(t)};if(8===t)return function(t){return e.getFloat64(t)};throw new Error("never")}function b(e){return function(t){var r=O(e,v,t);while((r-t)%2!==0)r=O(e,v,r+1);return p.decode(e.subarray(t,r))}}function w(e,t){return e===(4===t?d:h)}function x(e){return 4===e?d:h}function _(e){var t=x(e.memsize);return function(r){var n=e.getSizeT(r);return n===t?null:n}}function C(e){var t=x(e.memsize);return function(r){var n=e.getSizeT(r);return n===t?null:[n,e.getSizeT(r+e.memsize)]}}function S(e,t){var r=e.type,n=t.dataFixed,a=t.dataVariable,i=t.readerFixed;if(r.boolean)return function(e){return Boolean(n[e])};if(r.string){var s=b(a);return function(e){var t=i.getSizeT(e);return s(t)}}if(r.integer)return m(i,r.integer.size,r.integer.unsigned);if(r.decimal)return y(i,r.decimal.size);if(r.key)return r.key.foreign?C(i):_(i);throw new Error("never")}function k(e,t){var r=e.type,n=t.dataVariable,a=t.readerVariable,i=function(){if(r.boolean)return[1,function(e){return Boolean(n[e])}];if(r.string){var e=b(n);return[t.memsize,function(t){var r=a.getSizeT(t);return e(r)}]}if(r.integer)return[r.integer.size,m(a,r.integer.size,r.integer.unsigned)];if(r.decimal)return[r.decimal.size,y(a,r.decimal.size)];if(r.key)return r.key.foreign?[2*t.memsize,C(a)]:[t.memsize,_(a)];throw new Error("never")}(),s=Object(u["a"])(i,2),o=s[0],l=s[1];return function(e){var r=t.readerFixed.getSizeT(e);if(0===r)return[];var n=t.readerFixed.getSizeT(e+t.memsize),a=Array(r).fill(void 0);return a.map((function(e,t){return l(n+t*o)}))}}function z(e,t){var r,n=(null===(r=e.type.ref)||void 0===r?void 0:r.array)?k(e,t):S(e,t),a=Array(t.rowCount).fill(void 0);return a.map((function(r,a){return n(a*t.rowLength+e.offset)}))}function O(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;;){var n=e.indexOf(t[0],r);if(-1===n||n+t.length>e.length)return-1;for(var a=!0,i=n,s=0;s<t.length;i+=1,s+=1)if(e[i]!==t[s]){r=i,a=!1;break}if(a)return n}}function q(e){var t=[];function r(e){var t,r;return null===(r=null===(t=e.header)||void 0===t?void 0:t.type.integer)||void 0===r||r.unsigned,{offset:e.offset,length:1,selected:e.selected,dataStart:e.dataStart,cachedView:!e.header||e.header.type.byteView&&!e.header.type.byteView.array?null:e.header.cachedView}}return e.length?(e=Object(f["a"])(e),t.push(r(e.shift())),e.reduce((function(e,n){return e.selected===n.selected&&!1===n.dataStart?e.length+=1:(e=r(n),t.push(e)),e}),t[0]),t):t}function j(e,t,r){var n=r.dataFixed.subarray(e*r.rowLength,e*r.rowLength+r.rowLength);return t.map((function(t){if(t.cachedView)return{selected:!1,dataStart:!0,text:t.cachedView.entries[e][0],color:t.cachedView.entries[e][1],width:t.cachedView.length};var r=Array.from(n.subarray(t.offset,t.offset+t.length)),a=r.map((function(e){return e.toString(16).padStart(2,"0")})).join(" ");return{selected:t.selected,dataStart:t.dataStart,text:a,color:0,width:a.length}}))}function A(e,t,r){var n=r.readerFixed.getSizeT(e);if(0===n)return{value:[],size:0};var a=r.readerFixed.getSizeT(e+r.memsize);return{value:Array.from(r.dataVariable.subarray(a,a+t*n)),size:n}}function I(e,t,r){if(!t.refArray)throw Error("never");var n=Math.max.apply(Math,Object(f["a"])([[g.KEY_FOREIGN[r.memsize],t.refArray.keyForeign],[g.KEY[r.memsize],t.refArray.keySelf],[g.STRING[r.memsize],t.refArray.string],[g.LONGLONG,t.refArray.longLong],[g.LONG,t.refArray.long],[g.SHORT,t.refArray.short],[1,!0]].map((function(e){var t=Object(u["a"])(e,2),r=t[0],n=t[1];return n?r:0})))),a=Array(r.rowCount).fill(void 0).map((function(t,a){return A(a*r.rowLength+e.offset,n,r)})),i=Math.max.apply(Math,Object(f["a"])(a.map((function(e){return e.size})))),s=0,o=a.map((function(e){var t=e.value,r=e.size,n="";if(t.length){var a=t.map((function(e){return e.toString(16).padStart(2,"0")})).join(" ");n="".concat(String(r).padStart(i," ")," { ").concat(a," }")}else n="[]";return s=Math.max(s,n.length),[n,0]}));s=T(o),s=Math.max(s,11),e.cachedView=Object.freeze({length:s,entries:o,entriesRaw:a.map((function(e){return e.value}))})}function V(e,t,r){var n=String(e-1+t).length;return Math.max(n,r)}function F(e,t){var r,n=z(e,t),a=0,i="",s=0,o=function(){var t;if(null===(t=e.type.ref)||void 0===t?void 0:t.array){if(e.type.boolean)return s=3,function(e){i="[".concat(e.join(", "),"]")};if(e.type.string)return s=1,function(e){i="[".concat(e.map((function(e){return'"'+e+'"'})).join(", "),"]")};if(e.type.integer||e.type.decimal)return s=2,function(e){i="[".concat(e.join(", "),"]")};if(e.type.key)return s=2,e.type.key.foreign?function(e){i="[".concat(e.map((function(e){return"<".concat(e[0],", ").concat(e[1],">")})).join(", "),"]")}:function(e){i="[".concat(e.map((function(e){return"<".concat(e,", self>")})).join(", "),"]")};throw new Error("never")}if(e.type.boolean)return s=3,function(e){i=String(e)};if(e.type.string)return function(e){""===e?(i="null",s=3):(i=String(e),s=1)};if(e.type.integer||e.type.decimal)return s=2,function(e){i=String(e)};if(e.type.key)return e.type.key.foreign?function(e){null===e?(i="null",s=3):(i="<".concat(e[0],", ").concat(e[1],">"),s=2)}:function(e){null===e?(i="null",s=3):(i="<".concat(e,", self>"),s=2)};throw new Error("never")}(),l=n.map((function(e){return o(e),a=Math.max(a,i.length),[i,s]}));((null===(r=e.type.ref)||void 0===r?void 0:r.array)||e.type.string)&&(a=T(l)),a=Math.max(a,11),e.cachedView=Object.freeze({length:a,entries:l,entriesRaw:n})}function T(e){var t=e.filter((function(e){var t=Object(u["a"])(e,1),r=t[0];return"[]"!==r&&"null"!==r})).map((function(e){var t=Object(u["a"])(e,1),r=t[0];return r.length}));if(!t.length)return 0;t.sort((function(e,t){return t-e}));var r=Math.floor(t.length/2),n=t.length%2!==0?t[r]:(t[r-1]+t[r])/2;return Math.min(n+11,t[0],Math.floor(1.2*n))}var R={props:["rowIdx","format"],inject:["viewer","app"],computed:{formatted:function(){return j(this.rowIdx,this.format,this.viewer.datFile)},rowNum:function(){return String(this.rowIdx+this.app.config.rowNumStart).padStart(this.viewer.rowNumberLength," ")}}},D=R,N=(r("3f68"),r("2877")),M=Object(N["a"])(D,l,c,!1,null,null,null),E=M.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"viewer-sticky-head"},[r("div",{staticClass:"viewer-col-rownum"},[e._v(e._s("".padStart(e.viewer.rowNumberLength)))]),r("div",{staticStyle:{display:"flex","flex-direction":"column"}},[r("div",{staticClass:"flex no-wrap"},[e._l(e.headers,(function(t){return r("button",{staticClass:"viewer-col viewer-col--border",style:{width:e.calcHeaderWidth(t)},on:{click:function(r){return e.editHeader(t)}}},[null===t.name?r("span",[e._v(e._s("Â "))]):""===t.name?r("span",{staticClass:"bg-blue-grey-6 text-grey-2 rounded-borders q-px-px"},[e._v("?")]):[e._v(e._s(t.name))]],2)})),e.headers.length?e._e():r("div",{staticClass:"viewer-col"},[e._v("File does not have data")])],2),r("div",{staticClass:"flex no-wrap"},e._l(e.columns,(function(t){return r("button",{key:t.offset,staticClass:"viewer-col",class:{"viewer-col--border":t.dataStart,"viewer-col--selected":t.selected},style:{width:"calc(var(--ppc) * "+(t.header?t.header.cachedView.length:2)+")"},on:{mousedown:function(r){return e.selectColumn(t.offset,r)},mouseenter:function(r){return e.selectColumn(t.offset,r)},touchstart:function(r){return e.selectColumn(t.offset,r)},touchmove:function(r){return e.selectColumn(t.offset,r)}}},[e._v(e._s(t.colNum99))])})),0),r("div",{staticClass:"flex no-wrap"},e._l(e.columns,(function(t){return r("div",{key:t.offset,staticClass:"viewer-col-stat",class:{"viewer-col-stat--border":t.dataStart,"viewer-col-stat--selected":t.selected},style:{width:"calc(var(--ppc) * "+(t.header?t.header.cachedView.length+1:3)+")"}},[t.header?e._e():[t.stats.string?r("div",{staticClass:"viewer-col-stat_indicator bg-brown-4",staticStyle:{top:"0"}}):e._e(),t.stats.array?r("div",{staticClass:"viewer-col-stat_indicator bg-teal-4",staticStyle:{top:"var(--ppc)"}}):e._e(),t.stats.b00?r("div",{staticClass:"viewer-col-stat_indicator bg-grey-10",staticStyle:{top:"calc(var(--ppc) * 2)"}}):t.stats.nullable?r("div",{staticClass:"viewer-col-stat_indicator bg-pink-4",staticStyle:{top:"calc(var(--ppc) * 2)"}}):e._e(),t.selected?r("div",{staticClass:"viewer-col-stat_indicator bg-grey-10",staticStyle:{top:"0",height:"calc(var(--ppc) * 3)",opacity:"0.25"}}):e._e(),r("div",{staticClass:"viewer-col-stat_max",staticStyle:{top:"0",height:"calc(var(--ppc) * 3)"}},[e._v(e._s(t.stats.bMax))])]],2)})),0)])])},$=[],B=(r("4160"),r("159b"),r("c740"),r("b85c"));function P(e,t){for(var r=t.findIndex((function(t){return t.offset===e.offset})),n=0;n<e.length;n+=1)t[r+n].selected=!0}function H(e,t,r){var n,a=Math.min(t,r),i=Math.max(t,r),s=Object(B["a"])(e);try{for(s.s();!(n=s.n()).done;){var o=n.value;o.offset>=a&&o.offset<=i&&(o.header||(o.selected=!o.selected))}}catch(l){s.e(l)}finally{s.f()}}function Q(e){var t,r=Object(B["a"])(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.selected=!1}}catch(a){r.e(a)}finally{r.f()}}function U(e){var t,r=[],n=e.findIndex((function(e){return e.selected}));if(n<0)return r;for(t=e[n],r.push([t]),n+=1;n<e.length;n+=1)if(e[n].selected){var a=e[n];a.offset-t.offset===1?r[r.length-1].push(a):r.push([a]),t=a}return r}function G(e,t){var r,n=e.cachedView.entriesRaw,a=n.map((function(e,t){return t}));return(null===(r=e.type.ref)||void 0===r?void 0:r.array)?a.sort((function(e,r){var a=n[e],i=n[r];return(i.length-a.length)*t})):e.type.boolean?a.sort((function(e,r){var a=Number(n[e]),i=Number(n[r]);return(a-i)*t})):e.type.string?a.sort((function(e,r){var a=n[e],i=n[r];return a.localeCompare(i)*t})):e.type.integer||e.type.decimal?a.sort((function(e,r){var a=n[e],i=n[r];return(i-a)*t})):e.type.key&&(e.type.key.foreign?a.sort((function(e,r){var a=n[e],i=n[r];return(((null===i||void 0===i?void 0:i[0])||0)-((null===a||void 0===a?void 0:a[0])||0))*t})):a.sort((function(e,r){var a=Number(n[e]),i=Number(n[r]);return(i-a)*t}))),a}var K={props:{headers:{type:Array,required:!0},columns:{type:Array,required:!0}},inject:["viewer"],data:function(){return{sortOrder:0}},methods:{selectStart:function(e){this.selectionStart=e,this.colsBeforeSelection=Object.freeze(this.columns.map((function(e){return{selected:e.selected}}))),H(this.columns,this.selectionStart,this.selectionStart)},selectContinue:function(e){var t=this;if(void 0!==this.selectionStart){var r=this.viewer.datFile.memsize,n=e-this.selectionStart;n>=r?e=this.selectionStart+(2*r-1):n>=4?e=this.selectionStart+7:n>=2&&(e=this.selectionStart+3),n<=-r?e=this.selectionStart-(2*r-1):n<=-4?e=this.selectionStart-7:n<=-2&&(e=this.selectionStart-3),this.columns.forEach((function(e,r){e.selected=t.colsBeforeSelection[r].selected})),H(this.columns,this.selectionStart,e)}},selectColumn:function(e,t){if("mousedown"===t.type||"touchstart"===t.type)this.selectStart(e);else if("mouseenter"===t.type&&1===t.buttons)this.selectContinue(e);else if("touchmove"===t.type&&1===t.changedTouches.length){var r=document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY),n=new Event("mouseenter");n.buttons=1,r.dispatchEvent(n)}"touchstart"!==t.type&&"touchmove"!==t.type||t.preventDefault()},editHeader:function(e){if(this.viewer.editHeader!==e||!e.cachedView||e.type.byteView&&!e.type.byteView.array)this.viewer.editHeader=e,this.sortOrder=0;else{0===this.sortOrder?this.sortOrder=1:1===this.sortOrder?this.sortOrder=-1:-1===this.sortOrder&&(this.sortOrder=1);var t=G(e,this.sortOrder);this.viewer.rowSorting=Object.freeze(t)}},calcHeaderWidth:function(e){var t=e.type.byteView&&!e.type.byteView.array?3*e.length-1:e.cachedView.length;return"calc(var(--ppc) * ".concat(t,")")}}},Y=K,J=(r("cd2f"),Object(N["a"])(Y,L,$,!1,null,null,null)),W=J.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.header?r("div",{staticClass:"shadow-1 h-full",staticStyle:{width:"20rem"}},[e._m(0),null===e.header.name?r("div",{staticClass:"q-pa-md"},[r("div",[e._v(e._s(e.header.length)+" bytes of unidentified data")])]):r("div",{staticClass:"q-pa-sm"},[r("div",{staticClass:"q-mb-md q-mt-sm q-px-sm"},[r("q-input",{attrs:{label:"Name",placeholder:"unnamed",outlined:""},model:{value:e.header.name,callback:function(t){e.$set(e.header,"name","string"===typeof t?t.trim():t)},expression:"header.name"}})],1),r("div",{staticClass:"q-mb-sm q-pl-sm flex no-wrap items-baseline"},[r("div",{staticClass:"q-mb-xs q-mr-sm"},[e._v("View mode")]),r("q-btn-toggle",{attrs:{unelevated:"",padding:"0 sm","no-caps":"",color:"blue-grey-1","text-color":"black",options:e.viewModeOpts},model:{value:e.byteViewMode,callback:function(t){e.byteViewMode=t},expression:"byteViewMode"}})],1),r("div",{staticClass:"q-mb-sm q-pl-sm"},[r("div",{staticClass:"q-mb-xs flex items-baseline justify-between"},[r("span",[e._v("Data type")]),r("q-btn",{attrs:{padding:"0 sm",label:"Remove","no-caps":"",flat:"",color:"negative"},on:{click:e.remove}})],1),r("q-option-group",{attrs:{dense:"",size:"xs",options:e.dataTypeOpts},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}}),e.arrayTypeOpts.length?r("div",{staticClass:"q-mt-sm"},[r("div",[e._v("of ...")]),r("q-option-group",{attrs:{dense:"",size:"xs",options:e.arrayTypeOpts},model:{value:e.arrayType,callback:function(t){e.arrayType=t},expression:"arrayType"}})],1):e._e(),e.header.type.integer?r("div",{staticClass:"q-mt-sm"},[r("q-toggle",{attrs:{label:"Unsigned",dense:"",size:"xs"},on:{input:e.recacheAfterOptChange},model:{value:e.header.type.integer.unsigned,callback:function(t){e.$set(e.header.type.integer,"unsigned",t)},expression:"header.type.integer.unsigned"}})],1):e._e()],1)])]):e._e()},Z=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex items-center bg-blue-grey-8 q-px-md shadow-1 font-mono",staticStyle:{height:"6ch"}},[r("div",{staticClass:"text-white font-sans"},[e._v("Column properties")])])}],ee=(r("7db0"),r("45fc"),r("a434"),function(){return{byteView:{array:!1}}});function te(e,t,r){for(var n=function(n){var i=t[n];null!=i.name&&e.some((function(e){return e>=i.offset&&e<i.offset+i.length}))?ne(i,t,r):n+=1,a=n},a=0;a<t.length;)n(a)}function re(e,t){var r=U(e);if(0===r.length)throw new Error("No bytes selected");if(r.length>1)throw new Error("Cannot create header from non-contiguous selection");var n=r[0];te(n.map((function(e){return e.offset})),t,e);var a=t.find((function(e){return n[0].offset>=e.offset&&n[0].offset+n.length<=e.offset+e.length})),i=[{name:null,offset:a.offset,length:n[0].offset-a.offset,type:ee()},{name:"",offset:n[0].offset,length:n.length,type:ee()},{name:null,offset:n[0].offset+n.length,length:a.length-(n[0].offset-a.offset+n.length),type:ee()}],s=i[1];i=i.filter((function(e){return e.length})),t.splice.apply(t,[t.indexOf(a),1].concat(Object(f["a"])(i)));var o,l=Object(B["a"])(e);try{var c=function(){var e=o.value;i.some((function(t){return e.offset===t.offset}))&&(e.dataStart=!0)};for(l.s();!(o=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}return s}function ne(e,t,r){if(null==e.name)throw new Error("Cannot remove empty header");if(!e.type.byteView)throw new Error("Cannot remove header in data view mode");e.name=null,e.type=ee();for(var n=0;n<t.length-1;){var a=ae(t[n],t[n+1]);if(a){var i,s=Object(B["a"])(r);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.offset===t[n+1].offset&&(o.dataStart=!1)}}catch(l){s.e(l)}finally{s.f()}t.splice(n,2,a)}else n+=1}}function ae(e,t){return null===e.name&&null===t.name&&{name:null,offset:e.offset,length:e.length+t.length,type:ee()}}var ie={inject:["viewer"],computed:{header:function(){return this.viewer.editHeader},dataTypeOpts:function(){var e=[],t=this.viewer.datFile.memsize,r=this.header.length;return r===2*t&&this.stats.refArray&&e.push({label:"Array",value:"reference"}),r===t&&this.stats.refString&&e.push({label:"String",value:"reference"}),r===t&&this.stats.keySelf&&e.push({label:"Key (self)",value:"key"}),r===2*t&&e.push({label:"Key (foreign)",value:"key"}),8!==r&&4!==r&&2!==r&&1!==r||e.push({label:"Integer",value:"integer"}),8!==r&&4!==r||e.push({label:"Decimal",value:"decimal"}),1===r&&this.stats.bMax<=1&&e.push({label:"Boolean",value:"boolean"}),e},arrayTypeOpts:function(){var e=[];if(!this.header.type.ref||!this.header.type.ref.array)return e;var t=this.stats.refArray;return t.string&&e.push({label:"String",value:"string"}),t.keySelf&&e.push({label:"Key (self)",value:"key_self"}),t.keyForeign&&e.push({label:"Key (foreign)",value:"key_foreign"}),t.longLong&&e.push({label:"Integer - 8 bytes",value:"integer_8"}),t.long&&e.push({label:"Integer - 4 bytes",value:"integer_4"}),t.short&&e.push({label:"Integer - 2 bytes",value:"integer_2"}),t.longLong&&e.push({label:"Decimal - 8 bytes",value:"decimal_8"}),t.long&&e.push({label:"Decimal - 4 bytes",value:"decimal_4"}),t.boolean&&e.push({label:"Boolean",value:"boolean"}),e.push({label:"Integer - byte",value:"integer_1"}),e},viewModeOpts:function(){var e=[],t=this.header.type;return e.push({label:"Bytes",value:"bytes",class:"q-mr-px"}),t.ref&&t.ref.array&&e.push({label:"Var. bytes",value:"array-bytes",class:"q-mr-px"}),e.push({label:"Data",value:"data",disable:!this.dataType||"reference"===this.dataType&&!this.arrayType}),e},stats:function(){return this.viewer.columnStats[this.header.offset]},dataType:{get:function(){var e=this.header.type;return e.ref?"reference":e.key?"key":e.integer?"integer":e.decimal?"decimal":e.boolean?"boolean":void 0},set:function(e){this.setByteViewMode(!0);var t=this.header;if(t.type={byteView:{}},"reference"===e){var r=this.viewer.datFile.memsize;if(t.length!==r)return this.$set(t.type,"ref",{array:!0}),void this.setByteViewMode("array-bytes");this.$set(t.type,"ref",{array:!1}),this.$set(t.type,"string",{})}else if("key"===e){var n=this.viewer.datFile.memsize;t.length===n?this.$set(t.type,"key",{foreign:!1}):this.$set(t.type,"key",{foreign:!0})}else"integer"===e?this.$set(t.type,"integer",{unsigned:!0,size:t.length}):"decimal"===e?this.$set(t.type,"decimal",{size:t.length}):"boolean"===e&&this.$set(t.type,"boolean",{});this.setByteViewMode(!1),this.viewer.saveHeadersToFileCache()}},arrayType:{get:function(){var e=this.header.type;return e.string?"string":e.key?e.key.foreign?"key_foreign":"key_self":e.integer?"integer_".concat(e.integer.size):e.decimal?"decimal_".concat(e.decimal.size):e.boolean?"boolean":void 0},set:function(e){this.setByteViewMode(!0);var t=this.header;t.type={byteView:{},ref:{array:!0}},"string"===e?this.$set(t.type,"string",{}):"key_foreign"===e?this.$set(t.type,"key",{foreign:!0}):"key_self"===e?this.$set(t.type,"key",{foreign:!1}):"integer_1"===e?this.$set(t.type,"integer",{unsigned:!0,size:1}):"integer_2"===e?this.$set(t.type,"integer",{unsigned:!0,size:2}):"integer_4"===e?this.$set(t.type,"integer",{unsigned:!0,size:4}):"integer_8"===e?this.$set(t.type,"integer",{unsigned:!0,size:8}):"decimal_4"===e?this.$set(t.type,"decimal",{size:4}):"decimal_8"===e?this.$set(t.type,"decimal",{size:8}):"boolean"===e&&this.$set(t.type,"boolean",{}),this.setByteViewMode(!1),this.viewer.saveHeadersToFileCache()}},byteViewMode:{get:function(){var e=this.header.type;return e.byteView?e.byteView.array?"array-bytes":"bytes":"data"},set:function(e){this.setByteViewMode("data"!==e&&e)}}},methods:{recacheAfterOptChange:function(){F(this.header,this.viewer.datFile),this.viewer.saveHeadersToFileCache()},remove:function(){var e=this.viewer;this.setByteViewMode(!0),ne(e.editHeader,e.headers,e.columns),e.editHeader=null,e.saveHeadersToFileCache()},setByteViewMode:function(e){var t=this.header.type;e?"array-bytes"===e?(I(this.header,this.stats,this.viewer.datFile),t.byteView&&!t.byteView.array&&this.viewer.disableByteView(this.header),this.header.type.byteView={array:!0}):t.byteView&&!t.byteView.array||this.viewer.enableByteView(this.header):(F(this.header,this.viewer.datFile),t.byteView&&t.byteView.array?t.byteView=void 0:this.viewer.disableByteView(this.header))}}},se=ie,oe=Object(N["a"])(se,X,Z,!1,null,null,null),le=oe.exports,ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[r("q-tabs",{staticClass:"text-grey",attrs:{breakpoint:0,dense:"",align:"left","narrow-indicator":"","active-color":"primary","indicator-color":"primary"},model:{value:e.format,callback:function(t){e.format=t},expression:"format"}},[r("q-tab",{attrs:{name:"pypoe",label:"PyPoE"}}),r("q-tab",{attrs:{name:"pogo",label:"pogo"}}),r("q-tab",{attrs:{name:"c_struct",label:"C struct"}}),r("q-tab",{attrs:{name:"json",label:"JSON"}})],1),r("q-separator"),r("q-tab-panels",{attrs:{animated:""},model:{value:e.format,callback:function(t){e.format=t},expression:"format"}},[r("q-tab-panel",{staticStyle:{"max-height":"60vh"},attrs:{name:"pypoe"}},[r("div",{class:e.$style.code},[e._v(e._s(e.pypoe))])]),r("q-tab-panel",{staticStyle:{"max-height":"60vh"},attrs:{name:"pogo"}},[r("div",{class:e.$style.code},[e._v(e._s(e.pogo))])]),r("q-tab-panel",{staticStyle:{"max-height":"60vh"},attrs:{name:"c_struct"}},[r("div",{class:e.$style.code},[e._v(e._s(e.clang))])]),r("q-tab-panel",{staticStyle:{"max-height":"60vh"},attrs:{name:"json"}},[r("div",{class:e.$style.code},[e._v(e._s(e.json))])])],1),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""}},[e._v("Close")])],1)],1)},ue=[];r("5db7"),r("73d9"),r("843c");function fe(e,t,r,n){var a,i=n(e);return a="string"===typeof i?[[e.name||"Unknown".concat(++t),i]]:new Array(e.length).fill(void 0).map((function(e){return["Undefined".concat(++r),i.byte]})),{unknownNum:t,undefinedNum:r,fields:a}}function de(e,t){var r=0,n=0,a=e.flatMap((function(e){var t=fe(e,r,n,he);return r=t.unknownNum,n=t.undefinedNum,t.fields})),i=Math.max.apply(Math,Object(f["a"])(a.map((function(e){return e[0].length})))),s=a.map((function(e){return e[0]=e[0].padEnd(i," "),"  ".concat(e[0]," ").concat(e[1])})).join("\n");return"type ".concat(t," struct {\n").concat(s,"\n}")}function he(e){var t,r=e.type.boolean,n=e.type.integer,a=e.type.decimal,i=e.type.string,s=null===(t=e.type.ref)||void 0===t?void 0:t.array,o=e.type.key,l=(null===n||void 0===n?void 0:n.size)||(null===a||void 0===a?void 0:a.size)||e.length;if(n){if(1===l&&n.unsigned&&!s)return"uint8";if(2===l&&n.unsigned&&!s)return"uint16";if(4===l&&n.unsigned&&!s)return"uint32";if(8===l&&n.unsigned&&!s)return"uint64";if(1===l&&!n.unsigned&&!s)return"uint8";if(2===l&&!n.unsigned&&!s)return"uint16";if(4===l&&!n.unsigned&&!s)return"int32";if(8===l&&!n.unsigned&&!s)return"int64";if(1===l&&n.unsigned&&s)return"[]uint8";if(2===l&&n.unsigned&&s)return"[]uint16";if(4===l&&n.unsigned&&s)return"[]uint32";if(8===l&&n.unsigned&&s)return"[]uint64";if(1===l&&!n.unsigned&&s)return"[]uint8";if(2===l&&!n.unsigned&&s)return"[]uint16";if(4===l&&!n.unsigned&&s)return"[]int32";if(8===l&&!n.unsigned&&s)return"[]int64"}if(a){if(4===l&&!s)return"float32";if(8===l&&!s)return"float64";if(4===l&&s)return"[]float32";if(8===l&&s)return"[]float64"}return r?s?"[]bool":"bool":i?s?"[]string":"string":o&&o.foreign?s?"[]int64":"*int64":o&&!o.foreign?s?"[]int32":"*int32":{byte:"uint8"}}function pe(e,t){var r=0,n=0,a=e.flatMap((function(e){var t=fe(e,r,n,ve);return r=t.unknownNum,n=t.undefinedNum,t.fields})),i=a.map((function(e){return"        ('".concat(e[0],"', Field(\n            name='").concat(e[0],"',\n            type='").concat(e[1],"',\n        )),")})).join("\n");return"'".concat(t,".dat': File(\n    fields=OrderedDict((\n").concat(i,"\n    )),\n),")}function ve(e){var t,r=e.type.boolean,n=e.type.integer,a=e.type.decimal,i=e.type.string,s=null===(t=e.type.ref)||void 0===t?void 0:t.array,o=e.type.key,l=(null===n||void 0===n?void 0:n.size)||(null===a||void 0===a?void 0:a.size)||e.length;if(n){if(1===l&&n.unsigned&&!s)return"ubyte";if(2===l&&n.unsigned&&!s)return"ushort";if(4===l&&n.unsigned&&!s)return"uint";if(8===l&&n.unsigned&&!s)return"ulong";if(1===l&&!n.unsigned&&!s)return"byte";if(2===l&&!n.unsigned&&!s)return"short";if(4===l&&!n.unsigned&&!s)return"int";if(8===l&&!n.unsigned&&!s)return"long";if(1===l&&n.unsigned&&s)return"ref|list|ubyte";if(2===l&&n.unsigned&&s)return"ref|list|ushort";if(4===l&&n.unsigned&&s)return"ref|list|uint";if(8===l&&n.unsigned&&s)return"ref|list|ulong";if(1===l&&!n.unsigned&&s)return"ref|list|byte";if(2===l&&!n.unsigned&&s)return"ref|list|short";if(4===l&&!n.unsigned&&s)return"ref|list|int";if(8===l&&!n.unsigned&&s)return"ref|list|long"}if(a){if(4===l&&!s)return"float";if(8===l&&!s)return"double";if(4===l&&s)return"ref|list|float";if(8===l&&s)return"ref|list|double"}return r?s?"ref|list|bool":"bool":i?s?"ref|list|ref|string":"ref|string":o&&o.foreign?s?"ref|list|ulong":"ulong":o&&!o.foreign?s?"ref|list|ref|generic":"ref|generic":{byte:"ubyte"}}function ge(e,t){var r=0,n=0,a=e.flatMap((function(e){var t=fe(e,r,n,me);return r=t.unknownNum,n=t.undefinedNum,t.fields})),i=a.map((function(e){return"  ".concat(e[1]," ").concat(e[0],";")})).join("\n");return"#include <stdbool.h>\n#include <stdint.h>\n#include <uchar.h>\n\n#pragma pack(push, 1)\ntypedef struct ".concat(t," {\n").concat(i,"\n} ").concat(t,";\n#pragma pack(pop)")}function me(e){var t,r=e.type.boolean,n=e.type.integer,a=e.type.decimal,i=e.type.string,s=null===(t=e.type.ref)||void 0===t?void 0:t.array,o=e.type.key,l=(null===n||void 0===n?void 0:n.size)||(null===a||void 0===a?void 0:a.size)||e.length;if(n){if(1===l&&n.unsigned&&!s)return"uint8_t";if(2===l&&n.unsigned&&!s)return"uint16_t";if(4===l&&n.unsigned&&!s)return"uint32_t";if(8===l&&n.unsigned&&!s)return"uint64_t";if(1===l&&!n.unsigned&&!s)return"int8_t";if(2===l&&!n.unsigned&&!s)return"int16_t";if(4===l&&!n.unsigned&&!s)return"int32_t";if(8===l&&!n.unsigned&&!s)return"int64_t";if(1===l&&n.unsigned&&s)return"struct { size_t size; uint8_t* offset; }";if(2===l&&n.unsigned&&s)return"struct { size_t size; uint16_t* offset; }";if(4===l&&n.unsigned&&s)return"struct { size_t size; uint32_t* offset; }";if(8===l&&n.unsigned&&s)return"struct { size_t size; uint64_t* offset; }";if(1===l&&!n.unsigned&&s)return"struct { size_t size; int8_t* offset; }";if(2===l&&!n.unsigned&&s)return"struct { size_t size; int16_t* offset; }";if(4===l&&!n.unsigned&&s)return"struct { size_t size; int32_t* offset; }";if(8===l&&!n.unsigned&&s)return"struct { size_t size; int64_t* offset; }"}if(a){if(4===l&&!s)return"float";if(8===l&&!s)return"double";if(4===l&&s)return"struct { size_t size; float* offset; }";if(8===l&&s)return"struct { size_t size; double* offset; }"}return r?s?"struct { size_t size; bool* offset; }":"bool":i?s?"struct { size_t size; char16_t** offset; }":"char16_t*":o&&o.foreign?s?"struct { size_t size; struct { size_t rid; void* unknown; } *offset; }":"{ size_t rid; void* unknown; }":o&&!o.foreign?s?"struct { size_t size; size_t* offset; }":"size_t":{byte:"uint8_t"}}function ye(e,t){return JSON.stringify({name:t,headers:be(e)},null,2)}function be(e){return e.map((function(e){return{name:e.name,length:e.type.ref||e.type.key?void 0:e.length,type:Object.assign(Object.assign({},e.type),{byteView:void 0})}}))}function we(e,t){var r;if(e.length)return e.length;if(null===(r=e.type.ref)||void 0===r?void 0:r.array)return 2*t;if(e.type.string)return t;if(e.type.key)return e.type.key.foreign?2*t:t;throw new Error("Corrupted header")}function xe(e,t){var r,n=e.type.boolean,a=e.type.integer,i=e.type.decimal,s=e.type.string,o=null===(r=e.type.ref)||void 0===r?void 0:r.array,l=e.type.key,c=(null===a||void 0===a?void 0:a.size)||(null===i||void 0===i?void 0:i.size),u=t.length-e.offset,f=t[e.offset];if(a){if(1===c&&!o)return u>=1;if(2===c&&!o)return u>=2;if(4===c&&!o)return u>=4;if(8===c&&!o)return u>=8;if(1===c&&o)return f.refArray&&!0;if(2===c&&o)return f.refArray&&f.refArray.short;if(4===c&&o)return f.refArray&&f.refArray.long;if(8===c&&o)return f.refArray&&f.refArray.longLong}if(i){if(4===c&&!o)return u>=4;if(8===c&&!o)return u>=8;if(4===c&&o)return f.refArray&&f.refArray.long;if(8===c&&o)return f.refArray&&f.refArray.longLong}return n?o?f.refArray&&f.refArray.boolean:f.bMax<=1:s?o?f.refArray&&f.refArray.string:f.refString:l&&l.foreign?o?f.refArray&&f.refArray.keyForeign:u>=e.length:l&&!l.foreign?o?f.refArray&&f.refArray.keySelf:f.keySelf:u>=e.length}var _e={inject:["viewer"],data:function(){return{format:"pypoe"}},computed:{pypoe:function(){var e=this.viewer,t=e.headers,r=e.datFile;return pe(t,r.meta.name)},pogo:function(){var e=this.viewer,t=e.headers,r=e.datFile;return de(t,r.meta.name)},clang:function(){var e=this.viewer,t=e.headers,r=e.datFile;return ge(t,r.meta.name)},json:function(){var e=this.viewer,t=e.headers,r=e.datFile;return ye(t,r.meta.name)}}},Ce=_e,Se=r("c57a");function ke(e){this["$style"]=Se["default"].locals||Se["default"]}var ze=Object(N["a"])(Ce,ce,ue,!1,ke,null,null),Oe=ze.exports,qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row bg-white",staticStyle:{width:"820px","max-width":"80vw"}},[r("div",{staticClass:"flex-1 q-pa-md"},[r("div",{staticClass:"flex items-center"},[r("q-linear-progress",{staticStyle:{width:"4rem"},attrs:{rounded:"",size:"0.75rem",value:1,color:"brown-4"}}),r("div",{staticClass:"q-ml-sm"},[e._v("Octet is part of String")])],1),r("div",{staticClass:"flex items-center"},[r("q-linear-progress",{staticStyle:{width:"4rem"},attrs:{rounded:"",size:"0.75rem",value:1,color:"teal-4"}}),r("div",{staticClass:"q-ml-sm"},[e._v("Octet is part of Array")])],1),r("div",{staticClass:"flex items-center"},[r("q-linear-progress",{staticStyle:{width:"4rem"},attrs:{rounded:"",size:"0.75rem",value:1,color:"grey-10"}}),r("div",{staticClass:"q-ml-sm"},[e._v("All bytes in column are 00")])],1),r("div",{staticClass:"flex items-center"},[r("q-linear-progress",{staticStyle:{width:"4rem"},attrs:{rounded:"",size:"0.75rem",value:1,color:"pink-4"}}),r("div",{staticClass:"q-ml-sm"},[e._v("Octet is part of NULL")])],1),r("q-separator",{attrs:{spaced:""}}),r("div",[e._v("Mouse-over octet statistics bar to see the MAX byte value in column.")]),r("q-separator",{attrs:{spaced:""}}),r("div",[e._v("Dat format has reserved "),r("q-badge",{staticClass:"font-mono",attrs:{color:"grey-8"}},[e._v("fe fe fe fe (x32)")]),e._v(" and "),r("q-badge",{staticClass:"font-mono",attrs:{color:"grey-8"}},[e._v("fe fe fe fe fe fe fe fe (x64)")]),e._v(" for NULL value.")],1)],1),r("q-markup-table",[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v("Type")]),r("th",{staticClass:"text-left"},[e._v("C/C++ type")]),r("th",{staticClass:"text-right"},[e._v("x32_64")]),r("th",{staticClass:"text-right"},[e._v("x32 size")]),r("th",{staticClass:"text-right"},[e._v("x64 size")])])]),r("tbody",[r("tr",[r("td",{staticClass:"text-left"},[e._v("String")]),r("td",{staticClass:"text-left"},[e._v("char16_t*")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("4")]),r("td",{staticClass:"text-right"},[e._v("8")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Array")]),r("td",{staticClass:"text-left"},[e._v("{ size_t; void* }")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("4 + 4")]),r("td",{staticClass:"text-right"},[e._v("8 + 8")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Key (foreign)")]),r("td",{staticClass:"text-left"},[e._v("{ size_t; void* }")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("4 + 4")]),r("td",{staticClass:"text-right"},[e._v("8 + 8")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Key (self)")]),r("td",{staticClass:"text-left"},[e._v("size_t")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("4")]),r("td",{staticClass:"text-right"},[e._v("8")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Decimal")]),r("td",{staticClass:"text-left"},[e._v("double")]),r("td",{staticClass:"text-right"},[e._v("8")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Decimal")]),r("td",{staticClass:"text-left"},[e._v("float")]),r("td",{staticClass:"text-right"},[e._v("4")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Integer")]),r("td",{staticClass:"text-left"},[e._v("int64_t / uint64_t")]),r("td",{staticClass:"text-right"},[e._v("8")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Integer")]),r("td",{staticClass:"text-left"},[e._v("int32_t / uint32_t")]),r("td",{staticClass:"text-right"},[e._v("4")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Integer")]),r("td",{staticClass:"text-left"},[e._v("int16_t / uint16_t")]),r("td",{staticClass:"text-right"},[e._v("2")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Integer")]),r("td",{staticClass:"text-left"},[e._v("int8_t / uint8_t")]),r("td",{staticClass:"text-right"},[e._v("1")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Boolean")]),r("td",{staticClass:"text-left"},[e._v("bool")]),r("td",{staticClass:"text-right"},[e._v("1")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])])])])],1)},je=[],Ae={},Ie=Object(N["a"])(Ae,qe,je,!1,null,null,null),Ve=Ie.exports,Fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticStyle:{"max-width":"80vw"}},[r("q-card-section",[r("div",{staticClass:"q-gutter-xs flex items-baseline"},[r("q-input",{staticStyle:{width:"200px"},attrs:{value:"patchcdn.pathofexile.com/",filled:"",hint:"Patch CDN",readonly:"",dense:""}}),r("q-input",{staticStyle:{width:"100px"},attrs:{filled:"",hint:"Patch #",dense:"",placeholder:"3.12.x.x.x"},model:{value:e.poePatch,callback:function(t){e.poePatch="string"===typeof t?t.trim():t},expression:"poePatch"}}),r("q-input",{staticStyle:{width:"250px"},attrs:{value:"/Bundles2/_.index.bin",filled:"",hint:"Index",readonly:"",dense:""}}),r("q-btn",{attrs:{label:"Import",color:"primary",loading:e.isCdnImportRunning},on:{click:e.cdnImport}})],1)]),r("q-separator"),r("q-card-section",[r("div",{staticClass:"flex items-baseline"},[r("q-file",{staticStyle:{"max-width":"250px"},attrs:{label:"Pick local file",accept:".dat,.dat64",filled:"",dense:""},on:{input:e.handleFile}})],1),r("div",{staticClass:"q-pt-sm"},[e._v(" Or import "),r("a",{staticClass:"q-link text-primary",staticStyle:{"border-bottom":"1px dashed currentColor"},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.importDemo(t)}}},[e._v("demo file")])])])],1)},Te=[],Re=(r("96cf"),r("1da1")),De=(r("ac1f"),r("8a79"),r("466d"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("d4ec")),Ne=r("bee2"),Me=r("9ab4"),Ee=r("3f4f"),Le=Object(Ee["a"])("poe-dat-viewer",2,{upgrade:function(e){e.createObjectStore("dat-schemas",{keyPath:"name"})}});function $e(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Le;case 2:return t.next=4,t.sent.get("dat-schemas",e);case 4:return r=t.sent,t.abrupt("return",(null===r||void 0===r?void 0:r.headers)||[]);case 6:case"end":return t.stop()}}),t)})))}function Be(e,t){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Le;case 2:return r.next=4,r.sent.put("dat-schemas",{name:e,headers:t});case 4:case"end":return r.stop()}}),r)})))}function Pe(e,t){if(t.byteLength<12)throw new Error("Invalid file size");var r=new Uint8Array(t),n=new DataView(r.buffer),a=e.endsWith(".dat64")?8:4,i=n.getUint32(0,!0),s=Ue(r);if(-1===s)throw new Error("Invalid file: section with variable data not found");var o=(s-4)/i,l=r.subarray(4,s),c=r.subarray(s),u=new DataView(l.buffer,l.byteOffset,l.byteLength),f=new DataView(c.buffer,c.byteOffset,c.byteLength);return{memsize:a,rowCount:i,rowLength:o,dataFixed:l,dataVariable:c,readerFixed:new Ge(a,u),readerVariable:new Ge(a,f)}}function He(e,t){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.t0=Object,r.t1=Object,r.t2=Qe(e),r.next=5,$e(Qe(e));case 5:return r.t3=r.sent,r.t4={name:r.t2,headers:r.t3},r.t5={meta:r.t4},r.t6=Pe(e,t),r.t7=r.t1.assign.call(r.t1,r.t5,r.t6),r.abrupt("return",r.t0.freeze.call(r.t0,r.t7));case 11:case"end":return r.stop()}}),r)})))}function Qe(e){return e.match(/[^/]+(?=\..+$)/)[0]}function Ue(e){return O(e,[187,187,187,187,187,187,187,187])}var Ge=function(){function e(t,r){Object(De["a"])(this,e),this.memsize=t,this._data=r}return Object(Ne["a"])(e,[{key:"getSizeT",value:function(e){return 4===this.memsize?this._data.getUint32(e,!0):Number(this._data.getBigUint64(e,!0))}},{key:"getBigInt64",value:function(e){return this._data.getBigInt64(e,!0)}},{key:"getBigUint64",value:function(e){return this._data.getBigUint64(e,!0)}},{key:"getFloat32",value:function(e){return this._data.getFloat32(e,!0)}},{key:"getFloat64",value:function(e){return this._data.getFloat64(e,!0)}},{key:"getInt8",value:function(e){return this._data.getInt8(e)}},{key:"getInt16",value:function(e){return this._data.getInt16(e,!0)}},{key:"getInt32",value:function(e){return this._data.getInt32(e,!0)}},{key:"getUint8",value:function(e){return this._data.getUint8(e)}},{key:"getUint16",value:function(e){return this._data.getUint16(e,!0)}},{key:"getUint32",value:function(e){return this._data.getUint32(e,!0)}},{key:"buffer",get:function(){return this._data.buffer}},{key:"byteLength",get:function(){return this._data.byteLength}},{key:"byteOffset",get:function(){return this._data.byteOffset}}]),e}(),Ke=r("2a19"),Ye="Bundles2",Je=n["a"].observable({totalSize:0,received:0,active:!1,bundleName:""});function We(e,t){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(null!=e){r.next=4;break}if(e=localStorage.getItem("POE_PATCH_VER"),e){r.next=4;break}throw new Error("never");case 4:return r.prev=4,r.next=7,Xe(e,t);case 7:return r.abrupt("return",r.sent);case 10:throw r.prev=10,r.t0=r["catch"](4),Ke["a"].create({color:"negative",message:r.t0.message,caption:"You may need to adjust the patch version.",progress:!0}),r.t0;case 14:case"end":return r.stop()}}),r,null,[[4,10]])})))}function Xe(e,t){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,a,i,s,o,l,c,u,f,d,h,p,v;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="".concat(e,"/").concat(Ye,"/").concat(t),r.next=3,caches.open("bundles");case 3:return a=r.sent,r.next=6,a.match(n);case 6:if(i=r.sent,i){r.next=49;break}return Je.totalSize=0,Je.received=0,Je.active=!0,Je.bundleName=t,r.next=14,fetch("http://poe-bundles.snos.workers.dev/".concat(n));case 14:if(i=r.sent,200===i.status){r.next=18;break}throw Je.active=!1,new Error("patchcdn: ".concat(i.status," ").concat(i.statusText));case 18:Je.totalSize=Number(i.headers.get("content-length")),r.prev=19,o=i.body.getReader(),l=[];case 22:return r.next=25,o.read();case 25:if(c=r.sent,u=c.done,f=c.value,!u){r.next=30;break}return r.abrupt("break",34);case 30:l.push(f),Je.received+=f.length,r.next=22;break;case 34:for(s=new Uint8Array(Je.received),d=0,h=0,p=l;h<p.length;h++)v=p[h],s.set(v,d),d+=v.length;case 37:return r.prev=37,Je.active=!1,r.finish(37);case 40:if(localStorage.getItem("POE_PATCH_VER")===e){r.next=46;break}return r.next=43,caches.delete("bundles");case 43:return r.next=45,caches.open("bundles");case 45:a=r.sent;case 46:return r.next=48,a.put(n,new Response(s,{headers:{"content-length":String(s.byteLength),"content-type":"application/octet-stream"}}));case 48:return r.abrupt("return",s.buffer);case 49:return r.abrupt("return",i.arrayBuffer());case 50:case"end":return r.stop()}}),r,null,[[19,,37,40]])})))}r("caad"),r("baa5"),r("2532"),r("2ca0"),r("fb6a");var Ze,et,tt=function(){return new Worker(r.p+"js/script.91340e23.worker.js")},rt=new tt,nt=null;function at(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!nt){t.next=9;break}return t.prev=1,t.next=4,nt;case 4:t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](1);case 8:return t.abrupt("return",at(e));case 9:return e(),nt=new Promise((function(e,t){Ze=e,et=t})),t.abrupt("return",nt);case 12:case"end":return t.stop()}}),t,null,[[1,6]])})))}function it(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",at((function(){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)rt.postMessage({type:"decompressSliceInBundle",bundle:e},[]);else{var t=new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));rt.postMessage({type:"decompressSliceInBundle",bundle:t},[t.buffer])}})));case 1:case"end":return t.stop()}}),t)})))}function st(e,t,r){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",at((function(){rt.postMessage({type:"decompressSliceInBundle",bundle:new Uint8Array(e),sliceOffset:t,sliceSize:r},[e])})));case 1:case"end":return n.stop()}}),n)})))}function ot(e,t){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",at((function(){rt.postMessage({type:"unpackIndexPaths",pathBundle:e,pathReps:t},[e.buffer])})));case 1:case"end":return r.stop()}}),r)})))}rt.addEventListener("message",(function(e){nt=null,null!=e.data[0]?et(e.data[0]):Ze(e.data[1])}));var lt=r("fe76"),ct=r.n(lt);function ut(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,i,s,o,l,c,u,f,d,h,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=0,a=r.getInt32(n,!0),n+=4,i=0;i<a;++i)s=r.getInt32(n,!0),n+=4+s+4;return o=r.getInt32(n,!0),n+=4,l=n,n+=20*o,c=r.getInt32(n,!0),n+=4,u=n,f=20*c,n+=f,d=n,h=e.subarray(d),t.next=18,it(h);case 18:return p=t.sent,t.t0=l,t.next=22,ot(p,e.subarray(u,u+f));case 22:return t.t1=t.sent,t.abrupt("return",{filesOffset:t.t0,dirs:t.t1});case 24:case"end":return t.stop()}}),t)})))}function ft(e,t,r){var n=ct.a.fast1a64(t.toLowerCase()+"++"),a=[parseInt(n.substr(14,2),16),parseInt(n.substr(12,2),16),parseInt(n.substr(10,2),16),parseInt(n.substr(8,2),16),parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)],i=O(e,a,r);if(-1===i)throw new Error("never");for(var s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=o.getInt32(i+8,!0),c=o.getInt32(i+8+4,!0),u=o.getInt32(i+8+4+4,!0),f=4,d=0;d<l;++d){var h=o.getInt32(f,!0);f+=4+h+4}var p=o.getInt32(f,!0);return f+=4,s=new TextDecoder("utf-8").decode(e.subarray(f,f+p)),{bundle:"".concat(s,".bundle.bin"),offset:c,size:u}}var dt=r("21a6"),ht=r.n(dt),pt=(r("c1f9"),10),vt={mustYield:function(e){return performance.now()-e>=pt},yield:function(){return new Promise((function(e){return requestAnimationFrame((function(t){e(t)}))}))}};function gt(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,i,s,o,l,c,u,f,d,h,p,v,g,m,y,b,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(t){return t<e.readerVariable.byteLength&&t>=4},n=new Array(e.rowLength).fill(void 0).map((function(t){return{b00:!0,b01:!0,bMax:0,nullableMemsize:!1,keySelf:!0,refString:!0,refArray:{boolean:!0,short:!0,long:!0,longLong:!0,string:!0,keyForeign:!0,keySelf:!0},memsize:e.memsize}})),t.next=4,vt.yield();case 4:a=t.sent,i=0;case 6:if(!(i<e.rowLength)){t.next=20;break}for(s=n[i],o=e.rowLength-i>=e.memsize,l=e.rowLength-i>=2*e.memsize,o||(s.refString=!1,s.keySelf=!1),l||(s.refArray=!1),c=0;c<e.rowCount;c+=1)if(u=c*e.rowLength,f=e.dataFixed[u+i],s.b00=s.b00&&0===f,s.b01=s.b01&&1===f,s.bMax=Math.max(s.bMax,f),!s.nullableMemsize&&o&&(s.nullableMemsize=254===f&&w(e.readerFixed.getSizeT(u+i),e.memsize)),s.refString&&(d=e.readerFixed.getSizeT(u+i),s.refString=r(d)&&mt(d,e.readerVariable)),s.keySelf&&(h=e.readerFixed.getSizeT(u+i),w(h,e.memsize)||(s.keySelf=h<e.rowCount)),s.refArray)if(p=e.readerFixed.getSizeT(u+i),v=e.readerFixed.getSizeT(u+i+e.memsize),r(v)&&r(v+1*p)){for(s.refArray.short=s.refArray.short&&r(v+2*p),s.refArray.long=s.refArray.long&&r(v+4*p),s.refArray.longLong=s.refArray.longLong&&r(v+8*p),s.refArray.string=s.refArray.string&&r(v+e.memsize*p),s.refArray.keySelf=s.refArray.keySelf&&r(v+e.memsize*p),s.refArray.keyForeign=s.refArray.keyForeign&&r(v+2*e.memsize*p),g=0;g<p&&s.refArray.string;g+=1)m=e.readerVariable.getSizeT(v+e.memsize*g),s.refArray.string=r(m)&&mt(m,e.readerVariable);for(y=0;y<p&&s.refArray.keySelf;y+=1)b=e.readerVariable.getSizeT(v+e.memsize*y),w(b,e.memsize)||(s.refArray.keySelf=b<e.rowCount);for(x=0;x<p&&s.refArray.boolean;x+=1)s.refArray.boolean=e.dataVariable[v+x]<=1;s.refArray.string||s.refArray.longLong||s.refArray.long||s.refArray.short||s.refArray.boolean||(s.refArray=!1)}else 0===p&&v===e.readerVariable.byteLength||(s.refArray=!1);if(!vt.mustYield(a)){t.next=17;break}return t.next=16,vt.yield();case 16:a=t.sent;case 17:i+=1,t.next=6;break;case 20:return t.abrupt("return",n);case 21:case"end":return t.stop()}}),t)})))}function mt(e,t){while(1){if(e+3>=t.byteLength)return!1;var r=t.getUint16(e),n=t.getUint16(e+2);if(0===r&&0===n)break;if(r>55295&&r<57344){if(r>56319)return!1;if(n<56320||n>57343)return!1;e+=4}else e+=2}return!0}var yt=r("f508"),bt=function e(){Object(De["a"])(this,e),this.exportSchemaDialog=!1,this.helpDialog=!1,this.importDialog=!0,this.settingsDialog=!1,this.config={rowNumStart:0,colNumStart:0},this.viewers=[],this.viewers.push({instance:new xt(this)})},wt=4,xt=function(){function e(t){Object(De["a"])(this,e),this.app=t,this.headers=[],this.columns=[],this.datFile=null,this.columnStats=[],this.rowNumberLength=-1,this.editHeader=null,this.rowSorting=null}return Object(Ne["a"])(e,[{key:"loadDat",value:function(e,t){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return yt["a"].show({delay:0}),r.prev=1,r.next=4,this._loadDat(e);case 4:return r.prev=4,n=t||e.meta.headers,r.next=8,this.tryImportHeaders(n);case 8:r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](4),Ke["a"].create({color:"warning",message:r.t0.message,progress:!0});case 13:r.next=19;break;case 15:throw r.prev=15,r.t1=r["catch"](1),Ke["a"].create({color:"negative",message:r.t1.message,progress:!0}),r.t1;case 19:return r.prev=19,yt["a"].hide(),r.finish(19);case 22:case"end":return r.stop()}}),r,this,[[1,15,19,22],[4,10]])})))}},{key:"_loadDat",value:function(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this.app,t.next=3,gt(e);case 3:this.columnStats=t.sent,this.rowNumberLength=V(e.rowCount,r.config.rowNumStart,wt),this.datFile=e,this.columns=this.stateColumns(this.columnStats),this.rowSorting=null,e.rowLength?this.headers=[{name:null,offset:0,length:e.rowLength,type:ee()}]:this.headers=[];case 9:case"end":return t.stop()}}),t,this)})))}},{key:"stateColumns",value:function(e){for(var t=this.app,r=new Array(e.length).fill(void 0).map((function(r,n){return{offset:n,colNum99:String((n+t.config.colNumStart)%100).padStart(2,"0"),colNum100:String(n+t.config.colNumStart).padStart(2,"0"),selected:!1,header:null,dataStart:!1,stats:{string:!1,array:!1,b00:e[n].b00,bMax:e[n].bMax.toString(16).padStart(2,"0"),nullable:!1}}})),n=0;n<e.length;n+=1){var a=e[n];if(a.refString)for(var i=0;i<a.memsize;i+=1)r[n+i].stats.string=!0;if(a.refArray)for(var s=0;s<2*a.memsize;s+=1)r[n+s].stats.array=!0;if(a.nullableMemsize)for(var o=0;o<a.memsize;o+=1)r[n+o].stats.nullable=!0}return r}},{key:"tryImportHeaders",value:function(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,i,s,o,l,c,u,f,d,h,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this.datFile,n=this.columns,a=this.columnStats,i=this.headers,t.next=3,vt.yield();case 3:s=t.sent,o=0,l=Object(B["a"])(e),t.prev=6,l.s();case 8:if((c=l.n()).done){t.next=31;break}if(u=c.value,f=we(u,r.memsize),null!=u.name){t.next=14;break}return o+=f,t.abrupt("continue",29);case 14:if(d={length:f,offset:o,type:u.type},h=xe(d,a),h){t.next=18;break}throw new Error("The schema is invalid.");case 18:if(P(d,n),d=re(n,i),d.name=u.name,Q(n),p=u.type,(p.boolean||p.decimal||p.integer||p.key||p.string)&&(d.type=p,F(d,this.datFile),this.disableByteView(d)),o+=f,!vt.mustYield(s)){t.next=29;break}return t.next=28,vt.yield();case 28:s=t.sent;case 29:t.next=8;break;case 31:t.next=36;break;case 33:t.prev=33,t.t0=t["catch"](6),l.e(t.t0);case 36:return t.prev=36,l.f(),t.finish(36);case 39:case"end":return t.stop()}}),t,this,[[6,33,36,39]])})))}},{key:"saveHeadersToFileCache",value:function(){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Be(this.datFile.meta.name,be(this.headers));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"disableByteView",value:function(e){var t=this.columns;e.type.byteView=void 0;var r=t.findIndex((function(t){return t.offset===e.offset}));t.splice(r+1,e.length-1),t[r].header=e,t[r].selected=!1}},{key:"enableByteView",value:function(e){var t=this.columns,r=this.columnStats;e.type.byteView={array:!1};var n=t.findIndex((function(t){return t.offset===e.offset})),a=this.stateColumns(r);t.splice.apply(t,[n+1,0].concat(Object(f["a"])(a.slice(e.offset+1,e.offset+e.length)))),t[n].header=null}},{key:"collectData",value:function(){var e=this,t=this.headers.filter((function(e){var t=e.type;return t.boolean||t.decimal||t.integer||t.key||t.string})).map((function(t,r){var n;return{name:t.name||"Unknown".concat(r+1),data:(null===(n=t.cachedView)||void 0===n?void 0:n.entriesRaw)||z(t,e.datFile)}}));return Array(this.datFile.rowCount).fill(void 0).map((function(e,r){return Object.fromEntries(t.map((function(e){return[e.name,e.data[r]]})))}))}}]),e}(),_t=new bt,Ct=null,St=n["a"].observable({tree:[],current:""});function kt(){var e,t=[],r=Object(B["a"])(Ct.dirs.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;n.includes("/")||t.push(n)}}catch(a){r.e(a)}finally{r.f()}St.tree=t.map((function(e){return{label:e,isFile:!1}})).sort((function(e,t){return e.label.localeCompare(t.label)})),St.current=""}function zt(e){if(""!==e){var t,r=Ct.dirs.get(e),n=[],a=Object(B["a"])(Ct.dirs.keys());try{for(a.s();!(t=a.n()).done;){var i=t.value;i.startsWith(e)&&i.lastIndexOf("/")===e.length&&n.push(i.substring(i.lastIndexOf("/")+1))}}catch(s){a.e(s)}finally{a.f()}St.tree=Object.freeze([{label:"../",isFile:!1}].concat(Object(f["a"])(n.map((function(e){return{label:e,isFile:!1}})).sort((function(e,t){return e.label.localeCompare(t.label)}))),Object(f["a"])(r.map((function(e){return{label:e,isFile:!0}})).sort((function(e,t){return e.label.localeCompare(t.label)}))))),St.current=e}else kt()}function Ot(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qt(e);case 2:if(r=t.sent,!e.endsWith(".dat")&&!e.endsWith(".dat64")){t.next=10;break}return t.next=6,He(e,r);case 6:return n=t.sent,t.next=9,_t.viewers[0].instance.loadDat(n);case 9:return t.abrupt("return");case 10:ht.a.saveAs(new File([r],e.substring(e.lastIndexOf("/")+1),{type:"application/octet-stream"}));case 11:case"end":return t.stop()}}),t)})))}function qt(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=ft(Ct.bundle,e,Ct.filesOffset),t.next=3,We(null,r.bundle);case 3:return n=t.sent,t.next=6,st(n,r.offset,r.size);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))}function jt(e){return Object(Me["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it(new Uint8Array(e));case 2:return r=t.sent,t.next=5,ut(r);case 5:n=t.sent,Ct=Object.assign({bundle:r},n),kt();case 8:case"end":return t.stop()}}),t)})))}var At=[{name:"Id",type:{ref:{array:!1},string:{}}},{name:"ItemClassesKey",type:{key:{foreign:!0}}},{name:"Width",length:4,type:{integer:{unsigned:!0,size:4}}},{name:"Height",length:4,type:{integer:{unsigned:!0,size:4}}},{name:"Name",type:{ref:{array:!1},string:{}}}],It={inject:["app","viewer"],data:function(){return{poePatch:"",isCdnImportRunning:!1}},created:function(){this.poePatch=localStorage.getItem("POE_PATCH_VER")||"",this.poePatch&&!St.tree.length&&this.cdnImport()},methods:{handleFile:function(e){var t=this;return Object(Re["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.arrayBuffer();case 3:return a=r.sent,i=e.name,r.next=7,He(i,a);case 7:n=r.sent,r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](0),t.$q.notify({color:"negative",message:r.t0.message,progress:!0}),r.t0;case 14:return r.next=16,t.viewer.loadDat(n);case 16:t.app.importDialog=!1;case 17:case"end":return r.stop()}}),r,null,[[0,10]])})))()},cdnImport:function(){var e=this;return Object(Re["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isCdnImportRunning=!0,t.next=4,We(e.poePatch,"_.index.bin");case 4:r=t.sent;case 5:return t.prev=5,e.isCdnImportRunning=!1,t.finish(5);case 8:return t.prev=8,e.$q.loading.show({delay:0,message:"Reading index of 500,000+ files and 35,000+ folders"}),t.next=12,jt(r);case 12:localStorage.setItem("POE_PATCH_VER",e.poePatch),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](8),e.$q.notify({color:"negative",message:t.t0.message,progress:!0});case 18:return t.prev=18,e.$q.loading.hide(),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,,5,8],[8,15,18,21]])})))()},importDemo:function(){var e=this;return Object(Re["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(St.tree.length){t.next=4;break}return e.poePatch="3.12.2.3.2",t.next=4,e.cdnImport();case 4:return r="Data/Russian/BaseItemTypes.dat",t.next=7,qt(r);case 7:return n=t.sent,t.next=10,He(r,n);case 10:return a=t.sent,t.next=13,e.viewer.loadDat(a,At);case 13:e.app.importDialog=!1;case 14:case"end":return t.stop()}}),t)})))()}}},Vt=It,Ft=Object(N["a"])(Vt,Fe,Te,!1,null,null,null),Tt=Ft.exports,Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[r("q-card-section",[r("div",{staticClass:"text-h6"},[e._v("Settings")])]),r("q-card-section",[e._v(" There is nothing to configure here yet. Open an issue on GitHub for new settings. ")]),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""}},[e._v("Close")])],1)],1)},Dt=[],Nt={},Mt=Object(N["a"])(Nt,Rt,Dt,!1,null,null,null),Et=Mt.exports,Lt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-dialog",{attrs:{value:e.active,seamless:"",position:"bottom"}},[r("q-card",{staticStyle:{width:"350px"}},[r("q-linear-progress",{attrs:{value:e.received/e.totalSize,"instant-feedback":"",size:"md",indeterminate:!e.totalSize}}),r("q-card-section",{staticClass:"row items-center no-wrap"},[r("div",{staticClass:"min-w-0"},[r("div",{staticClass:"text-weight-bold ellipsis"},[e._v(e._s(e.bundleName))]),r("div",{staticClass:"text-grey"},[e.totalSize?[e._v(e._s((e.totalSize/1e6).toFixed(1))+" MB")]:[e._v("Downloading...")]],2)])])],1)],1)},$t=[],Bt={data:function(){return Je}},Pt=Bt,Ht=Object(N["a"])(Pt,Lt,$t,!1,null,null,null),Qt=Ht.exports,Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-scroll-area",{staticClass:"shadow-1 q-pa-xs",staticStyle:{width:"300px","flex-shrink":"0"},attrs:{id:"content-tree-fancy-scroll"}},[r("q-virtual-scroll",{attrs:{items:e.tree,"virtual-scroll-item-size":29,"scroll-target":"#content-tree-fancy-scroll > .scroll"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[r("q-btn",{staticClass:"full-width",staticStyle:{"font-weight":"normal"},attrs:{label:n.label,flat:"","no-caps":"",dense:"",align:"left","no-wrap":"",icon:n.isFile?"":"la la-folder-open"},on:{click:function(t){return e.handleFolderNav(n)}}})]}}])})],1)},Gt=[],Kt={data:function(){return St},methods:{handleFolderNav:function(e){var t;if("../"===e.label){var r=this.current.lastIndexOf("/");t=-1===r?"":this.current.substring(0,r)}else t=this.current?"".concat(this.current,"/").concat(e.label):e.label;e.isFile?Ot(t):zt(t)}}},Yt=Kt,Jt=Object(N["a"])(Yt,Ut,Gt,!1,null,null,null),Wt=Jt.exports,Xt={components:{ViewerHead:W,HeaderProps:le,DataRow:E,ExportSchema:Oe,HelpContent:Ve,ImportDialog:Tt,SettingsDialog:Et,DownloadProgress:Qt,ContentTree:Wt},provide:function(){return{viewer:this.viewer,app:this.app}},data:function(){return{app:_t,viewer:_t.viewers[0].instance}},computed:{rowComponent:function(){return E},rowFormat:function(){return q(this.viewer.columns)},selections:function(){return U(this.viewer.columns).map((function(e){return e.map((function(e){return e.colNum100})).join(" ")}))},rows:function(){return this.viewer.datFile?this.viewer.rowSorting?this.viewer.rowSorting:new Array(this.viewer.datFile.rowCount).fill(void 0).map((function(e,t){return t})):[]},appVersion:function(){return"2.0.0-beta"}},methods:{defineColumn:function(){var e=this.viewer;e.editHeader=re(e.columns,e.headers),Q(e.columns),e.saveHeadersToFileCache()},exportDataJson:function(){var e=this.viewer.collectData();ht.a.saveAs(new File([JSON.stringify(e,null,2)],"".concat(this.viewer.datFile.meta.name,".json"),{type:"application/json;charset=utf-8"}))}}},Zt=Xt,er=(r("01e5"),Object(N["a"])(Zt,s,o,!1,null,null,null)),tr=er.exports,rr={name:"App",components:{Analyze:tr}},nr=rr,ar=(r("5c0b"),Object(N["a"])(nr,a,i,!1,null,null,null)),ir=ar.exports,sr=(r("0e21"),r("81a9"),r("2ec3")),or=r("b05d"),lr=r("9c40"),cr=r("a12b"),ur=r("4983"),fr=r("e7a9"),dr=r("27f9"),hr=r("6a67"),pr=r("9f0a"),vr=r("9564"),gr=r("24e8"),mr=r("7f67"),yr=r("f09f"),br=r("4b7e"),wr=r("a370"),xr=r("2c91"),_r=r("7460"),Cr=r("429b"),Sr=r("823b"),kr=r("adad"),zr=r("eb85"),Or=r("2bb1"),qr=r("6b1d"),jr=r("58a8"),Ar=r("7d53"),Ir=r("e9c1"),Vr=r("0016"),Fr=r("66e5"),Tr=r("4074"),Rr=r("0170"),Dr=r("1c1c"),Nr=r("7f41");n["a"].use(or["a"],{config:{},components:{QTree:Nr["a"],QOptionGroup:pr["a"],QBtnToggle:hr["a"],QInput:dr["a"],QBtnGroup:fr["a"],QScrollArea:ur["a"],QVirtualScroll:cr["a"],QBtn:lr["a"],QToggle:vr["a"],QDialog:gr["a"],QCard:yr["a"],QCardActions:br["a"],QCardSection:wr["a"],QSpace:xr["a"],QTab:_r["a"],QTabs:Cr["a"],QTabPanel:Sr["a"],QTabPanels:kr["a"],QSeparator:zr["a"],QMarkupTable:Or["a"],QLinearProgress:qr["a"],QBadge:jr["a"],QFile:Ar["a"],QSlideTransition:Ir["a"],QIcon:Vr["a"],QItem:Fr["a"],QItemSection:Tr["a"],QItemLabel:Rr["a"],QList:Dr["a"]},directives:{ClosePopup:mr["a"]},plugins:{Notify:Ke["a"],Loading:yt["a"]},iconSet:sr["a"]}),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(ir)}}).$mount("#app")}});
//# sourceMappingURL=app.c2be9d27.js.map