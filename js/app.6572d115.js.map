{"version":3,"file":"js/app.6572d115.js","mappings":"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","sources":["webpack://poe-dat-viewer/./src/assets/discord-badge.svg","webpack://poe-dat-viewer/./src/app/workbench/Workbench.vue","webpack://poe-dat-viewer/./src/app/workbench/Tabs.vue","webpack://poe-dat-viewer/./src/app/workbench/ImportDialog.vue","webpack://poe-dat-viewer/./src/app/patchcdn/cache.ts","webpack://poe-dat-viewer/./src/app/worker/script.ts","webpack://poe-dat-viewer/./src/app/worker/interface.ts","webpack://poe-dat-viewer/./src/app/patchcdn/index-store.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/db.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/components/DatViewer.vue","webpack://poe-dat-viewer/./src/ResizeObserver.vue","webpack://poe-dat-viewer/./src/ResizeObserver.vue?a792","webpack://poe-dat-viewer/./src/ResizeObserver.vue?cf99","webpack://poe-dat-viewer/./src/CanvasScroll.vue","webpack://poe-dat-viewer/./src/CanvasScroll.vue?f261","webpack://poe-dat-viewer/./src/CanvasScroll.vue?ad6c","webpack://poe-dat-viewer/./src/CanvasScroll.vue?74cb","webpack://poe-dat-viewer/./src/app/dat-viewer/selection.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/headers.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/Viewer.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/components/Actions.vue","webpack://poe-dat-viewer/./src/app/dat-viewer/components/ShowSchema.vue","webpack://poe-dat-viewer/./src/app/dat-viewer/components/ShowSchema.vue?dd67","webpack://poe-dat-viewer/./src/app/dat-viewer/components/ShowSchema.vue?b3e6","webpack://poe-dat-viewer/./src/app/dat-viewer/components/Actions.vue?b7ad","webpack://poe-dat-viewer/./src/app/dat-viewer/components/Actions.vue?939c","webpack://poe-dat-viewer/./src/app/dat-viewer/components/Actions.vue?d227","webpack://poe-dat-viewer/./src/app/dat-viewer/components/ViewerHead.vue","webpack://poe-dat-viewer/./src/app/dat-viewer/sorting.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/rendering/content.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/rendering.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/rendering/header-columns.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/components/ViewerHead.vue?8993","webpack://poe-dat-viewer/./src/app/dat-viewer/components/ViewerHead.vue?7ebc","webpack://poe-dat-viewer/./src/app/dat-viewer/components/HeaderProps.vue","webpack://poe-dat-viewer/./src/app/dat-viewer/components/HeaderProps.vue?f7fd","webpack://poe-dat-viewer/./src/app/dat-viewer/components/HeaderProps.vue?f727","webpack://poe-dat-viewer/./src/app/dat-viewer/rendering/byte-columns.ts","webpack://poe-dat-viewer/./src/app/dat-viewer/components/DatViewer.vue?1d53","webpack://poe-dat-viewer/./src/app/dat-viewer/components/DatViewer.vue?97f3","webpack://poe-dat-viewer/./src/app/dat-viewer/components/DatViewer.vue?eecc","webpack://poe-dat-viewer/./src/app/workbench/ImportDialog.vue?fb9a","webpack://poe-dat-viewer/./src/app/workbench/ImportDialog.vue?f14b","webpack://poe-dat-viewer/./src/app/workbench/ImportDialog.vue?73a9","webpack://poe-dat-viewer/./src/app/workbench/workbench-core.ts","webpack://poe-dat-viewer/./src/app/workbench/Tabs.vue?ddb9","webpack://poe-dat-viewer/./src/app/workbench/Tabs.vue?023c","webpack://poe-dat-viewer/./src/app/workbench/Tabs.vue?8209","webpack://poe-dat-viewer/./src/app/workbench/IndexTree.vue","webpack://poe-dat-viewer/./src/VirtualScroll.vue","webpack://poe-dat-viewer/./src/VirtualScroll.vue?7b8c","webpack://poe-dat-viewer/./src/VirtualScroll.vue?382d","webpack://poe-dat-viewer/./src/perf.ts","webpack://poe-dat-viewer/./src/app/workbench/IndexTree.vue?d3d3","webpack://poe-dat-viewer/./src/app/workbench/IndexTree.vue?180b","webpack://poe-dat-viewer/./src/app/workbench/IndexTree.vue?0845","webpack://poe-dat-viewer/./src/app/workbench/DownloadProgress.vue","webpack://poe-dat-viewer/./src/app/workbench/DownloadProgress.vue?c770","webpack://poe-dat-viewer/./src/app/workbench/DownloadProgress.vue?d628","webpack://poe-dat-viewer/./src/app/workbench/DownloadProgress.vue?1433","webpack://poe-dat-viewer/./src/app/workbench/Workbench.vue?9e13","webpack://poe-dat-viewer/./src/app/workbench/Workbench.vue?368e","webpack://poe-dat-viewer/./src/main.ts","webpack://poe-dat-viewer/webpack/bootstrap","webpack://poe-dat-viewer/webpack/runtime/chunk loaded","webpack://poe-dat-viewer/webpack/runtime/compat get default export","webpack://poe-dat-viewer/webpack/runtime/define property getters","webpack://poe-dat-viewer/webpack/runtime/global","webpack://poe-dat-viewer/webpack/runtime/hasOwnProperty shorthand","webpack://poe-dat-viewer/webpack/runtime/publicPath","webpack://poe-dat-viewer/webpack/runtime/jsonp chunk loading","webpack://poe-dat-viewer/webpack/startup"],"sourcesContent":["export default __webpack_public_path__ + \"img/discord-badge.59203335.svg\";","<template>\n  <index-tree />\n  <div class=\"layout-column flex-1 min-w-0\">\n    <viewer-tabs />\n    <div class=\"layout-column flex-1 min-h-0\">\n      <component\n        v-if=\"activeTab\"\n        :is=\"activeTab.type\"\n        :args=\"activeTab.args\"\n        :key=\"activeTab.id\"\n        v-model:ka-state=\"activeTab.kaState\" />\n      <div v-else\n        class=\"bg-gray-50 flex-1 text-lg text-gray-500 flex items-center justify-center\"\n        >The viewer is ready to fulfill your wishes 👾</div>\n    </div>\n    <div class=\"app-footer\">\n      <div>Made by Alexander Drozdov, v{{ appVersion }} <a class=\"q-link text-white border-b\" href=\"https://github.com/SnosMe/poe-dat-viewer\">GitHub</a></div>\n      <a href=\"https://discord.gg/SJjBdT3\" class=\"flex ml-8\"><img src=\"@/assets/discord-badge.svg\" /></a>\n    </div>\n  </div>\n  <download-progress />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from 'vue'\nimport ViewerTabs from './Tabs.vue'\nimport IndexTree from './IndexTree.vue'\nimport DownloadProgress from './DownloadProgress.vue'\nimport { tabs, activeTabId } from './workbench-core'\n\nexport default defineComponent({\n  components: { IndexTree, ViewerTabs, DownloadProgress },\n  setup () {\n    const activeTab = computed(() =>\n      tabs.value.find(tab => tab.id === activeTabId.value)\n    )\n\n    return {\n      activeTab,\n      appVersion: process.env.APP_VERSION\n    }\n  }\n})\n</script>\n\n<style lang=\"postcss\">\n@tailwind base;\n@tailwind utilities;\n@import \"~vscode-codicons/dist/codicon.css\";\n\n* {\n  outline: none !important;\n}\n\n.codicon {\n  vertical-align: text-bottom;\n}\n\n#app {\n  display: flex;\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n  font-size: 13px;\n  line-height: 1.5;\n}\n\n.layout-column {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n\n.app-footer {\n  line-height: 1;\n  align-items: center;\n  display: flex;\n  @apply bg-gray-700;\n  @apply text-white;\n  @apply p-2;\n\n  img {\n    filter: grayscale(0.75);\n  }\n\n  &:hover {\n    img {\n      filter: grayscale(0);\n    }\n  }\n}\n</style>\n","<template>\n  <div :class=\"$style.titlebar\">\n    <div class=\"flex overflow-hidden divide-x divide-gray-600\">\n      <div v-for=\"tab in tabs\" :key=\"tab.id\"\n        :class=\"[$style.tab, { [$style.active]: tab.isActive }]\">\n        <button class=\"pl-3 h-full\"\n          @click=\"setActiveTab(tab.id)\"\n          @click.middle=\"closeTab(tab.id)\">{{ tab.title }}</button>\n        <button class=\"mx-2 w-7 h-7 hover:bg-gray-500 text-center\" title=\"Close\"\n          @click=\"closeTab(tab.id)\"><i class=\"codicon codicon-close\"></i></button>\n      </div>\n    </div>\n    <div class=\"flex p-1.5 flex-shrink-0 space-x-1\">\n      <button :class=\"$style.rightBtn\"\n        @click=\"openImport\">Import</button>\n      <button :class=\"$style.rightBtn\" title=\"Help\"><i class=\"codicon codicon-question\"></i></button>\n      <button :class=\"$style.rightBtn\" title=\"Settings\"><i class=\"codicon codicon-settings\"></i></button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from 'vue'\nimport { tabs, activeTabId, setActiveTab, closeTab, openTab } from './workbench-core'\nimport ImportDialog from './ImportDialog.vue'\n\nexport default defineComponent({\n  setup () {\n    const _tabs = computed(() =>\n      tabs.value.map(tab => ({\n        id: tab.id,\n        title: tab.title,\n        isActive: (tab.id === activeTabId.value)\n      }))\n    )\n\n    function openImport () {\n      openTab({\n        id: 'poe-dat-viewer@import',\n        title: 'Import',\n        type: ImportDialog,\n        args: undefined\n      })\n    }\n\n    return {\n      tabs: _tabs,\n      setActiveTab,\n      closeTab,\n      openImport\n    }\n  }\n})\n</script>\n\n<style lang=\"postcss\" module>\n.titlebar {\n  display: flex;\n  justify-content: space-between;\n  @apply bg-gray-700;\n  @apply text-gray-50;\n  z-index: 1;\n  line-height: 1;\n  min-height: 35px;\n}\n\n.tab {\n  display: flex;\n  align-items: center;\n\n  &:hover {\n    @apply bg-gray-600;\n  }\n\n  &.active {\n    @apply bg-gray-800;\n\n    &:hover {\n      @apply bg-gray-600;\n      @apply text-white;\n    }\n  }\n}\n\n.rightBtn {\n  @apply px-2;\n\n  &:hover {\n    @apply bg-gray-300;\n    @apply text-black;\n  }\n}\n</style>\n","<template>\n  <div class=\"p-4 overflow-auto border-l flex-1 text-base\">\n    <div class=\"flex space-x-4 items-baseline mt-4\">\n      <div :class=\"$style.importVariant\">1</div>\n      <div>\n        <div class=\"max-w-xl mb-4 font-semibold\">Useful when a new league is released. While the update is still downloading, you can review files and fix schema directly from the update servers.</div>\n        <div class=\"inline-flex items-baseline pb-2\">\n          <div style=\"width: 200px;\" class=\"my-1\">\n            <input value=\"patchcdn.pathofexile.com/\" readonly :class=\"$style.input\" />\n            <label :class=\"$style.label\">Patch CDN</label>\n          </div>\n          <div style=\"width: 100px;\" class=\"m-1\">\n            <input v-model.trim=\"poePatch\" placeholder=\"3.12.x.x.x\" :class=\"$style.input\" />\n            <label :class=\"$style.label\">Patch #</label>\n          </div>\n          <div style=\"width: 220px;\" class=\"my-1\">\n            <input value=\"/Bundles2/_.index.bin\" readonly :class=\"$style.input\" />\n            <label :class=\"$style.label\">Index</label>\n          </div>\n          <button class=\"ml-1 py-1 px-3 bg-blue-600 text-white hover:bg-blue-800\"\n            @click=\"cdnImport\"\n            :disabled=\"isCdnImportRunning\"\n            :loading=\"isCdnImportRunning\">{{ isCdnImportRunning ? 'Wait...' : 'Import' }}</button>\n        </div>\n        <div v-if=\"latestPoEPatch && poePatch !== latestPoEPatch\">\n          Latest PoE patch is <code class=\"px-1 border border-gray-300 rounded\">{{ latestPoEPatch }}</code>\n        </div>\n      </div>\n    </div>\n    <div class=\"flex space-x-4 items-baseline mt-4 border-b pb-3\">\n      <div :class=\"$style.importVariant\">2</div>\n      <div class=\"flex items-baseline\">\n        <span class=\"pr-2\">or just</span>\n        <label\n          class=\"bg-gray-100 py-1 px-2 cursor-pointer hover:bg-gray-300\"\n          style=\"width: 200px\"\n          for=\"import-local-file\">Pick a local dat file</label>\n        <input\n          class=\"hidden\"\n          id=\"import-local-file\"\n          type=\"file\"\n          accept=\".dat,.dat64\"\n          @input=\"handleFile\" />\n      </div>\n    </div>\n    <div class=\"mt-3\">\n      <template v-if=\"isFetchingSchema\">\n        <i class=\"codicon codicon-loading animate-spin\"></i>\n        <span> Downloading schema from </span>\n      </template>\n      <template v-else>\n        <i class=\"codicon codicon-check\"></i>\n        <span> Downloaded schema from </span>\n      </template>\n      <a href=\"https://github.com/poe-tool-dev/dat-schema\" class=\"underline\" target=\"_blank\">github.com/poe-tool-dev/dat-schema</a>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, shallowRef } from 'vue'\nimport { SchemaFile, SCHEMA_VERSION } from 'pathofexile-dat-schema'\nimport { fetchFile, progress } from '../patchcdn/cache'\nimport { loadIndex, loadFileContent, index } from '../patchcdn/index-store'\nimport { publicSchema } from '../dat-viewer/db'\nimport { openTab } from './workbench-core'\nimport DatViewer from '../dat-viewer/components/DatViewer.vue'\n\nexport default defineComponent({\n  setup () {\n    const poePatch = shallowRef(localStorage.getItem('POE_PATCH_VER') || '')\n    const latestPoEPatch = shallowRef('')\n    const isCdnImportRunning = shallowRef(false)\n    const isFetchingSchema = shallowRef(false)\n\n    if (poePatch.value && !index.value) {\n      cdnImport()\n    }\n    if (!publicSchema.value.length) {\n      fetchSchema()\n    }\n    getLatestPoEPatch()\n\n    async function handleFile (e: Event) {\n      const elFile = (e.target as HTMLInputElement).files![0]\n      const fileContent = new Uint8Array(await elFile.arrayBuffer())\n      const fileName = elFile.name\n      openTab({\n        id: `file@${fileName}`,\n        title: fileName,\n        type: DatViewer,\n        args: {\n          fileContent,\n          fullPath: fileName\n        }\n      })\n    }\n\n    async function cdnImport () {\n      let bundle\n      try {\n        isCdnImportRunning.value = true\n        bundle = await fetchFile(poePatch.value, '_.index.bin')\n      } finally {\n        isCdnImportRunning.value = false\n      }\n\n      try {\n        await loadIndex(bundle)\n        localStorage.setItem('POE_PATCH_VER', poePatch.value)\n      } catch (e) {\n        window.alert(e.message)\n        throw e\n      }\n    }\n\n    async function fetchSchema () {\n      isFetchingSchema.value = true\n      const response = await fetch('https://poe-bundles.snos.workers.dev/schema.min.json')\n      const schema: SchemaFile = await response.json()\n      if (schema.version === SCHEMA_VERSION) {\n        publicSchema.value = schema.tables\n      } else {\n        console.warn('Latest schema version is not supported.')\n      }\n      isFetchingSchema.value = false\n    }\n\n    async function getLatestPoEPatch () {\n      const res = await fetch('https://raw.githubusercontent.com/poe-tool-dev/latest-patch-version/main/latest.txt')\n      const version = await res.text()\n      latestPoEPatch.value = version\n    }\n\n    return {\n      poePatch,\n      latestPoEPatch,\n      isCdnImportRunning,\n      isFetchingSchema,\n      handleFile,\n      cdnImport\n    }\n  }\n})\n</script>\n\n<style lang=\"postcss\" module>\n.input {\n  width: 100%;\n  @apply py-1 px-2;\n\n  &:not([readonly]) {\n    @apply border;\n\n    &:focus {\n      @apply border-blue-500;\n    }\n  }\n\n  &[readonly] {\n    @apply border-b;\n    @apply bg-gray-100;\n  }\n}\n\n.label {\n  @apply text-xs;\n  @apply px-2;\n  @apply text-gray-500;\n}\n\n.importVariant {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  line-height: 1;\n  @apply bg-gray-700 text-gray-200;\n  @apply w-8 h-8;\n  @apply rounded;\n}\n</style>\n","import { reactive } from 'vue'\n\nconst BUNDLE_DIR = 'Bundles2'\n\nexport const progress = reactive({\n  totalSize: 0,\n  received: 0,\n  active: false,\n  bundleName: ''\n})\n\nexport async function fetchFile (patchVer: string | null, name: string) {\n  if (patchVer == null) {\n    patchVer = localStorage.getItem('POE_PATCH_VER')\n    if (!patchVer) throw new Error('never')\n  }\n\n  try {\n    return await _fetchFile(patchVer, name)\n  } catch (e) {\n    window.alert('You may need to adjust the patch version.')\n    throw e\n  }\n}\n\nexport async function _fetchFile (patchVer: string, name: string): Promise<ArrayBuffer> {\n  const path = `${patchVer}/${BUNDLE_DIR}/${name}`\n  let cache = await caches.open('bundles')\n  let res = await cache.match(path)\n  if (!res) {\n    progress.totalSize = 0\n    progress.received = 0\n    progress.active = true\n    progress.bundleName = name\n\n    res = await fetch(`https://poe-bundles.snos.workers.dev/${path}`)\n    if (res.status !== 200) {\n      progress.active = false\n      throw new Error(`patchcdn: ${res.status} ${res.statusText}`)\n    }\n    progress.totalSize = Number(res.headers.get('content-length'))\n\n    let buf: Uint8Array\n    try {\n      const reader = res.body!.getReader()\n      const chunks = [] as Uint8Array[]\n      while (true) {\n        const { done, value } = await reader.read()\n        if (done) break\n        chunks.push(value!)\n        progress.received += value!.length\n      }\n\n      buf = new Uint8Array(progress.received)\n      let bufPos = 0\n      for (const chunk of chunks) {\n        buf.set(chunk, bufPos)\n        bufPos += chunk.length\n      }\n    } finally {\n      progress.active = false\n    }\n\n    if (localStorage.getItem('POE_PATCH_VER') !== patchVer) {\n      await caches.delete('bundles')\n      cache = await caches.open('bundles')\n    }\n\n    await cache.put(path, new Response(buf, {\n      headers: {\n        'content-length': String(buf.byteLength),\n        'content-type': 'application/octet-stream'\n      }\n    }))\n    return buf.buffer\n  }\n  return res.arrayBuffer()\n}\n","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"js/script.452440e4.worker.js\");\n}\n","/* eslint-disable import/no-webpack-loader-syntax */\nimport Worker from 'worker-loader!./script'\nimport * as Comlink from 'comlink'\nimport type { WorkerRPC } from './script'\nimport type { DatFile } from 'pathofexile-dat'\n\nconst thread = Comlink.wrap<WorkerRPC>(new Worker())\n\nexport function decompressBundle (bundle: Uint8Array) {\n  if (bundle.byteOffset === 0 && bundle.byteLength === bundle.buffer.byteLength) {\n    return thread.decompressSliceInBundle(bundle)\n  } else {\n    const bundleSlice = new Uint8Array(\n      bundle.buffer.slice(bundle.byteOffset, bundle.byteOffset + bundle.byteLength)\n    )\n    return thread.decompressSliceInBundle(Comlink.transfer(bundle, [bundleSlice.buffer]))\n  }\n}\n\nexport function decompressFileTransferBundle (bundle: ArrayBuffer, offset: number, size: number) {\n  return thread.decompressSliceInBundle(\n    Comlink.transfer(new Uint8Array(bundle), [bundle]),\n    offset,\n    size\n  )\n}\n\nexport function analyzeDatFile (datFile: DatFile) {\n  return thread.analyzeDatFile(datFile)\n}\n","import { decompressBundle, decompressFileTransferBundle } from '../worker/interface'\nimport { readIndexBundle, getFileInfo } from 'pathofexile-dat/bundles/index-bundle'\nimport { fetchFile } from './cache'\nimport { shallowRef } from 'vue'\n\nexport const index = shallowRef(null as {\n  bundlesInfo: Uint8Array\n  filesInfo: Uint8Array\n  dirsInfo: Uint8Array\n  pathReps: Uint8Array\n} | null)\n\nexport async function loadFileContent (fullPath: string) {\n  const location = getFileInfo(fullPath, index.value!.bundlesInfo, index.value!.filesInfo)\n  const bundleBin = await fetchFile(null, location.bundle)\n\n  return decompressFileTransferBundle(bundleBin, location.offset, location.size)\n}\n\nexport async function loadIndex (indexBin: ArrayBuffer) {\n  const indexBundle = await decompressBundle(new Uint8Array(indexBin))\n  const _index = readIndexBundle(indexBundle)\n  index.value = {\n    bundlesInfo: _index.bundlesInfo,\n    filesInfo: _index.filesInfo,\n    dirsInfo: _index.dirsInfo,\n    pathReps: await decompressBundle(_index.pathRepsBundle)\n  }\n}\n","import { openDB, DBSchema } from 'idb'\nimport { shallowRef } from 'vue'\nimport { SchemaFile } from 'pathofexile-dat-schema'\nimport type { Header } from './headers'\n\nexport const publicSchema = shallowRef<SchemaFile['tables']>([])\n\nexport interface ViewerSerializedHeader {\n  name: string | null\n  length?: number\n  type: {\n    byteView?: { array: boolean }\n    array?: boolean\n    boolean?: { [key: string]: never }\n    integer?: { unsigned: boolean, size: number }\n    decimal?: { size: number }\n    string?: { [key: string]: never }\n    key?: { foreign: boolean }\n  }\n  textLength?: number\n}\n\ninterface DatSchema {\n  name: string\n  headers: ViewerSerializedHeader[]\n}\n\ninterface PoeDatViewerSchema extends DBSchema {\n  'dat-schemas': {\n    key: DatSchema['name']\n    value: DatSchema\n  }\n}\n\nconst db = openDB<PoeDatViewerSchema>('poe-dat-viewer', 3, {\n  upgrade (db) {\n    db.createObjectStore('dat-schemas', { keyPath: 'name' })\n  }\n})\n\nexport async function findByName (name: string) {\n  const record = await (await db).get('dat-schemas', name)\n  return record?.headers || fromPublicSchema(name) || []\n}\n\nexport async function saveHeaders (\n  name: string,\n  headers: Header[]\n) {\n  await (await db).put('dat-schemas', {\n    name,\n    headers: serializeHeaders(headers)\n  })\n}\n\nexport async function removeHeaders (name: string) {\n  await (await db).delete('dat-schemas', name)\n}\n\nfunction serializeHeaders (headers: Header[]) {\n  return headers.map<ViewerSerializedHeader>(header => ({\n    ...header,\n    length: (\n      header.type.string ||\n      header.type.array ||\n      header.type.key ||\n      header.type.boolean ||\n      header.type.decimal ||\n      header.type.integer\n    ) ? undefined\n      : header.length\n  }))\n}\n\nfunction fromPublicSchema (name: string): ViewerSerializedHeader[] | null {\n  const sch = publicSchema.value.find(s => s.name === name)\n  if (!sch) return null\n\n  return sch.columns.map(column => {\n    return { /* eslint-disable indent */\n      name: column.name || '',\n      type: {\n        array: column.array,\n        byteView:\n          column.type === 'array' ? { array: true }\n          : undefined,\n        integer:\n          column.type === 'u8' ? { unsigned: true, size: 1 }\n          : column.type === 'u16' ? { unsigned: true, size: 2 }\n          : column.type === 'u32' ? { unsigned: true, size: 4 }\n          : column.type === 'u64' ? { unsigned: true, size: 8 }\n          : column.type === 'i8' ? { unsigned: false, size: 1 }\n          : column.type === 'i16' ? { unsigned: false, size: 2 }\n          : column.type === 'i32' ? { unsigned: false, size: 4 }\n          : column.type === 'i64' ? { unsigned: false, size: 8 }\n          : undefined,\n        decimal:\n          column.type === 'f32' ? { size: 4 }\n          : column.type === 'f64' ? { size: 8 }\n          : undefined,\n        string:\n          column.type === 'string' ? {}\n          : undefined,\n        boolean:\n          column.type === 'bool' ? {}\n          : undefined,\n        key:\n          (column.type === 'row' || column.type === 'foreignrow') ? {\n            foreign: (column.type === 'foreignrow')\n          }\n          : undefined\n      },\n      textLength: 4 * 3 - 1\n    }\n  })\n}\n","<template>\n  <viewer-actions />\n  <div class=\"flex flex-1\">\n    <resize-observer @resize=\"handleResize\" class=\"flex-1 min-h-0 relative\">\n      <div class=\"bg-gray-100 absolute\" :style=\"headerBlockStyle\">\n        <viewer-head :style=\"headerOverlayContentStyle\"\n          :left=\"scrollLeft\"\n          :width=\"rowsWidth\"\n          :columns=\"renderColumns\"\n        />\n      </div>\n      <canvas-scroll\n        ref=\"canvasScroll\"\n        class=\"absolute bg-white\"\n        @scroll=\"handleScroll\"\n        :style=\"scrollableStyle\"\n        :paint-size=\"scrollablePaintSize\"\n        :full-size=\"scrollableFullSize\">\n        <canvas ref=\"canvasRef\" @click=\"handleCanvasClick\" />\n      </canvas-scroll>\n      <div :class=\"$style.rowsOverlay\" :style=\"rowsOverlayStyle\">\n        <div class=\"absolute\" :style=\"{ transform: `translate(0, ${renderItems.top}px)` }\">\n          <div v-for=\"(rowIdx, i) in renderItems.ids\" :key=\"rowIdx\"\n            :style=\"{ transform: `translate(0, ${i * LINE_HEIGHT}px)`, width: rowsNumberWidth, position: 'absolute' }\"\n            v-text=\"rowIdx\" />\n        </div>\n      </div>\n    </resize-observer>\n    <header-props\n      @focus-editing-header=\"focusEditingHeader\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, reactive, computed, provide, watch, shallowRef, shallowReactive, ref, render, onMounted } from 'vue'\nimport ResizeObserver from '@/ResizeObserver.vue'\nimport CanvasScroll from '@/CanvasScroll.vue'\nimport { Viewer, createViewer } from '../Viewer'\nimport ViewerActions from './Actions.vue'\nimport ViewerHead from './ViewerHead.vue'\nimport HeaderProps from './HeaderProps.vue'\nimport * as rendering from '../rendering'\nimport { renderByteCols, renderColStats } from '../rendering/byte-columns'\nimport { renderHeaderCols } from '../rendering/header-columns'\n\nexport default defineComponent({\n  components: { ResizeObserver, CanvasScroll, ViewerActions, ViewerHead, HeaderProps },\n  emits: ['update:kaState'],\n  props: {\n    args: {\n      type: Object as PropType<{\n        fileContent: Uint8Array\n        fullPath: string\n      }>,\n      required: true\n    },\n    kaState: {\n      type: Object as PropType<Viewer | undefined>,\n      default: undefined\n    }\n  },\n  setup (props, ctx) {\n    let viewer: Viewer\n    if (props.kaState) {\n      viewer = props.kaState // eslint-disable-line vue/no-setup-props-destructure\n    } else {\n      viewer = createViewer(props.args.fullPath, props.args.fileContent)\n      ctx.emit('update:kaState', viewer)\n    }\n    provide('viewer', viewer)\n\n    const canvasRef = ref<HTMLCanvasElement | null>(null)\n\n    const canvasScroll = ref<{ scrollTo(x: number | undefined, y: number | undefined): void } | null>(null)\n    onMounted(() => {\n      canvasScroll.value!.scrollTo(viewer.scrollPos.x, viewer.scrollPos.y)\n    })\n\n    const rowIndices = computed(() => {\n      if (viewer.rowSorting.value) {\n        return viewer.rowSorting.value\n      } else {\n        return Array.from(\n          { length: viewer.datFile.rowCount },\n          (_, rowIdx) => rowIdx)\n      }\n    })\n\n    const paintWidth = ref(0)\n    const paintHeight = ref(0)\n    function handleResize (sz: { width: number, height: number }) {\n      paintWidth.value = sz.width\n      paintHeight.value = sz.height\n    }\n    const { scrollPos } = viewer\n    function handleScroll (pos: { y: number, x: number }) {\n      scrollPos.x = pos.x\n      scrollPos.y = pos.y\n    }\n\n    const rowsFullWidth = computed(() =>\n      rendering.getRowWidth(viewer.headers.value))\n    const rowsFullHeight = computed(() =>\n      viewer.datFile.rowCount * rendering.LINE_HEIGHT)\n    const rowsOverlayWidth = computed(() =>\n      rendering.rowsOverlayWidth(viewer.datFile.rowCount))\n    const rowsWidth = computed(() =>\n      Math.max(0, paintWidth.value - rowsOverlayWidth.value))\n    const rowsHeight = computed(() =>\n      Math.max(0, paintHeight.value - rendering.HEADERS_HEIGHT))\n\n    watch([rowsWidth, rowsHeight], () => {\n      const dpr = window.devicePixelRatio\n\n      canvasRef.value!.style.width = rowsWidth.value + 'px'\n      canvasRef.value!.style.height = rowsHeight.value + 'px'\n\n      canvasRef.value!.width = rowsWidth.value * dpr\n      canvasRef.value!.height = rowsHeight.value * dpr\n\n      const ctx = canvasRef.value!.getContext('2d', { alpha: false })!\n      ctx.scale(dpr, dpr)\n\n      draw()\n    })\n\n    const renderStats = computed(() =>\n      renderColStats(viewer.columnStats.value, viewer.datFile))\n\n    const renderColumns = computed(() =>\n      renderByteCols(\n        viewer.columnSelection.value,\n        renderStats.value,\n        viewer.headers.value,\n        scrollPos.x,\n        scrollPos.x + Math.min(rowsFullWidth.value, rowsWidth.value))\n    )\n\n    watch([scrollPos, renderColumns, rowIndices, viewer.selectedRow], () => { draw() })\n\n    function draw () {\n      const ctx = canvasRef.value!.getContext('2d', { alpha: false })!\n\n      rendering.drawRows({\n        left: scrollPos.x,\n        paintWidth: rowsWidth.value,\n        top: renderItems.value.top,\n        rows: renderItems.value.ids,\n        columns: renderColumns.value,\n        viewer: viewer,\n        ctx\n      })\n    }\n\n    const renderItems = computed(() => {\n      const scrollTop = scrollPos.y\n\n      const count = Math.ceil(rowsHeight.value / rendering.LINE_HEIGHT) + 1\n      const startIdx = Math.floor(scrollTop / rendering.LINE_HEIGHT)\n\n      const top = (startIdx * rendering.LINE_HEIGHT) - scrollTop\n\n      return {\n        top,\n        ids: rowIndices.value.slice(startIdx, startIdx + count)\n      }\n    })\n\n    function focusEditingHeader () {\n      const header = viewer.editHeader.value!\n      const cols = renderHeaderCols(viewer.headers.value, null, 0, 0 + Infinity)\n      const target = cols.find(col => col.offset === header.offset)!\n      canvasScroll.value!.scrollTo(target.leftPx - rowsWidth.value * 0.33, undefined)\n    }\n\n    function handleCanvasClick (e: MouseEvent) {\n      const { selectedRow } = viewer\n      const sortedIdx = Math.floor((e.offsetY + scrollPos.y) / rendering.LINE_HEIGHT)\n      const realIdx = rowIndices.value[sortedIdx]\n      selectedRow.value = (selectedRow.value !== realIdx)\n        ? realIdx\n        : null\n    }\n\n    return {\n      headerBlockStyle: computed(() =>\n        ({ height: rendering.HEADERS_HEIGHT + 'px', width: paintWidth.value + 'px' })),\n      headerOverlayContentStyle: computed(() =>\n        ({ left: rowsOverlayWidth.value + 'px', height: rendering.HEADERS_HEIGHT + 'px', width: rowsWidth.value + 'px' })),\n      scrollableStyle: computed(() =>\n        ({ top: rendering.HEADERS_HEIGHT + 'px', left: rowsOverlayWidth.value + 'px' })),\n      scrollablePaintSize: computed(() =>\n        ({ width: rowsWidth.value, height: rowsHeight.value })),\n      scrollableFullSize: computed(() =>\n        ({ width: rowsFullWidth.value, height: rowsFullHeight.value })),\n      rowsOverlayStyle: computed(() =>\n        ({ top: rendering.HEADERS_HEIGHT + 'px', width: rowsOverlayWidth.value + 'px', height: rowsHeight.value + 'px', fontFamily: rendering.FONT_FAMILY, fontSize: rendering.FONT_SIZE + 'px', lineHeight: rendering.LINE_HEIGHT + 'px' })),\n      handleScroll,\n      handleResize,\n      renderItems,\n      canvasRef,\n      renderColumns,\n      scrollLeft: computed(() => scrollPos.x),\n      rowsWidth: computed(() => Math.min(rowsFullWidth.value, rowsWidth.value)),\n      LINE_HEIGHT: rendering.LINE_HEIGHT,\n      canvasScroll,\n      rowsNumberWidth: (rendering.rowsNumWidth(viewer.datFile.rowCount) + 'px'),\n      focusEditingHeader,\n      handleCanvasClick\n    }\n  }\n})\n</script>\n\n<style lang=\"postcss\" module>\n.rowsOverlay {\n  position: absolute;\n  overflow: hidden;\n  transform: translate3d(0, 0, 0);\n  contain: strict;\n  @apply bg-white;\n  padding-left: 7px;\n  @apply border-l border-gray-100;\n  padding-right: 8px;\n  text-align: right;\n  box-shadow: #cacaca 0 6px 6px -6px inset;\n  user-select: none;\n}\n</style>\n","<template>\n  <component :is=\"tag\" ref=\"rootEl\" data-role=\"resize-observer\">\n    <slot />\n  </component>\n</template>\n\n<script lang=\"ts\">\n/// <reference types=\"resize-observer-browser\" />\n\nimport { defineComponent, ref, onMounted, onBeforeUnmount } from 'vue'\n\nexport default defineComponent({\n  props: {\n    tag: {\n      type: String,\n      default: 'div'\n    }\n  },\n  emits: ['resize'],\n  setup (props, ctx) {\n    const rootEl = ref<HTMLElement | null>(null)\n\n    onMounted(() => {\n      const resizeObserver = new ResizeObserver(entries => {\n        ctx.emit('resize', {\n          width: entries[0].contentRect.width,\n          height: entries[0].contentRect.height\n        })\n      })\n\n      resizeObserver.observe(rootEl.value!)\n      onBeforeUnmount(() => {\n        resizeObserver.unobserve(rootEl.value!)\n      })\n    })\n\n    return { rootEl }\n  }\n})\n</script>\n","\n/// <reference types=\"resize-observer-browser\" />\n\nimport { defineComponent, ref, onMounted, onBeforeUnmount } from 'vue'\n\nexport default defineComponent({\n  props: {\n    tag: {\n      type: String,\n      default: 'div'\n    }\n  },\n  emits: ['resize'],\n  setup (props, ctx) {\n    const rootEl = ref<HTMLElement | null>(null)\n\n    onMounted(() => {\n      const resizeObserver = new ResizeObserver(entries => {\n        ctx.emit('resize', {\n          width: entries[0].contentRect.width,\n          height: entries[0].contentRect.height\n        })\n      })\n\n      resizeObserver.observe(rootEl.value!)\n      onBeforeUnmount(() => {\n        resizeObserver.unobserve(rootEl.value!)\n      })\n    })\n\n    return { rootEl }\n  }\n})\n","import { render } from \"./ResizeObserver.vue?vue&type=template&id=7624aec8\"\nimport script from \"./ResizeObserver.vue?vue&type=script&lang=ts\"\nexport * from \"./ResizeObserver.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div :class=\"$style.scrollable\"\n    :style=\"{ width: paintSize.width + 'px', height: paintSize.height + 'px' }\"\n    @mousedown=\"handleMousedown\"\n    @wheel=\"handleMousewheel\"\n  >\n    <slot />\n    <div v-if=\"scrollbarY\" :class=\"`${$style.track} ${$style.y}`\" @mousedown=\"handleTrackMousedownY\"\n      :style=\"{ width: scrollbarY.fixedSize + 'px', height: scrollbarY.trackSize + 'px' }\">\n      <div :class=\"$style.thumb\" :style=\"{\n        transform: `translate(0, ${scrollbarY.thumbPos}px)`,\n        width: scrollbarY.fixedSize + 'px', height: scrollbarY.thumbSize + 'px' }\" />\n    </div>\n    <div v-if=\"scrollbarX\" :class=\"`${$style.track} ${$style.x}`\" @mousedown=\"handleTrackMousedownX\"\n      :style=\"{ width: scrollbarX.trackSize + 'px', height: scrollbarX.fixedSize + 'px' }\">\n      <div :class=\"$style.thumb\" :style=\"{\n        transform: `translate(${scrollbarX.thumbPos}px, 0)`,\n        width: scrollbarX.thumbSize + 'px', height: scrollbarX.fixedSize + 'px' }\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, shallowReactive, computed, Ref, PropType, readonly, watch } from 'vue'\n\nconst MIN_THUMB_SIZE = 40\nconst SCROLL_DIR_THRESHOLD = 15\nconst WHEEL_SCROLL_SPEED = 100\nconst SCROLL_ACCELERATION_FN = (value: number, dt: number) =>\n  Math.max(1, Math.pow(value * (3 / 1000) * dt, 2)) * Math.sign(value)\n\ntype Scrollbar = {\n  fixedSize: number\n  trackSize: number\n  thumbSize: number\n  thumbRatio: number\n  thumbPos: number\n} | null\n\nfunction scrollbar (\n  fixedSize: number,\n  paintSize: number,\n  scrollSize: number,\n  otherScrollbar: Scrollbar,\n  scrollPos: number\n): Scrollbar {\n  if (scrollSize <= paintSize) return null\n\n  const trackSize = Math.max(0, paintSize - (otherScrollbar?.fixedSize ?? 0))\n  const thumbSize = Math.max(MIN_THUMB_SIZE, Math.floor(paintSize * trackSize / scrollSize))\n\n  const thumbRatio = (trackSize - thumbSize) / (scrollSize - paintSize)\n  const thumbPos = Math.round(scrollPos * thumbRatio)\n\n  return {\n    trackSize,\n    thumbSize,\n    fixedSize,\n    thumbRatio,\n    thumbPos\n  }\n}\n\nfunction useMouseMiddleButtonScroll (scrollByDelta: (dx: number, dy: number) => void) {\n  let startY = 0\n  let startX = 0\n  let deltaY = 0\n  let deltaX = 0\n  let direction = null as 'vertical' | 'horizontal' | null\n\n  let rafTime = 0\n  let rafId = 0\n\n  function handleMousedown (e: MouseEvent) {\n    if (e.button !== 1) return\n\n    e.preventDefault()\n    e.stopPropagation()\n    document.body.style.cursor = 'all-scroll'\n\n    direction = null\n    startY = e.clientY\n    startX = e.clientX\n    deltaY = 0\n    deltaX = 0\n\n    rafTime = 0\n    rafId = requestAnimationFrame(scrollEachFrame)\n    document.addEventListener('mousemove', handleMouseMove)\n    document.addEventListener('mouseup', cancelScroll)\n    document.addEventListener('mouseleave', cancelScroll)\n  }\n\n  function cancelScroll () {\n    cancelAnimationFrame(rafId)\n    document.removeEventListener('mousemove', handleMouseMove)\n    document.removeEventListener('mouseup', cancelScroll)\n    document.removeEventListener('mouseleave', cancelScroll)\n\n    document.body.style.removeProperty('cursor')\n  }\n\n  function handleMouseMove (e: MouseEvent) {\n    const dy = (e.clientY - startY)\n    const dx = (e.clientX - startX)\n\n    if (direction === null) {\n      if (Math.abs(dy) > SCROLL_DIR_THRESHOLD) {\n        direction = 'vertical'\n        document.body.style.cursor = 'ns-resize'\n      } else if (Math.abs(dx) > SCROLL_DIR_THRESHOLD) {\n        direction = 'horizontal'\n        document.body.style.cursor = 'ew-resize'\n      } else {\n        return\n      }\n    }\n\n    if (direction === 'vertical') {\n      deltaY = dy\n    } else {\n      deltaX = dx\n    }\n  }\n\n  function scrollEachFrame (time: number) {\n    const dtTime = time - (rafTime || time)\n    rafTime = time\n    rafId = requestAnimationFrame(scrollEachFrame)\n\n    scrollByDelta(\n      SCROLL_ACCELERATION_FN(deltaX, dtTime),\n      SCROLL_ACCELERATION_FN(deltaY, dtTime)\n    )\n  }\n\n  return { handleMousedown }\n}\n\nfunction useMouseWheelScroll (scrollByDelta: (dx: number, dy: number) => void) {\n  function handleMousewheel (e: WheelEvent) {\n    scrollByDelta(0, Math.sign(e.deltaY) * WHEEL_SCROLL_SPEED)\n  }\n\n  return { handleMousewheel }\n}\n\nfunction useScrollbarScroll (\n  scrollbar: Ref<Scrollbar>,\n  axis: 'x' | 'y',\n  scrollTo: (x: number | undefined, y: number | undefined) => void\n) {\n  let start = 0\n  let offset = 0\n\n  const rectProp = (axis === 'y' ? 'y' : 'x')\n  const mEventProp = (axis === 'y' ? 'clientY' : 'clientX')\n\n  function handleTrackMousedown (e: MouseEvent) {\n    e.preventDefault()\n    e.stopPropagation()\n\n    const trackEl = e.currentTarget as HTMLElement\n    start = trackEl.getBoundingClientRect()[rectProp]\n\n    if (e.target !== trackEl) {\n      const thumbEl = e.target as HTMLElement\n      offset = e[mEventProp] - thumbEl.getBoundingClientRect()[rectProp]\n    } else {\n      offset = (scrollbar.value!.thumbSize / 2)\n      handleMouseMove(e)\n      offset = (e[mEventProp] - start - scrollbar.value!.thumbPos)\n    }\n\n    document.addEventListener('mousemove', handleMouseMove)\n    document.addEventListener('mouseup', cancelScroll)\n    document.addEventListener('mouseleave', cancelScroll)\n  }\n\n  function handleMouseMove (e: MouseEvent) {\n    const value = (e[mEventProp] - start - offset) / scrollbar.value!.thumbRatio\n    if (axis === 'x') {\n      scrollTo(value, undefined)\n    } else {\n      scrollTo(undefined, value)\n    }\n  }\n\n  function cancelScroll () {\n    document.removeEventListener('mousemove', handleMouseMove)\n    document.removeEventListener('mouseup', cancelScroll)\n    document.removeEventListener('mouseleave', cancelScroll)\n  }\n\n  return { handleTrackMousedown }\n}\n\nexport default defineComponent({\n  props: {\n    paintSize: {\n      type: Object as PropType<{ width: number, height: number }>,\n      required: true\n    },\n    fullSize: {\n      type: Object as PropType<{ width: number, height: number }>,\n      required: true\n    },\n    widthY: {\n      type: Number,\n      default: 14\n    },\n    widthX: {\n      type: Number,\n      default: 12\n    }\n  },\n  emits: ['scroll'],\n  setup (props, ctx) {\n    const scrollPos = shallowReactive({ y: 0, x: 0 })\n\n    watch(() => [props.paintSize, props.fullSize], () => {\n      const { paintSize, fullSize } = props\n      scrollPos.x = Math.max(0, Math.min(scrollPos.x, fullSize.width - paintSize.width))\n      scrollPos.y = Math.max(0, Math.min(scrollPos.y, fullSize.height - paintSize.height))\n    }, { deep: true })\n\n    watch(scrollPos, () => {\n      ctx.emit('scroll', {\n        y: scrollPos.y,\n        x: scrollPos.x\n      })\n    })\n\n    const scrollbarY = computed(() =>\n      scrollbar(props.widthY, props.paintSize.height, props.fullSize.height, null, scrollPos.y))\n    const scrollbarX = computed(() =>\n      scrollbar(props.widthX, props.paintSize.width, props.fullSize.width, scrollbarY.value, scrollPos.x))\n\n    function scrollByDelta (dx: number, dy: number) {\n      const { paintSize, fullSize } = props\n      scrollPos.y = Math.max(0, Math.min(scrollPos.y + Math.floor(dy), fullSize.height - paintSize.height))\n      scrollPos.x = Math.max(0, Math.min(scrollPos.x + Math.floor(dx), fullSize.width - paintSize.width))\n    }\n\n    function scrollTo (x: number | undefined, y: number | undefined) {\n      const { paintSize, fullSize } = props\n      if (x !== undefined) {\n        scrollPos.x = Math.max(0, Math.min(Math.floor(x), fullSize.width - paintSize.width))\n      }\n      if (y !== undefined) {\n        scrollPos.y = Math.max(0, Math.min(Math.floor(y), fullSize.height - paintSize.height))\n      }\n    }\n\n    return {\n      scrollbarY,\n      scrollbarX,\n      scrollPos: readonly(scrollPos),\n      scrollTo,\n      scrollByDelta,\n      handleMousedown: useMouseMiddleButtonScroll(scrollByDelta).handleMousedown,\n      handleMousewheel: useMouseWheelScroll(scrollByDelta).handleMousewheel,\n      handleTrackMousedownY: useScrollbarScroll(scrollbarY, 'y', scrollTo).handleTrackMousedown,\n      handleTrackMousedownX: useScrollbarScroll(scrollbarX, 'x', scrollTo).handleTrackMousedown\n    }\n  }\n})\n</script>\n\n<style lang=\"postcss\" module>\n.scrollable {\n  overflow: hidden;\n  position: relative;\n  transform: translate3d(0, 0, 0);\n}\n\n.track {\n  position: absolute;\n  contain: strict;\n  &.y { top: 0; right: 0; }\n  &.x { bottom: 0; left: 0; }\n}\n\n.thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.3);\n  will-change: transform;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.4);\n  }\n}\n</style>\n","\nimport { defineComponent, shallowReactive, computed, Ref, PropType, readonly, watch } from 'vue'\n\nconst MIN_THUMB_SIZE = 40\nconst SCROLL_DIR_THRESHOLD = 15\nconst WHEEL_SCROLL_SPEED = 100\nconst SCROLL_ACCELERATION_FN = (value: number, dt: number) =>\n  Math.max(1, Math.pow(value * (3 / 1000) * dt, 2)) * Math.sign(value)\n\ntype Scrollbar = {\n  fixedSize: number\n  trackSize: number\n  thumbSize: number\n  thumbRatio: number\n  thumbPos: number\n} | null\n\nfunction scrollbar (\n  fixedSize: number,\n  paintSize: number,\n  scrollSize: number,\n  otherScrollbar: Scrollbar,\n  scrollPos: number\n): Scrollbar {\n  if (scrollSize <= paintSize) return null\n\n  const trackSize = Math.max(0, paintSize - (otherScrollbar?.fixedSize ?? 0))\n  const thumbSize = Math.max(MIN_THUMB_SIZE, Math.floor(paintSize * trackSize / scrollSize))\n\n  const thumbRatio = (trackSize - thumbSize) / (scrollSize - paintSize)\n  const thumbPos = Math.round(scrollPos * thumbRatio)\n\n  return {\n    trackSize,\n    thumbSize,\n    fixedSize,\n    thumbRatio,\n    thumbPos\n  }\n}\n\nfunction useMouseMiddleButtonScroll (scrollByDelta: (dx: number, dy: number) => void) {\n  let startY = 0\n  let startX = 0\n  let deltaY = 0\n  let deltaX = 0\n  let direction = null as 'vertical' | 'horizontal' | null\n\n  let rafTime = 0\n  let rafId = 0\n\n  function handleMousedown (e: MouseEvent) {\n    if (e.button !== 1) return\n\n    e.preventDefault()\n    e.stopPropagation()\n    document.body.style.cursor = 'all-scroll'\n\n    direction = null\n    startY = e.clientY\n    startX = e.clientX\n    deltaY = 0\n    deltaX = 0\n\n    rafTime = 0\n    rafId = requestAnimationFrame(scrollEachFrame)\n    document.addEventListener('mousemove', handleMouseMove)\n    document.addEventListener('mouseup', cancelScroll)\n    document.addEventListener('mouseleave', cancelScroll)\n  }\n\n  function cancelScroll () {\n    cancelAnimationFrame(rafId)\n    document.removeEventListener('mousemove', handleMouseMove)\n    document.removeEventListener('mouseup', cancelScroll)\n    document.removeEventListener('mouseleave', cancelScroll)\n\n    document.body.style.removeProperty('cursor')\n  }\n\n  function handleMouseMove (e: MouseEvent) {\n    const dy = (e.clientY - startY)\n    const dx = (e.clientX - startX)\n\n    if (direction === null) {\n      if (Math.abs(dy) > SCROLL_DIR_THRESHOLD) {\n        direction = 'vertical'\n        document.body.style.cursor = 'ns-resize'\n      } else if (Math.abs(dx) > SCROLL_DIR_THRESHOLD) {\n        direction = 'horizontal'\n        document.body.style.cursor = 'ew-resize'\n      } else {\n        return\n      }\n    }\n\n    if (direction === 'vertical') {\n      deltaY = dy\n    } else {\n      deltaX = dx\n    }\n  }\n\n  function scrollEachFrame (time: number) {\n    const dtTime = time - (rafTime || time)\n    rafTime = time\n    rafId = requestAnimationFrame(scrollEachFrame)\n\n    scrollByDelta(\n      SCROLL_ACCELERATION_FN(deltaX, dtTime),\n      SCROLL_ACCELERATION_FN(deltaY, dtTime)\n    )\n  }\n\n  return { handleMousedown }\n}\n\nfunction useMouseWheelScroll (scrollByDelta: (dx: number, dy: number) => void) {\n  function handleMousewheel (e: WheelEvent) {\n    scrollByDelta(0, Math.sign(e.deltaY) * WHEEL_SCROLL_SPEED)\n  }\n\n  return { handleMousewheel }\n}\n\nfunction useScrollbarScroll (\n  scrollbar: Ref<Scrollbar>,\n  axis: 'x' | 'y',\n  scrollTo: (x: number | undefined, y: number | undefined) => void\n) {\n  let start = 0\n  let offset = 0\n\n  const rectProp = (axis === 'y' ? 'y' : 'x')\n  const mEventProp = (axis === 'y' ? 'clientY' : 'clientX')\n\n  function handleTrackMousedown (e: MouseEvent) {\n    e.preventDefault()\n    e.stopPropagation()\n\n    const trackEl = e.currentTarget as HTMLElement\n    start = trackEl.getBoundingClientRect()[rectProp]\n\n    if (e.target !== trackEl) {\n      const thumbEl = e.target as HTMLElement\n      offset = e[mEventProp] - thumbEl.getBoundingClientRect()[rectProp]\n    } else {\n      offset = (scrollbar.value!.thumbSize / 2)\n      handleMouseMove(e)\n      offset = (e[mEventProp] - start - scrollbar.value!.thumbPos)\n    }\n\n    document.addEventListener('mousemove', handleMouseMove)\n    document.addEventListener('mouseup', cancelScroll)\n    document.addEventListener('mouseleave', cancelScroll)\n  }\n\n  function handleMouseMove (e: MouseEvent) {\n    const value = (e[mEventProp] - start - offset) / scrollbar.value!.thumbRatio\n    if (axis === 'x') {\n      scrollTo(value, undefined)\n    } else {\n      scrollTo(undefined, value)\n    }\n  }\n\n  function cancelScroll () {\n    document.removeEventListener('mousemove', handleMouseMove)\n    document.removeEventListener('mouseup', cancelScroll)\n    document.removeEventListener('mouseleave', cancelScroll)\n  }\n\n  return { handleTrackMousedown }\n}\n\nexport default defineComponent({\n  props: {\n    paintSize: {\n      type: Object as PropType<{ width: number, height: number }>,\n      required: true\n    },\n    fullSize: {\n      type: Object as PropType<{ width: number, height: number }>,\n      required: true\n    },\n    widthY: {\n      type: Number,\n      default: 14\n    },\n    widthX: {\n      type: Number,\n      default: 12\n    }\n  },\n  emits: ['scroll'],\n  setup (props, ctx) {\n    const scrollPos = shallowReactive({ y: 0, x: 0 })\n\n    watch(() => [props.paintSize, props.fullSize], () => {\n      const { paintSize, fullSize } = props\n      scrollPos.x = Math.max(0, Math.min(scrollPos.x, fullSize.width - paintSize.width))\n      scrollPos.y = Math.max(0, Math.min(scrollPos.y, fullSize.height - paintSize.height))\n    }, { deep: true })\n\n    watch(scrollPos, () => {\n      ctx.emit('scroll', {\n        y: scrollPos.y,\n        x: scrollPos.x\n      })\n    })\n\n    const scrollbarY = computed(() =>\n      scrollbar(props.widthY, props.paintSize.height, props.fullSize.height, null, scrollPos.y))\n    const scrollbarX = computed(() =>\n      scrollbar(props.widthX, props.paintSize.width, props.fullSize.width, scrollbarY.value, scrollPos.x))\n\n    function scrollByDelta (dx: number, dy: number) {\n      const { paintSize, fullSize } = props\n      scrollPos.y = Math.max(0, Math.min(scrollPos.y + Math.floor(dy), fullSize.height - paintSize.height))\n      scrollPos.x = Math.max(0, Math.min(scrollPos.x + Math.floor(dx), fullSize.width - paintSize.width))\n    }\n\n    function scrollTo (x: number | undefined, y: number | undefined) {\n      const { paintSize, fullSize } = props\n      if (x !== undefined) {\n        scrollPos.x = Math.max(0, Math.min(Math.floor(x), fullSize.width - paintSize.width))\n      }\n      if (y !== undefined) {\n        scrollPos.y = Math.max(0, Math.min(Math.floor(y), fullSize.height - paintSize.height))\n      }\n    }\n\n    return {\n      scrollbarY,\n      scrollbarX,\n      scrollPos: readonly(scrollPos),\n      scrollTo,\n      scrollByDelta,\n      handleMousedown: useMouseMiddleButtonScroll(scrollByDelta).handleMousedown,\n      handleMousewheel: useMouseWheelScroll(scrollByDelta).handleMousewheel,\n      handleTrackMousedownY: useScrollbarScroll(scrollbarY, 'y', scrollTo).handleTrackMousedown,\n      handleTrackMousedownX: useScrollbarScroll(scrollbarX, 'x', scrollTo).handleTrackMousedown\n    }\n  }\n})\n","// extracted by mini-css-extract-plugin\nexport default {\"scrollable\":\"CanvasScroll_scrollable_2JJue\",\"track\":\"CanvasScroll_track_2TQj3\",\"y\":\"CanvasScroll_y_31A4K\",\"x\":\"CanvasScroll_x_1tP3O\",\"thumb\":\"CanvasScroll_thumb_3KZWl\"};","import { render } from \"./CanvasScroll.vue?vue&type=template&id=1c788ded\"\nimport script from \"./CanvasScroll.vue?vue&type=script&lang=ts\"\nexport * from \"./CanvasScroll.vue?vue&type=script&lang=ts\"\n\nconst cssModules = script.__cssModules = {}\nimport style0 from \"./CanvasScroll.vue?vue&type=style&index=0&id=1c788ded&lang=postcss&module=true\"\ncssModules[\"$style\"] = style0\nscript.render = render\n\nexport default script","import type { Header } from './headers'\n\nexport function selectColsByHeader (header: Header, selection: boolean[]) {\n  for (let offset = header.offset; offset < (header.offset + header.length); ++offset) {\n    selection[offset] = true\n  }\n}\n\nexport function toggleColsBetween (selection: boolean[], a: number, b: number, headers: readonly Header[]) {\n  const start = Math.min(a, b)\n  const end = Math.max(a, b)\n\n  headers = headers.filter(hdr => (hdr.type.byteView && !hdr.type.byteView.array))\n\n  for (let offset = start; offset <= end; ++offset) {\n    if (headers.some(hdr =>\n      offset >= hdr.offset && offset < (hdr.offset + hdr.length)\n    )) {\n      selection[offset] = !selection[offset]\n    }\n  }\n}\n\nexport function clearColumnSelection (selection: boolean[]) {\n  selection.fill(false)\n}\n\nexport function getColumnSelections (selection: readonly boolean[]) {\n  const ranges: number[][] = []\n\n  let idx = selection.indexOf(true)\n  let last: number\n  if (idx < 0) {\n    return ranges\n  } else {\n    last = idx\n    ranges.push([last])\n  }\n\n  for (idx += 1; idx < selection.length; ++idx) {\n    if (selection[idx]) {\n      const curr = idx\n      if ((curr - last) === 1) {\n        ranges[ranges.length - 1].push(curr)\n      } else {\n        ranges.push([curr])\n      }\n      last = curr\n    }\n  }\n\n  return ranges\n}\n","import { getColumnSelections } from './selection'\n\nexport interface Header {\n  name: string | null\n  readonly offset: number\n  readonly length: number\n  type: {\n    byteView?: { array: boolean }\n    array?: boolean\n    boolean?: { [key: string]: never }\n    integer?: { unsigned: boolean, size: number }\n    decimal?: { size: number }\n    string?: { [key: string]: never }\n    key?: { foreign: boolean }\n  }\n  textLength?: number\n}\n\nexport const byteView = (): Header['type'] => ({ byteView: { array: false } })\n\nfunction removeHeadersAtOffsets (offsets: number[], headers: Header[]) {\n  for (let idx = 0; idx < headers.length;) {\n    const header = headers[idx]\n    if (\n      header.name != null && offsets.some(offset =>\n        offset >= header.offset &&\n        offset < header.offset + header.length\n      )) {\n      removeHeader(header, headers)\n    } else {\n      idx += 1\n    }\n  }\n}\n\nexport function createHeaderFromSelected (selection: boolean[], headers: Header[]) {\n  const selections = getColumnSelections(selection)\n  if (selections.length === 0) {\n    throw new Error('No bytes selected')\n  } else if (selections.length > 1) {\n    throw new Error('Cannot create header from non-contiguous selection')\n  }\n  const selected = selections[0]\n\n  removeHeadersAtOffsets(selected, headers)\n\n  const emptyHeader = headers.find(header =>\n    selected[0] >= header.offset &&\n    selected[0] + selected.length <= header.offset + header.length\n  )!\n\n  let updatedHeaders: Header[] = [\n    {\n      name: null,\n      offset: emptyHeader.offset,\n      length: selected[0] - emptyHeader.offset,\n      type: byteView()\n    }, {\n      name: '',\n      offset: selected[0],\n      length: selected.length,\n      type: byteView(),\n      textLength: 4 * 3 - 1\n    }, {\n      name: null,\n      offset: selected[0] + selected.length,\n      length: emptyHeader.length - (selected[0] - emptyHeader.offset + selected.length),\n      type: byteView()\n    }\n  ]\n  const header = updatedHeaders[1]\n\n  updatedHeaders = updatedHeaders.filter(header => header.length)\n  headers.splice(headers.indexOf(emptyHeader), 1, ...updatedHeaders)\n\n  return header\n}\n\nexport function removeHeader (header: Header, headers: Header[]) {\n  if (header.name == null) {\n    throw new Error('Cannot remove empty header')\n  }\n\n  header.name = null\n  header.type = byteView()\n\n  for (let idx = 0; idx < (headers.length - 1);) {\n    const merged = mergeEmptyHeaders(headers[idx], headers[idx + 1])\n    if (merged) {\n      headers.splice(idx, 2, merged)\n    } else {\n      idx += 1\n    }\n  }\n}\n\nfunction mergeEmptyHeaders (h1: Header, h2: Header): Header | null {\n  if (h1.name === null && h2.name === null) {\n    return {\n      name: null,\n      offset: h1.offset,\n      length: h1.length + h2.length,\n      type: byteView()\n    }\n  }\n\n  return null\n}\n","import { DatFile, readDatFile, readColumn } from 'pathofexile-dat'\nimport type { ColumnStats } from 'pathofexile-dat/dat-analysis'\nimport { validateHeader } from 'pathofexile-dat/dat-analysis/validation'\nimport { getHeaderLength } from 'pathofexile-dat/dat/header'\nimport { Header, createHeaderFromSelected, byteView } from './headers'\nimport * as db from './db'\nimport { clearColumnSelection, selectColsByHeader } from './selection'\nimport { shallowRef, Ref, triggerRef, shallowReactive } from 'vue'\nimport { analyzeDatFile } from '../worker/interface'\n\nexport interface Viewer {\n  readonly name: string\n  readonly datFile: DatFile\n  headers: Ref<Header[]>\n  columnStats: Ref<ColumnStats[]>\n  columnSelection: Ref<boolean[]>\n  editHeader: Ref<Header | null>\n  selectedRow: Ref<number | null>\n  rowSorting: Ref<number[] | null>\n  scrollPos: { x: number, y: number }\n}\n\nexport function createViewer (path: string, fileContent: Uint8Array): Viewer {\n  const parsed = readDatFile(path, fileContent)\n\n  const viewer: Viewer = {\n    headers: shallowRef(\n      parsed.rowLength\n        ? [{\n            name: null,\n            offset: 0,\n            length: parsed.rowLength,\n            type: byteView()\n          }]\n        : []\n    ),\n    datFile: parsed,\n    name: getNamePart(path),\n    columnStats: shallowRef([]),\n    columnSelection: shallowRef(new Array(parsed.rowLength).fill(false)),\n    editHeader: shallowRef(null),\n    selectedRow: shallowRef(null),\n    rowSorting: shallowRef(null),\n    scrollPos: shallowReactive({ x: 0, y: 0 })\n  }\n\n  analyzeDatFile(viewer.datFile)\n    .then(async (stats) => {\n      viewer.columnStats.value = stats\n      await importHeaders(viewer)\n    })\n\n  return viewer\n}\n\nexport async function importHeaders (viewer: Viewer) {\n  viewer.editHeader.value = null\n\n  viewer.headers.value = viewer.datFile.rowLength\n    ? [{\n        name: null,\n        offset: 0,\n        length: viewer.datFile.rowLength,\n        type: byteView()\n      }]\n    : []\n\n  const headers = await db.findByName(viewer.name)\n  try {\n    tryImportHeaders(headers, viewer)\n  } catch (e) {\n    window.alert(`WARN: ${e.message}`)\n  } finally {\n    triggerRef(viewer.headers)\n  }\n}\n\nfunction tryImportHeaders (serialized: db.ViewerSerializedHeader[], viewer: Viewer): void {\n  let offset = 0\n  for (const hdrSerialized of serialized) {\n    const headerLength = hdrSerialized.length || getHeaderLength(hdrSerialized, viewer.datFile)\n    if (hdrSerialized.name == null) {\n      offset += headerLength\n      continue\n    }\n\n    const header: Header = {\n      ...hdrSerialized,\n      length: headerLength,\n      offset: offset\n    }\n\n    const isValid = (hdrSerialized.length)\n      ? (viewer.datFile.rowLength - header.offset) >= header.length\n      : validateHeader(header, viewer.columnStats.value, viewer.datFile)\n    if (!isValid) {\n      throw new Error('The schema is invalid.')\n    }\n\n    selectColsByHeader(header, viewer.columnSelection.value)\n    const headerCreated = createHeaderFromSelected(viewer.columnSelection.value, viewer.headers.value)\n    Object.assign(headerCreated, header)\n    clearColumnSelection(viewer.columnSelection.value)\n\n    offset += headerLength\n  }\n}\n\nexport function exportAllRows (headers: Header[], datFile: DatFile) {\n  const columns = headers\n    .filter(({ type }) => type.boolean || type.decimal || type.integer || type.key || type.string)\n    .map((header, idx) => ({\n      name: header.name || `Unknown${idx + 1}`,\n      data: (() => {\n        const data = readColumn(header, datFile)\n\n        if (header.type.key?.foreign) {\n          if (!header.type.array) {\n            const data_ = data as ({ rid: number, unknown: number } | null)[]\n            if (!data_.every(row => row == null || row.unknown === 0)) {\n              throw new Error('never')\n            }\n            return data_.map(row => row && row.rid)\n          } else {\n            const data_ = data as (Array<{ rid: number, unknown: number }>)[]\n            if (!data_.every(row => row.every(entry => entry.unknown === 0))) {\n              throw new Error('never')\n            }\n            return data_.map(row => row.map(entry => entry.rid))\n          }\n        }\n\n        return data\n      })()\n    }))\n\n  columns.unshift({\n    name: '_rid',\n    data: Array(datFile.rowCount).fill(undefined)\n      .map((_, idx) => idx)\n  })\n\n  return Array(datFile.rowCount).fill(undefined)\n    .map((_, idx) => Object.fromEntries(\n      columns.map(col => [col.name, col.data[idx]])\n    ))\n}\n\nfunction getNamePart (path: string) {\n  return path.match(/[^/]+(?=\\..+$)/)![0]\n}\n\nexport async function saveHeaders (viewer: Viewer) {\n  await db.saveHeaders(viewer.name, viewer.headers.value)\n}\n\nexport async function removeHeaders (viewer: Viewer) {\n  await db.removeHeaders(viewer.name)\n}\n","<template>\n  <div :class=\"$style.bar\">\n    <div class=\"flex\">\n      <template v-if=\"selections.length === 0\">\n        <div class=\"text-gray-400 italic px-1.5 self-center\">No bytes selected</div>\n      </template>\n      <template v-else-if=\"selections.length === 1\">\n        <button class=\"hover:bg-gray-300 hover:text-black px-1.5\"\n          @click=\"defineColumn\"><i class=\"codicon codicon-add\"></i> Define column</button>\n      </template>\n      <template v-else-if=\"selections.length > 1\">\n        <div class=\"text-gray-300 px-1.5 mr-1 self-center\">Selections</div>\n        <!-- eslint-disable-next-line vue/require-v-for-key -->\n        <div v-for=\"range in selections\"\n          class=\"px-1.5 mr-1 font-mono bg-gray-200 text-black flex items-center\"\n          v-text=\"range\" />\n      </template>\n    </div>\n    <div class=\"flex space-x-1\">\n      <button v-if=\"rowSorting\"\n        class=\"bg-gray-600 hover:bg-gray-300 hover:text-black px-1.5 border border-gray-500\"\n        @click=\"rowSorting = null\"\n        >Clear sorting</button>\n      <button\n        class=\"hover:bg-gray-300 hover:text-black px-1.5\"\n        @click=\"restoreSchema\"\n        ><i class=\"codicon codicon-discard\" /> Restore schema</button>\n      <button\n        class=\"hover:bg-gray-300 hover:text-black px-1.5\"\n        @click=\"showSchema\"\n        ><i class=\"codicon codicon-json\" /> Show schema</button>\n      <button\n        class=\"hover:bg-gray-300 hover:text-black px-1.5\"\n        @click=\"exportDataJson\"\n        ><i class=\"codicon codicon-database\" /> Export data</button>\n      <!-- <button TODO\n        class=\"hover:bg-gray-300 hover:text-black px-1.5\"\n        >Export schema</button> -->\n      <!-- <button\n        class=\"hover:bg-gray-300 hover:text-black px-1.5\"\n        ><i class=\"codicon codicon-ellipsis\" /></button> -->\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, inject, triggerRef } from 'vue'\nimport { clearColumnSelection, getColumnSelections } from '../selection'\nimport { createHeaderFromSelected } from '../headers'\nimport FileSaver from 'file-saver'\nimport { Viewer, exportAllRows, saveHeaders, removeHeaders, importHeaders } from '../Viewer'\nimport { openTab } from '../../workbench/workbench-core'\nimport ShowSchema from './ShowSchema.vue'\n\nexport default defineComponent({\n  setup () {\n    const viewer = inject<Viewer>('viewer')!\n\n    const selections = computed(() =>\n      getColumnSelections(viewer.columnSelection.value)\n        .map(range => range.map(col => String(col)).join(' '))\n    )\n\n    function defineColumn () {\n      const { editHeader, columnSelection, headers } = viewer\n      editHeader.value = createHeaderFromSelected(columnSelection.value, headers.value)\n      clearColumnSelection(columnSelection.value)\n      triggerRef(headers)\n      triggerRef(columnSelection)\n      saveHeaders(viewer)\n    }\n\n    function exportDataJson () {\n      const data = exportAllRows(viewer.headers.value, viewer.datFile)\n      FileSaver.saveAs(new File(\n        [JSON.stringify(data, null, 2)],\n        `${viewer.name}.json`,\n        { type: 'application/json;charset=utf-8' }\n      ))\n    }\n\n    function showSchema () {\n      openTab({\n        id: 'poe-dat-viewer@show-schema',\n        title: 'Schema',\n        type: ShowSchema,\n        args: {\n          name: viewer.name,\n          headers: JSON.parse(JSON.stringify(viewer.headers.value))\n        }\n      })\n    }\n\n    async function restoreSchema () {\n      await removeHeaders(viewer)\n      await importHeaders(viewer)\n    }\n\n    return {\n      rowSorting: viewer.rowSorting,\n      selections,\n      defineColumn,\n      exportDataJson,\n      showSchema,\n      restoreSchema\n    }\n  }\n})\n</script>\n\n<style lang=\"postcss\" module>\n.bar {\n  display: flex;\n  justify-content: space-between;\n  line-height: 1;\n  @apply text-gray-200;\n  @apply p-2;\n  @apply bg-gray-800;\n  height: 35px;\n}\n</style>\n","<template>\n  <div class=\"p-4 overflow-auto border-l flex-1 text-base\">\n    <pre>{{ text }}</pre>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, computed } from 'vue'\nimport { Header } from '../headers'\n\nexport default defineComponent({\n  props: {\n    args: {\n      type: Object as PropType<{\n        name: string\n        headers: Header[]\n      }>,\n      required: true\n    }\n  },\n  setup (props) {\n    return {\n      text: computed(() => {\n        const { name, headers } = props.args\n        let fields = ''\n        for (const header of headers) {\n          if (header.name == null) break\n\n          let type = ''\n          if (header.type.boolean) {\n            type = 'bool'\n          } else if (header.type.string) {\n            type = 'string'\n          } else if (header.type.integer?.size === 1) {\n            type = header.type.integer.unsigned ? 'u8' : 'i8'\n          } else if (header.type.integer?.size === 2) {\n            type = header.type.integer.unsigned ? 'u16' : 'i16'\n          } else if (header.type.integer?.size === 4) {\n            type = header.type.integer.unsigned ? 'u32' : 'i32'\n          } else if (header.type.integer?.size === 8) {\n            type = header.type.integer.unsigned ? 'u64' : 'i64'\n          } else if (header.type.decimal?.size === 4) {\n            type = 'f32'\n          } else if (header.type.decimal?.size === 8) {\n            type = 'f64'\n          } else if (header.type.key) {\n            type = header.type.key.foreign ? 'rid' : name\n          }\n\n          if (header.type.array) {\n            fields += `  ${header.name || '_'}: [${type || '_'}]\\n`\n          } else if (type) {\n            fields += `  ${header.name || '_'}: ${type}\\n`\n          } else {\n            break\n          }\n        }\n        return `type ${name} {\\n${fields}}\\n`\n      })\n    }\n  }\n})\n</script>\n","\nimport { defineComponent, PropType, computed } from 'vue'\nimport { Header } from '../headers'\n\nexport default defineComponent({\n  props: {\n    args: {\n      type: Object as PropType<{\n        name: string\n        headers: Header[]\n      }>,\n      required: true\n    }\n  },\n  setup (props) {\n    return {\n      text: computed(() => {\n        const { name, headers } = props.args\n        let fields = ''\n        for (const header of headers) {\n          if (header.name == null) break\n\n          let type = ''\n          if (header.type.boolean) {\n            type = 'bool'\n          } else if (header.type.string) {\n            type = 'string'\n          } else if (header.type.integer?.size === 1) {\n            type = header.type.integer.unsigned ? 'u8' : 'i8'\n          } else if (header.type.integer?.size === 2) {\n            type = header.type.integer.unsigned ? 'u16' : 'i16'\n          } else if (header.type.integer?.size === 4) {\n            type = header.type.integer.unsigned ? 'u32' : 'i32'\n          } else if (header.type.integer?.size === 8) {\n            type = header.type.integer.unsigned ? 'u64' : 'i64'\n          } else if (header.type.decimal?.size === 4) {\n            type = 'f32'\n          } else if (header.type.decimal?.size === 8) {\n            type = 'f64'\n          } else if (header.type.key) {\n            type = header.type.key.foreign ? 'rid' : name\n          }\n\n          if (header.type.array) {\n            fields += `  ${header.name || '_'}: [${type || '_'}]\\n`\n          } else if (type) {\n            fields += `  ${header.name || '_'}: ${type}\\n`\n          } else {\n            break\n          }\n        }\n        return `type ${name} {\\n${fields}}\\n`\n      })\n    }\n  }\n})\n","import { render } from \"./ShowSchema.vue?vue&type=template&id=47305e69\"\nimport script from \"./ShowSchema.vue?vue&type=script&lang=ts\"\nexport * from \"./ShowSchema.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent, computed, inject, triggerRef } from 'vue'\nimport { clearColumnSelection, getColumnSelections } from '../selection'\nimport { createHeaderFromSelected } from '../headers'\nimport FileSaver from 'file-saver'\nimport { Viewer, exportAllRows, saveHeaders, removeHeaders, importHeaders } from '../Viewer'\nimport { openTab } from '../../workbench/workbench-core'\nimport ShowSchema from './ShowSchema.vue'\n\nexport default defineComponent({\n  setup () {\n    const viewer = inject<Viewer>('viewer')!\n\n    const selections = computed(() =>\n      getColumnSelections(viewer.columnSelection.value)\n        .map(range => range.map(col => String(col)).join(' '))\n    )\n\n    function defineColumn () {\n      const { editHeader, columnSelection, headers } = viewer\n      editHeader.value = createHeaderFromSelected(columnSelection.value, headers.value)\n      clearColumnSelection(columnSelection.value)\n      triggerRef(headers)\n      triggerRef(columnSelection)\n      saveHeaders(viewer)\n    }\n\n    function exportDataJson () {\n      const data = exportAllRows(viewer.headers.value, viewer.datFile)\n      FileSaver.saveAs(new File(\n        [JSON.stringify(data, null, 2)],\n        `${viewer.name}.json`,\n        { type: 'application/json;charset=utf-8' }\n      ))\n    }\n\n    function showSchema () {\n      openTab({\n        id: 'poe-dat-viewer@show-schema',\n        title: 'Schema',\n        type: ShowSchema,\n        args: {\n          name: viewer.name,\n          headers: JSON.parse(JSON.stringify(viewer.headers.value))\n        }\n      })\n    }\n\n    async function restoreSchema () {\n      await removeHeaders(viewer)\n      await importHeaders(viewer)\n    }\n\n    return {\n      rowSorting: viewer.rowSorting,\n      selections,\n      defineColumn,\n      exportDataJson,\n      showSchema,\n      restoreSchema\n    }\n  }\n})\n","// extracted by mini-css-extract-plugin\nexport default {\"bar\":\"Actions_bar_3KpDj\"};","import { render } from \"./Actions.vue?vue&type=template&id=50a3037e\"\nimport script from \"./Actions.vue?vue&type=script&lang=ts\"\nexport * from \"./Actions.vue?vue&type=script&lang=ts\"\n\nconst cssModules = script.__cssModules = {}\nimport style0 from \"./Actions.vue?vue&type=style&index=0&id=50a3037e&lang=postcss&module=true\"\ncssModules[\"$style\"] = style0\nscript.render = render\n\nexport default script","<template>\n  <div class=\"datv-header-layer\">\n    <div :style=\"headersRowStyle\" class=\"absolute\">\n      <button v-for=\"col in headers\" :key=\"col.offset\"\n        class=\"datv-header\" :class=\"{ 'datv-col--border': col.border, 'datv-header--active': col.active }\"\n        :style=\"{ width: col.widthPx + 'px', transform: `translate(${col.leftPx}px, 0)` }\"\n        :title=\"col.name\"\n        @click=\"editHeader(col.offset)\"\n        @wheel=\"handleHeaderWheel(col.offset, $event)\">\n        <template v-if=\"col.name === null\">&nbsp;</template>\n        <span v-else-if=\"col.name === ''\" class=\"bg-gray-500 text-gray-200 px-1\">?</span>\n        <template v-else>{{ col.name }}</template>\n      </button>\n    </div>\n    <div :style=\"colsRowStyle\" class=\"absolute\">\n      <button v-for=\"col in columns\" :key=\"col.offset\"\n        class=\"datv-byte\"\n        :class=\"{\n          'datv-col--border': col.border,\n          'datv-byte--selected': col.selected\n        }\"\n        :style=\"{ width: col.widthPx + 'px', transform: `translate(${col.leftPx}px, 0)` }\"\n        @mousedown=\"selectStart(col.offset)\"\n        @mouseenter=\"selectContinue(col.offset, $event)\"\n        :title=\"col.offset\"\n        v-text=\"col.text\"\n      />\n    </div>\n    <div :style=\"statsRowStyle\" class=\"absolute datv-stats_row\">\n      <div v-for=\"col in columns\" :key=\"col.offset\"\n        class=\"datv-stat\"\n        :class=\"{\n          'datv-col--border': col.border,\n          'datv-byte--selected': col.selected\n        }\"\n        :style=\"{ width: col.widthPx + 'px', transform: `translate(${col.leftPx}px, 0)` }\"\n      >\n        <template v-if=\"col.stat\">\n          <div v-if=\"col.stat.string\"\n            class=\"datv-stat__line bg-yellow-500\" style=\"top: 0;\" />\n          <div v-if=\"col.stat.array\"\n            class=\"datv-stat__line bg-green-500\" style=\"top: 7px;\" />\n          <div v-if=\"col.stat.zero\"\n            class=\"datv-stat__line bg-gray-800\" style=\"top: 14px;\" />\n          <div v-else-if=\"col.stat.nullable\"\n            class=\"datv-stat__line bg-pink-400\" style=\"top: 14px;\" />\n          <div class=\"datv-stat__max\" v-text=\"col.stat.max\" />\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { toggleColsBetween } from '../selection'\nimport { sortRows } from '../sorting'\nimport { defineComponent, inject, shallowRef, shallowReactive, watch, computed, triggerRef } from 'vue'\nimport { saveHeaders, Viewer } from '../Viewer'\nimport * as rendering from '../rendering'\nimport { Header } from '../headers'\nimport { renderHeaderCols } from '../rendering/header-columns'\n\nexport default defineComponent({\n  props: {\n    left: {\n      type: Number,\n      required: true\n    },\n    width: {\n      type: Number,\n      required: true\n    },\n    columns: {\n      type: Array,\n      required: true\n    }\n  },\n  setup (props) {\n    const sortOrder = shallowRef(0)\n    let selectionStart = -1\n    let colsBeforeSelection = [] as readonly boolean[]\n\n    const viewer = inject<Viewer>('viewer')!\n\n    function selectStart (offset: number) {\n      selectionStart = offset\n      colsBeforeSelection = [...viewer.columnSelection.value]\n      toggleColsBetween(viewer.columnSelection.value, selectionStart, selectionStart, viewer.headers.value)\n      triggerRef(viewer.columnSelection)\n\n      document.addEventListener('mouseup', cancelSelection)\n      document.addEventListener('mouseleave', cancelSelection)\n      function cancelSelection () {\n        selectionStart = -1\n        document.removeEventListener('mouseup', cancelSelection)\n        document.removeEventListener('mouseleave', cancelSelection)\n      }\n    }\n\n    function selectContinue (offset: number, e: MouseEvent) {\n      if (selectionStart === -1 || e.buttons !== 1) return\n\n      const { memsize } = viewer.datFile\n      const len = offset - selectionStart\n      if (len >= memsize) {\n        offset = (selectionStart + memsize * 2) - 1\n      } else if (len >= 4) {\n        offset = (selectionStart + 8) - 1\n      } else if (len >= 2) {\n        offset = (selectionStart + 4) - 1\n      }\n      if (len <= -memsize) {\n        offset = (selectionStart - memsize * 2) + 1\n      } else if (len <= -4) {\n        offset = (selectionStart - 8) + 1\n      } else if (len <= -2) {\n        offset = (selectionStart - 4) + 1\n      }\n\n      viewer.columnSelection.value = [...colsBeforeSelection]\n      toggleColsBetween(viewer.columnSelection.value, selectionStart, offset, viewer.headers.value)\n    }\n\n    function editHeader (offset: number) {\n      const header = viewer.headers.value.find(h => h.offset === offset)!\n      if (\n        viewer.editHeader.value === header &&\n        (!header.type.byteView || header.type.byteView.array)\n      ) {\n        if (sortOrder.value === 0) {\n          sortOrder.value = 1\n        } else if (sortOrder.value === 1) {\n          sortOrder.value = -1\n        } else if (sortOrder.value === -1) {\n          sortOrder.value = 1\n        }\n        viewer.rowSorting.value = sortRows(header, sortOrder.value as 1 | -1, viewer.datFile)\n      } else {\n        viewer.editHeader.value = header\n        sortOrder.value = 0\n      }\n    }\n\n    function handleHeaderWheel (offset: number, e: WheelEvent) {\n      e.preventDefault()\n      const header = viewer.headers.value.find(h => h.offset === offset)!\n      if (header.textLength != null) {\n        header.textLength = Math.max(1, header.textLength -\n          Math.sign(e.deltaY) * (e.ctrlKey ? 4 * 3 - 2 : 1))\n        triggerRef(viewer.headers)\n        saveHeaders(viewer)\n      }\n    }\n\n    const headers = computed(() =>\n      renderHeaderCols(\n        viewer.headers.value,\n        viewer.editHeader.value,\n        props.left, props.left + props.width))\n\n    return {\n      headers,\n      selectStart,\n      selectContinue,\n      editHeader,\n      handleHeaderWheel,\n      headersRowStyle: computed(() =>\n        ({ transform: `translate(${-props.left}px, 0)`, lineHeight: rendering.COLUMN_BYTE_HEIGHT + 'px', fontFamily: rendering.FONT_FAMILY, fontSize: rendering.FONT_SIZE + 'px' })),\n      colsRowStyle: computed(() =>\n        ({ transform: `translate(${-props.left}px, ${rendering.COLUMN_BYTE_HEIGHT}px)`, lineHeight: rendering.COLUMN_BYTE_HEIGHT + 'px', fontFamily: rendering.FONT_FAMILY, fontSize: rendering.FONT_SIZE + 'px' })),\n      statsRowStyle: computed(() =>\n        ({ transform: `translate(${-props.left}px, ${rendering.COLUMN_BYTE_HEIGHT * 2}px)`, fontFamily: rendering.FONT_FAMILY, fontSize: rendering.FONT_SIZE + 'px' }))\n    }\n  }\n})\n</script>\n\n<style lang=\"postcss\">\n.datv-col--border {\n  @apply border-l border-gray-400;\n}\n\n.datv-header {\n  @apply text-gray-600;\n  position: absolute;\n  box-sizing: border-box;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  @apply px-1.5;\n\n  &:hover {\n    @apply bg-gray-300;\n    @apply text-gray-700;\n  }\n\n  &.datv-header--active {\n    @apply bg-gray-500;\n    @apply text-gray-200;\n  }\n}\n\n.datv-byte {\n  @apply text-gray-600;\n  position: absolute;\n  box-sizing: content-box;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n\n  &:hover {\n    @apply bg-blue-400;\n    @apply text-white;\n  }\n\n  &.datv-byte--selected {\n    @apply bg-blue-500;\n    @apply text-blue-100;\n  }\n\n  &.datv-byte--selected.datv-col--border,\n  &.datv-byte--selected + &.datv-col--border {\n    @apply border-blue-600;\n  }\n}\n\n.datv-stat {\n  position: absolute;\n  box-sizing: content-box;\n  text-align: center;\n  white-space: nowrap;\n  line-height: 21px;\n  height: 21px;\n\n  &.datv-byte--selected.datv-col--border,\n  &.datv-byte--selected + &.datv-col--border {\n    @apply border-gray-400;\n  }\n\n  &.datv-byte--selected {\n    @apply bg-gray-300;\n  }\n\n  .datv-stats_row:hover > & {\n    @apply bg-gray-400;\n  }\n}\n\n.datv-stat__line {\n  position: absolute;\n  height: 7px;\n  width: 100%;\n\n  .datv-col--border > & {\n    width: calc(100% + 1px);\n    margin-left: -1px;\n  }\n\n  .datv-stats_row:hover & {\n    --tw-bg-opacity: 0.35;\n  }\n}\n\n.datv-stat__max {\n  visibility: hidden;\n  text-align: center;\n  cursor: default;\n  line-height: 21px;\n  width: 100%;\n  height: 21px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  @apply text-gray-50;\n  text-shadow: 0 0 0.5ch rgb(0 0 0 / 70%);\n\n  .datv-stats_row:hover & {\n    visibility: visible;\n  }\n}\n\n.datv-header-layer {\n  position: absolute;\n  overflow: hidden;\n  transform: translate3d(0, 0, 0);\n  contain: strict;\n  @apply bg-gray-100;\n}\n</style>\n","import { readColumn, DatFile, Header } from 'pathofexile-dat'\n\nexport function sortRows (header: Header, order: 1 | -1, datFile: DatFile): number[] {\n  const data = readColumn(header, datFile)\n\n  const rows = Array.from({ length: datFile.rowCount }, (_, idx) => idx)\n  if (header.type.array) {\n    rows.sort((ai, bi) => {\n      const a = data[ai] as unknown[]\n      const b = data[bi] as unknown[]\n      return (b.length - a.length) * order\n    })\n  } else {\n    if (header.type.boolean) {\n      rows.sort((ai, bi) => {\n        const a = Number(data[ai] as boolean)\n        const b = Number(data[bi] as boolean)\n        return (a - b) * order\n      })\n    } else if (header.type.string) {\n      rows.sort((ai, bi) => {\n        const a = data[ai] as string\n        const b = data[bi] as string\n        return a.localeCompare(b) * order\n      })\n    } else if (header.type.integer || header.type.decimal) {\n      rows.sort((ai, bi) => {\n        const a = data[ai] as number\n        const b = data[bi] as number\n        return (b - a) * order\n      })\n    } else if (header.type.key) {\n      if (header.type.key.foreign) {\n        rows.sort((ai, bi) => {\n          const a = data[ai] as { rid: number, unknown: number } | null\n          const b = data[bi] as { rid: number, unknown: number } | null\n          return ((b?.rid || 0) - (a?.rid || 0)) * order\n        })\n      } else {\n        rows.sort((ai, bi) => {\n          const a = Number(data[ai] as number | null)\n          const b = Number(data[bi] as number | null)\n          return (b - a) * order\n        })\n      }\n    }\n  }\n\n  return rows\n}\n","import { CHAR_WIDTH, LINE_HEIGHT } from '../rendering'\nimport { getFieldReader } from 'pathofexile-dat/dat/reader'\nimport type { DatFile } from 'pathofexile-dat'\nimport type { ColumnStats } from 'pathofexile-dat/dat-analysis'\nimport type { Header } from '../headers'\n\ninterface StringifyOut {\n  text: string\n  color: string\n}\n\nfunction numberToString (value: number, out: StringifyOut) {\n  out.text = String(value)\n  out.color = '#098658'\n}\nfunction numberArrayToString (value: number[], out: StringifyOut) {\n  out.text = `[${value.join(', ')}]`\n  out.color = '#098658'\n}\nfunction booleanToString (value: boolean, out: StringifyOut) {\n  out.text = String(value)\n  out.color = '#0000ff'\n}\nfunction booleanArrayToString (value: boolean[], out: StringifyOut) {\n  out.text = `[${value.join(', ')}]`\n  out.color = '#0000ff'\n}\nfunction stringToString (value: string, out: StringifyOut) {\n  if (value === '') {\n    out.text = 'null'\n    out.color = '#0000ff'\n  } else {\n    out.text = String(value)\n    out.color = '#001080'\n  }\n}\nfunction stringArrayToString (value: string[], out: StringifyOut) {\n  out.text = `[${value.map(str => '\"' + str + '\"').join(', ')}]`\n  out.color = '#001080'\n}\nfunction keySelfToString (value: number | null, out: StringifyOut) {\n  if (value === null) {\n    out.text = 'null'\n    out.color = '#0000ff'\n  } else {\n    out.text = `<${value}, self>`\n    out.color = '#098658'\n  }\n}\nfunction keySelfArrayToString (value: number[], out: StringifyOut) {\n  out.text = `[${value.map(key => `<${key}, self>`).join(', ')}]`\n  out.color = '#098658'\n}\nfunction keyForeignToString (value: { rid: number, unknown: number } | null, out: StringifyOut) {\n  if (value === null) {\n    out.text = 'null'\n    out.color = '#0000ff'\n  } else {\n    out.text = `<${value.rid}, ${value.unknown}>`\n    out.color = '#098658'\n  }\n}\nfunction keyForeignArrayToString (value: { rid: number, unknown: number }[], out: StringifyOut) {\n  out.text = `[${value.map(key => `<${key.rid}, ${key.unknown}>`).join(', ')}]`\n  out.color = '#098658'\n}\n\nexport function renderCellContent (ctx: CanvasRenderingContext2D, header: Header, datFile: DatFile, rows: number[]) {\n  const read = getFieldReader(header, datFile)\n\n  const draw: StringifyOut = { text: '', color: '' }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const stringify: (value: any, out: StringifyOut) => void = (() => {\n    if (header.type.array) {\n      if (header.type.boolean) return booleanArrayToString\n      if (header.type.string) return stringArrayToString\n      if (header.type.integer || header.type.decimal) return numberArrayToString\n      if (header.type.key && header.type.key.foreign) return keyForeignArrayToString\n      if (header.type.key && !header.type.key.foreign) return keySelfArrayToString\n    } else {\n      if (header.type.boolean) return booleanToString\n      if (header.type.string) return stringToString\n      if (header.type.integer || header.type.decimal) return numberToString\n      if (header.type.key && header.type.key.foreign) return keyForeignToString\n      if (header.type.key && !header.type.key.foreign) return keySelfToString\n    }\n    throw new Error('never')\n  })()\n\n  let textY = 0\n  let prevColor = ''\n  for (const rid of rows) {\n    stringify(read(rid), draw)\n    if (prevColor !== draw.color) {\n      ctx.fillStyle = draw.color\n      prevColor = draw.color\n    }\n    ctx.fillText(draw.text, 0, textY)\n    textY += LINE_HEIGHT\n  }\n}\n\nexport function drawByteView (ctx: CanvasRenderingContext2D, header: Header, datFile: DatFile, rows: number[], begin: number, end: number) {\n  ctx.fillStyle = '#000'\n\n  let textY = 0\n  for (const rowIdx of rows) {\n    const data = datFile.dataFixed.subarray(\n      (rowIdx * datFile.rowLength) + header.offset + begin,\n      (rowIdx * datFile.rowLength) + header.offset + end\n    )\n    const hexDump = Array.from(data, byte =>\n      byte.toString(16).padStart(2, '0')\n    ).join(' ')\n\n    ctx.fillText(hexDump, begin * (CHAR_WIDTH * 3), textY)\n    textY += LINE_HEIGHT\n  }\n}\n\nexport function drawArrayVarData (ctx: CanvasRenderingContext2D, header: Header, datFile: DatFile, rows: number[], stats: ColumnStats) {\n  ctx.fillStyle = '#000'\n\n  const stat = stats.refArray as Exclude<typeof stats['refArray'], false>\n  const entryMaxLength = Math.max(...([\n    (stat.keyForeign ? datFile.fieldSize.KEY_FOREIGN : 0),\n    (stat.keySelf ? datFile.fieldSize.KEY : 0),\n    (stat.string ? datFile.fieldSize.STRING : 0),\n    (stat.longLong ? datFile.fieldSize.LONGLONG : 0),\n    (stat.long ? datFile.fieldSize.LONG : 0),\n    (stat.short ? datFile.fieldSize.SHORT : 0),\n    (datFile.fieldSize.BYTE)\n  ]))\n  const maxReadBytes = Math.ceil(header.textLength! / 3)\n\n  let textY = 0\n  for (const rowIdx of rows) {\n    const arrayLength = datFile.readerFixed.getSizeT((rowIdx * datFile.rowLength) + header.offset)\n    if (arrayLength === 0) {\n      ctx.fillText('[]', 0, textY)\n    } else {\n      const varOffset = datFile.readerFixed.getSizeT((rowIdx * datFile.rowLength) + header.offset + datFile.memsize)\n\n      const data = datFile.dataVariable.subarray(\n        varOffset,\n        varOffset + Math.min(entryMaxLength * arrayLength, maxReadBytes)\n      )\n      const hexDump = Array.from(data, byte =>\n        byte.toString(16).padStart(2, '0')\n      ).join(' ')\n\n      ctx.fillText(`${arrayLength} { ${hexDump} }`, 0, textY)\n    }\n    textY += LINE_HEIGHT\n  }\n}\n","import type { Header } from './headers'\nimport type { RenderByte } from './rendering/byte-columns'\nimport type { Viewer } from './Viewer'\nimport { renderCellContent, drawByteView, drawArrayVarData } from './rendering/content'\n\n/* eslint-disable */\nexport const FONT_FAMILY    = 'Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace'\nexport const FONT_SIZE      = 14\nexport const CHAR_WIDTH     = getMonoFontWidth(FONT_SIZE, FONT_FAMILY)\nexport const XBASE_HEIGHT   = getFontBaseLine(FONT_SIZE, FONT_FAMILY)\nexport const LINE_HEIGHT    = 19\nexport const ROWNUM_MIN_LENGTH    = 3\nexport const BORDER_WIDTH         = 1\nexport const COLUMN_STAT_HEIGHT   = 7\nexport const COLUMN_BYTE_HEIGHT   = Math.round(CHAR_WIDTH * 3)\nexport const HEADERS_HEIGHT       = COLUMN_BYTE_HEIGHT * 2 + COLUMN_STAT_HEIGHT * 3\n/* eslint-enable */\n\n// console.log(getBaseLine(14), 'CR: 11  |  FF: 12')\n// console.log(getBaseLine(18), 'CR: 13  |  FF: 14')\n// console.log(getBaseLine(19), 'CR: 14  |  FF: 14')\n// console.log(getBaseLine(20), 'CR: 14  |  FF: 15')\n\nexport function rowNumLength (rowCount: number) {\n  const maxLen = String(rowCount - 1).length\n  return Math.max(maxLen, ROWNUM_MIN_LENGTH)\n}\n\nexport function rowsNumWidth (rowCount: number) {\n  return Math.ceil(rowNumLength(rowCount) * CHAR_WIDTH)\n}\n\nexport function rowsOverlayWidth (rowCount: number) {\n  return rowsNumWidth(rowCount) + (8 * 2)\n}\n\nfunction getMonoFontWidth (fontSize: number, fontFamily: string): number {\n  const canvasEl = document.createElement('canvas')\n  const context = canvasEl.getContext('2d')!\n  context.font = `${fontSize}px ${fontFamily}`\n  const metrics = context.measureText('0')\n  return metrics.width\n}\n\nfunction getFontBaseLine (fontSize: number, fontFamily: string): number {\n  const canvasEl = document.createElement('canvas')\n  const context = canvasEl.getContext('2d')!\n  context.font = `${fontSize}px ${fontFamily}`\n  context.textBaseline = 'middle'\n  const metrics = context.measureText('0')\n  const xBase = (fontSize / 2) +\n    ((metrics.alphabeticBaseline !== undefined)\n      ? -metrics.alphabeticBaseline\n      : metrics.actualBoundingBoxDescent)\n\n  return xBase\n}\n\nexport function getBaseLine (lineHeight: number): number {\n  return /* Math.round */ (1 + (lineHeight - FONT_SIZE) / 2 + XBASE_HEIGHT)\n}\n\nexport function drawRows (params: {\n  left: number\n  paintWidth: number\n  top: number\n  rows: number[]\n  columns: RenderByte[]\n  viewer: Viewer\n  ctx: CanvasRenderingContext2D\n}) {\n  const { ctx } = params\n\n  ctx.fillStyle = '#fff'\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n\n  // draw selected row\n  if (params.viewer.selectedRow.value !== null) {\n    const selectedIdx = params.rows.indexOf(params.viewer.selectedRow.value)\n    if (selectedIdx !== -1) {\n      ctx.fillStyle = '#bee3f8'\n      ctx.fillRect(\n        0, params.top + (selectedIdx * LINE_HEIGHT),\n        ctx.canvas.width, LINE_HEIGHT\n      )\n    }\n  }\n\n  // drawColumns\n  ctx.save()\n  ctx.translate(-params.left, 0)\n  drawColumns(ctx, params.columns)\n  ctx.restore()\n\n  // draw content\n  ctx.font = `${FONT_SIZE}px ${FONT_FAMILY}`\n  ctx.fillStyle = '#000'\n\n  const renderers = getColumnRenderers(params.viewer, params.left, params.left + params.paintWidth)\n\n  for (const render of renderers) {\n    ctx.save()\n    ctx.beginPath()\n    ctx.translate(render.left - params.left, 0)\n    ctx.rect(0, 0, render.width, ctx.canvas.height)\n    ctx.clip()\n    ctx.translate(CHAR_WIDTH / 2, params.top + getBaseLine(LINE_HEIGHT))\n    render.exec(ctx, params.rows)\n    ctx.restore()\n  }\n\n  // draw inset shadow\n  {\n    const grdH = ctx.createLinearGradient(0, -16, 0, 4)\n    grdH.addColorStop(0, 'rgba(254,254,254,0.6)')\n    grdH.addColorStop(1, 'transparent')\n    ctx.fillStyle = grdH\n    ctx.fillRect(0, 0, ctx.canvas.width, 6)\n\n    const grdV = ctx.createLinearGradient(-16, 0, 4, 0)\n    grdV.addColorStop(0, 'rgba(254,254,254,0.5)')\n    grdV.addColorStop(1, 'transparent')\n    ctx.fillStyle = grdV\n    ctx.fillRect(0, 0, 6, ctx.canvas.height)\n  }\n}\n\nfunction drawColumns (ctx: CanvasRenderingContext2D, columns: readonly RenderByte[]) {\n  for (const col of columns) {\n    if (col.selected) {\n      ctx.fillStyle = '#bee3f8'\n      ctx.fillRect(\n        col.leftPx + (col.border ? BORDER_WIDTH : 0), 0,\n        col.widthPx, ctx.canvas.height\n      )\n    }\n    if (col.border) {\n      ctx.fillStyle = '#bdbdbd'\n      ctx.fillRect(\n        col.leftPx, 0,\n        BORDER_WIDTH, ctx.canvas.height\n      )\n    }\n  }\n}\n\ntype DrawColumnContentFn = (ctx: CanvasRenderingContext2D, rows: number[]) => void\ninterface ColumnContentRenderer {\n  left: number\n  width: number\n  exec: DrawColumnContentFn\n}\n\nexport function getColumnRenderers (viewer: Viewer, paintBegin: number, paintEnd: number): ColumnContentRenderer[] {\n  const headers = viewer.headers.value\n  const stats = viewer.columnStats.value\n  const datFile = viewer.datFile\n\n  const res: ColumnContentRenderer[] = []\n  let left = 0\n  for (const header of headers) {\n    const sizes = columnSizes(header)\n\n    if ((left + sizes.borderWidth) >= paintBegin) {\n      if (header.type.byteView) {\n        if (header.type.byteView.array) {\n          res.push({\n            left: left + (sizes.borderWidth ? BORDER_WIDTH : 0),\n            width: sizes.paddingWidth,\n            exec: (ctx: CanvasRenderingContext2D, rows: number[]) =>\n              drawArrayVarData(ctx, header, datFile, rows, stats[header.offset])\n          })\n        } else {\n          const hexBegin = Math.max(0, Math.floor((paintBegin - left) / (CHAR_WIDTH * 3)))\n          const hexEnd = Math.min(header.length, Math.ceil((paintEnd - left) / (CHAR_WIDTH * 3)))\n          res.push({\n            left: left + (sizes.borderWidth ? BORDER_WIDTH : 0),\n            width: sizes.paddingWidth,\n            exec: (ctx: CanvasRenderingContext2D, rows: number[]) =>\n              drawByteView(ctx, header, datFile, rows, hexBegin, hexEnd)\n          })\n        }\n      } else {\n        res.push({\n          left: left + (sizes.borderWidth ? BORDER_WIDTH : 0),\n          width: sizes.paddingWidth,\n          exec: (ctx: CanvasRenderingContext2D, rows: number[]) =>\n            renderCellContent(ctx, header, datFile, rows)\n        })\n      }\n    }\n\n    left += sizes.borderWidth\n    if (left >= paintEnd) return res\n  }\n\n  return res\n}\n\nexport function columnSizes (header: Readonly<Header>) {\n  const textLength = (header.type.byteView && !header.type.byteView.array)\n    ? header.length * 3 - 1\n    : header.textLength!\n  return {\n    paddingWidth: Math.ceil((textLength + 1) * CHAR_WIDTH),\n    borderWidth: Math.ceil((textLength + 1) * CHAR_WIDTH) + (header.offset > 0 ? BORDER_WIDTH : 0),\n    hasBorder: header.offset > 0\n  }\n}\n\nexport function getRowWidth (headers: readonly Header[]): number {\n  let size = 0\n  for (const header of headers) {\n    const sizes = columnSizes(header)\n    size += sizes.borderWidth\n  }\n  return size\n}\n","import type { Header } from '../headers'\nimport { columnSizes } from '../rendering'\n\ninterface RenderHeader {\n  offset: number\n  border: boolean\n  active: boolean\n  widthPx: number\n  leftPx: number\n  name: string | null\n}\n\nexport function renderHeaderCols (\n  headers: readonly Header[],\n  activeHeader: Header | null,\n  paintBegin: number,\n  paintEnd: number\n) {\n  const res: RenderHeader[] = []\n\n  let left = 0\n  for (const header of headers) {\n    const sizes = columnSizes(header)\n\n    if ((left + sizes.borderWidth) >= paintBegin) {\n      res.push({\n        offset: header.offset,\n        border: sizes.hasBorder,\n        active: (header === activeHeader),\n        widthPx: sizes.borderWidth,\n        leftPx: left,\n        name: header.name\n      })\n    }\n\n    left += sizes.borderWidth\n    if (left >= paintEnd) return res\n  }\n\n  return res\n}\n","\nimport { toggleColsBetween } from '../selection'\nimport { sortRows } from '../sorting'\nimport { defineComponent, inject, shallowRef, shallowReactive, watch, computed, triggerRef } from 'vue'\nimport { saveHeaders, Viewer } from '../Viewer'\nimport * as rendering from '../rendering'\nimport { Header } from '../headers'\nimport { renderHeaderCols } from '../rendering/header-columns'\n\nexport default defineComponent({\n  props: {\n    left: {\n      type: Number,\n      required: true\n    },\n    width: {\n      type: Number,\n      required: true\n    },\n    columns: {\n      type: Array,\n      required: true\n    }\n  },\n  setup (props) {\n    const sortOrder = shallowRef(0)\n    let selectionStart = -1\n    let colsBeforeSelection = [] as readonly boolean[]\n\n    const viewer = inject<Viewer>('viewer')!\n\n    function selectStart (offset: number) {\n      selectionStart = offset\n      colsBeforeSelection = [...viewer.columnSelection.value]\n      toggleColsBetween(viewer.columnSelection.value, selectionStart, selectionStart, viewer.headers.value)\n      triggerRef(viewer.columnSelection)\n\n      document.addEventListener('mouseup', cancelSelection)\n      document.addEventListener('mouseleave', cancelSelection)\n      function cancelSelection () {\n        selectionStart = -1\n        document.removeEventListener('mouseup', cancelSelection)\n        document.removeEventListener('mouseleave', cancelSelection)\n      }\n    }\n\n    function selectContinue (offset: number, e: MouseEvent) {\n      if (selectionStart === -1 || e.buttons !== 1) return\n\n      const { memsize } = viewer.datFile\n      const len = offset - selectionStart\n      if (len >= memsize) {\n        offset = (selectionStart + memsize * 2) - 1\n      } else if (len >= 4) {\n        offset = (selectionStart + 8) - 1\n      } else if (len >= 2) {\n        offset = (selectionStart + 4) - 1\n      }\n      if (len <= -memsize) {\n        offset = (selectionStart - memsize * 2) + 1\n      } else if (len <= -4) {\n        offset = (selectionStart - 8) + 1\n      } else if (len <= -2) {\n        offset = (selectionStart - 4) + 1\n      }\n\n      viewer.columnSelection.value = [...colsBeforeSelection]\n      toggleColsBetween(viewer.columnSelection.value, selectionStart, offset, viewer.headers.value)\n    }\n\n    function editHeader (offset: number) {\n      const header = viewer.headers.value.find(h => h.offset === offset)!\n      if (\n        viewer.editHeader.value === header &&\n        (!header.type.byteView || header.type.byteView.array)\n      ) {\n        if (sortOrder.value === 0) {\n          sortOrder.value = 1\n        } else if (sortOrder.value === 1) {\n          sortOrder.value = -1\n        } else if (sortOrder.value === -1) {\n          sortOrder.value = 1\n        }\n        viewer.rowSorting.value = sortRows(header, sortOrder.value as 1 | -1, viewer.datFile)\n      } else {\n        viewer.editHeader.value = header\n        sortOrder.value = 0\n      }\n    }\n\n    function handleHeaderWheel (offset: number, e: WheelEvent) {\n      e.preventDefault()\n      const header = viewer.headers.value.find(h => h.offset === offset)!\n      if (header.textLength != null) {\n        header.textLength = Math.max(1, header.textLength -\n          Math.sign(e.deltaY) * (e.ctrlKey ? 4 * 3 - 2 : 1))\n        triggerRef(viewer.headers)\n        saveHeaders(viewer)\n      }\n    }\n\n    const headers = computed(() =>\n      renderHeaderCols(\n        viewer.headers.value,\n        viewer.editHeader.value,\n        props.left, props.left + props.width))\n\n    return {\n      headers,\n      selectStart,\n      selectContinue,\n      editHeader,\n      handleHeaderWheel,\n      headersRowStyle: computed(() =>\n        ({ transform: `translate(${-props.left}px, 0)`, lineHeight: rendering.COLUMN_BYTE_HEIGHT + 'px', fontFamily: rendering.FONT_FAMILY, fontSize: rendering.FONT_SIZE + 'px' })),\n      colsRowStyle: computed(() =>\n        ({ transform: `translate(${-props.left}px, ${rendering.COLUMN_BYTE_HEIGHT}px)`, lineHeight: rendering.COLUMN_BYTE_HEIGHT + 'px', fontFamily: rendering.FONT_FAMILY, fontSize: rendering.FONT_SIZE + 'px' })),\n      statsRowStyle: computed(() =>\n        ({ transform: `translate(${-props.left}px, ${rendering.COLUMN_BYTE_HEIGHT * 2}px)`, fontFamily: rendering.FONT_FAMILY, fontSize: rendering.FONT_SIZE + 'px' }))\n    }\n  }\n})\n","import { render } from \"./ViewerHead.vue?vue&type=template&id=19576deb\"\nimport script from \"./ViewerHead.vue?vue&type=script&lang=ts\"\nexport * from \"./ViewerHead.vue?vue&type=script&lang=ts\"\n\nimport \"./ViewerHead.vue?vue&type=style&index=0&id=19576deb&lang=postcss\"\nscript.render = render\n\nexport default script","<template>\n  <div v-if=\"isVisible\" style=\"width: 300px;\" class=\"relative overflow-hidden\">\n    <div :style=\"{ height: HEADERS_HEIGHT + 'px' }\" class=\"bg-gray-100\" />\n    <div class=\"m-2 shadow border border-gray-300 bg-white absolute inset-0 flex flex-col\">\n      <div class=\"p-2 bg-gray-100 text-gray-600 shadow flex items-baseline\">\n        <span class=\"px-2\">Column properties</span>\n        <button class=\"border border-gray-400 rounded-full px-3\"\n          @click=\"$emit('focus-editing-header')\">Focus</button>\n        <button @click=\"close\" class=\"px-2 py-1 ml-auto\"\n          title=\"Close\"><i class=\"codicon codicon-close\"></i></button>\n      </div>\n      <div v-if=\"header.name === null\" class=\"p-4\">\n        <div>{{ header.length }} bytes of unidentified data</div>\n      </div>\n      <div v-else class=\"p-4 overflow-auto\">\n        <div class=\"mb-4\">\n          <label for=\"datv-header-name\">Name</label>\n          <input id=\"datv-header-name\" placeholder=\"Unnamed\" v-model.trim=\"header.name\"\n            class=\"border p-1 mt-1 w-full focus:border-blue-500\" spellcheck=\"false\">\n        </div>\n        <div class=\"mb-4 flex items-baseline\">\n          <div class=\"mr-2\">View mode</div>\n          <div class=\"space-x-px flex\">\n            <button v-for=\"opt in viewModeOpts\" :key=\"opt.value\"\n              class=\"px-2\"\n              :class=\"(byteViewMode === opt.value) ? 'bg-blue-600 text-white' : 'bg-gray-100 hover:bg-gray-300'\"\n              @click=\"byteViewMode = opt.value\"\n              :disabled=\"opt.disabled\"\n              v-text=\"opt.label\" />\n          </div>\n        </div>\n        <div class=\"mb-4\">\n          <div class=\"mb-2 flex justify-between items-baseline\">\n            <span>Data type</span>\n            <button class=\"text-red-700 bg-red-100 px-2\"\n             @click=\"remove\">Delete</button>\n          </div>\n          <div>\n            <div v-for=\"opt in dataTypeOpts\" :key=\"opt.value\" class=\"mb-0.5\">\n              <label class=\"inline-flex items-center\">\n                <input type=\"radio\" v-model=\"dataType\" :value=\"opt.value\">\n                <span class=\"ml-2 cursor-pointer\">{{ opt.label }}</span>\n              </label>\n            </div>\n            <div v-if=\"arrayTypeOpts.length\" class=\"mt-3\">\n              <div class=\"mb-1\">of ...</div>\n              <div v-for=\"opt in arrayTypeOpts\" :key=\"opt.value\" class=\"mb-0.5\">\n                <label class=\"inline-flex items-center\">\n                  <input type=\"radio\" v-model=\"arrayType\" :value=\"opt.value\">\n                  <span class=\"ml-2 cursor-pointer\">{{ opt.label }}</span>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"mb-4\" v-if=\"header.type.integer\">\n          <label class=\"inline-flex items-center\">\n            <input type=\"checkbox\" v-model=\"header.type.integer.unsigned\">\n            <span class=\"ml-2 cursor-pointer\">Unsigned</span>\n          </label>\n        </div>\n        <div class=\"mb-4 border-t pt-4\" v-if=\"dataType\">\n          <label class=\"mr-4\">Width</label>\n          <input v-model.number=\"header.textLength\"\n            class=\"border w-16 text-center\"> chars\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, computed, triggerRef, reactive, watch, WatchStopHandle } from 'vue'\nimport { Header, removeHeader } from '../headers'\nimport { Viewer, saveHeaders } from '../Viewer'\nimport type { DatFile } from 'pathofexile-dat'\nimport type { ColumnStats } from 'pathofexile-dat/dat-analysis'\nimport { HEADERS_HEIGHT } from '../rendering'\n\nfunction dataTypeOpts (header: Header, stats: ColumnStats, datFile: DatFile) {\n  const opts = [] as Array<{ label: string, value: string }>\n\n  const { fieldSize } = datFile\n  const len = header.length\n  if (len === fieldSize.ARRAY && stats.refArray) {\n    opts.push({ label: 'Array', value: 'array' })\n  }\n  if (len === fieldSize.STRING && stats.refString) {\n    opts.push({ label: 'String', value: 'string' })\n  }\n  if (len === fieldSize.KEY && stats.keySelf) {\n    opts.push({ label: 'Key (self)', value: 'key_self' })\n  }\n  if (len === fieldSize.KEY_FOREIGN) {\n    opts.push({ label: 'Key (foreign)', value: 'key_foreign' })\n  }\n  if (len === 8 || len === 4 || len === 2 || len === 1) {\n    opts.push({ label: 'Integer', value: 'integer' })\n  }\n  if (len === 8 || len === 4) {\n    opts.push({ label: 'Decimal', value: 'decimal' })\n  }\n  if (len === 1 && stats.bMax <= 0x01) {\n    opts.push({ label: 'Boolean', value: 'boolean' })\n  }\n\n  return opts\n}\n\nfunction arrayTypeOpts (header: Header, stats: ColumnStats) {\n  const opts = [] as Array<{ label: string, value: string }>\n\n  if (!header.type.array || !stats.refArray) {\n    return opts\n  }\n\n  const array = stats.refArray\n  if (array.string) {\n    opts.push({ label: 'String', value: 'string' })\n  }\n  if (array.keySelf) {\n    opts.push({ label: 'Key (self)', value: 'key_self' })\n  }\n  if (array.keyForeign) {\n    opts.push({ label: 'Key (foreign)', value: 'key_foreign' })\n  }\n  if (array.longLong) {\n    opts.push({ label: 'Integer - 8 bytes', value: 'integer_8' })\n  }\n  if (array.long) {\n    opts.push({ label: 'Integer - 4 bytes', value: 'integer_4' })\n  }\n  if (array.short) {\n    opts.push({ label: 'Integer - 2 bytes', value: 'integer_2' })\n  }\n  if (array.longLong) {\n    opts.push({ label: 'Decimal - 8 bytes', value: 'decimal_8' })\n  }\n  if (array.long) {\n    opts.push({ label: 'Decimal - 4 bytes', value: 'decimal_4' })\n  }\n  if (array.boolean) {\n    opts.push({ label: 'Boolean', value: 'boolean' })\n  }\n  opts.push({ label: 'Integer - byte', value: 'integer_1' })\n\n  return opts\n}\n\nexport default defineComponent({\n  setup () {\n    const viewer = inject<Viewer>('viewer')!\n\n    const headerRef = computed(() => (viewer.editHeader.value && reactive(viewer.editHeader.value))!)\n    {\n      let watchStop = null as WatchStopHandle | null\n      watch(headerRef, (value) => {\n        if (watchStop) {\n          watchStop()\n          watchStop = null\n        }\n        if (value) {\n          watchStop = watch(value, () => {\n            triggerRef(viewer.headers)\n            saveHeaders(viewer)\n          }, { deep: true })\n        }\n      })\n    }\n\n    const stats = computed(() => viewer.columnStats.value[headerRef.value.offset])\n\n    const dataType = computed({\n      get () {\n        const type = headerRef.value.type\n        if (type.array) {\n          return 'array'\n        } else if (type.string) {\n          return 'string'\n        } else if (type.key) {\n          return type.key.foreign ? 'key_foreign' : 'key_self'\n        } else if (type.integer) {\n          return 'integer'\n        } else if (type.decimal) {\n          return 'decimal'\n        } else if (type.boolean) {\n          return 'boolean'\n        } else {\n          return undefined\n        }\n      },\n      set (type) {\n        const header = headerRef.value\n        header.type = {}\n        if (type === 'array') {\n          header.type.array = true\n          header.type.byteView = { array: true }\n        } else if (type === 'string') {\n          header.type.string = {}\n        } else if (type === 'key_foreign') {\n          header.type.key = { foreign: true }\n        } else if (type === 'key_self') {\n          header.type.key = { foreign: false }\n        } else if (type === 'integer') {\n          header.type.integer = { unsigned: false, size: header.length }\n        } else if (type === 'decimal') {\n          header.type.decimal = { size: header.length }\n        } else if (type === 'boolean') {\n          header.type.boolean = {}\n        }\n      }\n    })\n\n    const arrayType = computed({\n      get () {\n        const type = headerRef.value.type\n        if (type.string) {\n          return 'string'\n        } else if (type.key) {\n          return (type.key.foreign) ? 'key_foreign' : 'key_self'\n        } else if (type.integer) {\n          return `integer_${type.integer.size}`\n        } else if (type.decimal) {\n          return `decimal_${type.decimal.size}`\n        } else if (type.boolean) {\n          return 'boolean'\n        } else {\n          return undefined\n        }\n      },\n      set (type) {\n        const header = headerRef.value\n        header.type = { array: true }\n        if (type === 'string') {\n          header.type.string = {}\n        } else if (type === 'key_foreign') {\n          header.type.key = { foreign: true }\n        } else if (type === 'key_self') {\n          header.type.key = { foreign: false }\n        } else if (type === 'integer_1') {\n          header.type.integer = { unsigned: false, size: 1 }\n        } else if (type === 'integer_2') {\n          header.type.integer = { unsigned: false, size: 2 }\n        } else if (type === 'integer_4') {\n          header.type.integer = { unsigned: false, size: 4 }\n        } else if (type === 'integer_8') {\n          header.type.integer = { unsigned: false, size: 8 }\n        } else if (type === 'decimal_4') {\n          header.type.decimal = { size: 4 }\n        } else if (type === 'decimal_8') {\n          header.type.decimal = { size: 8 }\n        } else if (type === 'boolean') {\n          header.type.boolean = {}\n        }\n      }\n    })\n\n    const viewModeOpts = computed(() => {\n      const opts = [] as Array<{ label: string, value: string, disabled?: boolean }>\n      const type = headerRef.value.type\n\n      opts.push({ label: 'Bytes', value: 'bytes' })\n      if (type.array) {\n        opts.push({ label: 'Var. bytes', value: 'array-bytes' })\n      }\n      opts.push({ label: 'Data', value: 'data', disabled: !dataType.value || (dataType.value === 'array' && !arrayType.value) })\n\n      return opts\n    })\n\n    const byteViewMode = computed({\n      get () {\n        const type = headerRef.value.type\n        if (type.byteView) {\n          return type.byteView.array ? 'array-bytes' : 'bytes'\n        } else {\n          return 'data'\n        }\n      },\n      set (mode) {\n        const type = headerRef.value.type\n        if (mode === 'data') {\n          type.byteView = undefined\n        } else {\n          type.byteView = {\n            array: mode === 'array-bytes'\n          }\n        }\n      }\n    })\n\n    function close () {\n      viewer.editHeader.value = null\n    }\n\n    function remove () {\n      removeHeader(headerRef.value, viewer.headers.value)\n      viewer.editHeader.value = null\n      triggerRef(viewer.headers)\n      saveHeaders(viewer)\n    }\n\n    return {\n      isVisible: computed(() => viewer.editHeader.value != null),\n      HEADERS_HEIGHT,\n      header: headerRef,\n      byteViewMode,\n      dataType,\n      arrayType,\n      close,\n      remove,\n      viewModeOpts,\n      dataTypeOpts: computed(() =>\n        dataTypeOpts(headerRef.value, stats.value, viewer.datFile)),\n      arrayTypeOpts: computed(() =>\n        arrayTypeOpts(headerRef.value, stats.value))\n    }\n  }\n})\n</script>\n","\nimport { defineComponent, inject, computed, triggerRef, reactive, watch, WatchStopHandle } from 'vue'\nimport { Header, removeHeader } from '../headers'\nimport { Viewer, saveHeaders } from '../Viewer'\nimport type { DatFile } from 'pathofexile-dat'\nimport type { ColumnStats } from 'pathofexile-dat/dat-analysis'\nimport { HEADERS_HEIGHT } from '../rendering'\n\nfunction dataTypeOpts (header: Header, stats: ColumnStats, datFile: DatFile) {\n  const opts = [] as Array<{ label: string, value: string }>\n\n  const { fieldSize } = datFile\n  const len = header.length\n  if (len === fieldSize.ARRAY && stats.refArray) {\n    opts.push({ label: 'Array', value: 'array' })\n  }\n  if (len === fieldSize.STRING && stats.refString) {\n    opts.push({ label: 'String', value: 'string' })\n  }\n  if (len === fieldSize.KEY && stats.keySelf) {\n    opts.push({ label: 'Key (self)', value: 'key_self' })\n  }\n  if (len === fieldSize.KEY_FOREIGN) {\n    opts.push({ label: 'Key (foreign)', value: 'key_foreign' })\n  }\n  if (len === 8 || len === 4 || len === 2 || len === 1) {\n    opts.push({ label: 'Integer', value: 'integer' })\n  }\n  if (len === 8 || len === 4) {\n    opts.push({ label: 'Decimal', value: 'decimal' })\n  }\n  if (len === 1 && stats.bMax <= 0x01) {\n    opts.push({ label: 'Boolean', value: 'boolean' })\n  }\n\n  return opts\n}\n\nfunction arrayTypeOpts (header: Header, stats: ColumnStats) {\n  const opts = [] as Array<{ label: string, value: string }>\n\n  if (!header.type.array || !stats.refArray) {\n    return opts\n  }\n\n  const array = stats.refArray\n  if (array.string) {\n    opts.push({ label: 'String', value: 'string' })\n  }\n  if (array.keySelf) {\n    opts.push({ label: 'Key (self)', value: 'key_self' })\n  }\n  if (array.keyForeign) {\n    opts.push({ label: 'Key (foreign)', value: 'key_foreign' })\n  }\n  if (array.longLong) {\n    opts.push({ label: 'Integer - 8 bytes', value: 'integer_8' })\n  }\n  if (array.long) {\n    opts.push({ label: 'Integer - 4 bytes', value: 'integer_4' })\n  }\n  if (array.short) {\n    opts.push({ label: 'Integer - 2 bytes', value: 'integer_2' })\n  }\n  if (array.longLong) {\n    opts.push({ label: 'Decimal - 8 bytes', value: 'decimal_8' })\n  }\n  if (array.long) {\n    opts.push({ label: 'Decimal - 4 bytes', value: 'decimal_4' })\n  }\n  if (array.boolean) {\n    opts.push({ label: 'Boolean', value: 'boolean' })\n  }\n  opts.push({ label: 'Integer - byte', value: 'integer_1' })\n\n  return opts\n}\n\nexport default defineComponent({\n  setup () {\n    const viewer = inject<Viewer>('viewer')!\n\n    const headerRef = computed(() => (viewer.editHeader.value && reactive(viewer.editHeader.value))!)\n    {\n      let watchStop = null as WatchStopHandle | null\n      watch(headerRef, (value) => {\n        if (watchStop) {\n          watchStop()\n          watchStop = null\n        }\n        if (value) {\n          watchStop = watch(value, () => {\n            triggerRef(viewer.headers)\n            saveHeaders(viewer)\n          }, { deep: true })\n        }\n      })\n    }\n\n    const stats = computed(() => viewer.columnStats.value[headerRef.value.offset])\n\n    const dataType = computed({\n      get () {\n        const type = headerRef.value.type\n        if (type.array) {\n          return 'array'\n        } else if (type.string) {\n          return 'string'\n        } else if (type.key) {\n          return type.key.foreign ? 'key_foreign' : 'key_self'\n        } else if (type.integer) {\n          return 'integer'\n        } else if (type.decimal) {\n          return 'decimal'\n        } else if (type.boolean) {\n          return 'boolean'\n        } else {\n          return undefined\n        }\n      },\n      set (type) {\n        const header = headerRef.value\n        header.type = {}\n        if (type === 'array') {\n          header.type.array = true\n          header.type.byteView = { array: true }\n        } else if (type === 'string') {\n          header.type.string = {}\n        } else if (type === 'key_foreign') {\n          header.type.key = { foreign: true }\n        } else if (type === 'key_self') {\n          header.type.key = { foreign: false }\n        } else if (type === 'integer') {\n          header.type.integer = { unsigned: false, size: header.length }\n        } else if (type === 'decimal') {\n          header.type.decimal = { size: header.length }\n        } else if (type === 'boolean') {\n          header.type.boolean = {}\n        }\n      }\n    })\n\n    const arrayType = computed({\n      get () {\n        const type = headerRef.value.type\n        if (type.string) {\n          return 'string'\n        } else if (type.key) {\n          return (type.key.foreign) ? 'key_foreign' : 'key_self'\n        } else if (type.integer) {\n          return `integer_${type.integer.size}`\n        } else if (type.decimal) {\n          return `decimal_${type.decimal.size}`\n        } else if (type.boolean) {\n          return 'boolean'\n        } else {\n          return undefined\n        }\n      },\n      set (type) {\n        const header = headerRef.value\n        header.type = { array: true }\n        if (type === 'string') {\n          header.type.string = {}\n        } else if (type === 'key_foreign') {\n          header.type.key = { foreign: true }\n        } else if (type === 'key_self') {\n          header.type.key = { foreign: false }\n        } else if (type === 'integer_1') {\n          header.type.integer = { unsigned: false, size: 1 }\n        } else if (type === 'integer_2') {\n          header.type.integer = { unsigned: false, size: 2 }\n        } else if (type === 'integer_4') {\n          header.type.integer = { unsigned: false, size: 4 }\n        } else if (type === 'integer_8') {\n          header.type.integer = { unsigned: false, size: 8 }\n        } else if (type === 'decimal_4') {\n          header.type.decimal = { size: 4 }\n        } else if (type === 'decimal_8') {\n          header.type.decimal = { size: 8 }\n        } else if (type === 'boolean') {\n          header.type.boolean = {}\n        }\n      }\n    })\n\n    const viewModeOpts = computed(() => {\n      const opts = [] as Array<{ label: string, value: string, disabled?: boolean }>\n      const type = headerRef.value.type\n\n      opts.push({ label: 'Bytes', value: 'bytes' })\n      if (type.array) {\n        opts.push({ label: 'Var. bytes', value: 'array-bytes' })\n      }\n      opts.push({ label: 'Data', value: 'data', disabled: !dataType.value || (dataType.value === 'array' && !arrayType.value) })\n\n      return opts\n    })\n\n    const byteViewMode = computed({\n      get () {\n        const type = headerRef.value.type\n        if (type.byteView) {\n          return type.byteView.array ? 'array-bytes' : 'bytes'\n        } else {\n          return 'data'\n        }\n      },\n      set (mode) {\n        const type = headerRef.value.type\n        if (mode === 'data') {\n          type.byteView = undefined\n        } else {\n          type.byteView = {\n            array: mode === 'array-bytes'\n          }\n        }\n      }\n    })\n\n    function close () {\n      viewer.editHeader.value = null\n    }\n\n    function remove () {\n      removeHeader(headerRef.value, viewer.headers.value)\n      viewer.editHeader.value = null\n      triggerRef(viewer.headers)\n      saveHeaders(viewer)\n    }\n\n    return {\n      isVisible: computed(() => viewer.editHeader.value != null),\n      HEADERS_HEIGHT,\n      header: headerRef,\n      byteViewMode,\n      dataType,\n      arrayType,\n      close,\n      remove,\n      viewModeOpts,\n      dataTypeOpts: computed(() =>\n        dataTypeOpts(headerRef.value, stats.value, viewer.datFile)),\n      arrayTypeOpts: computed(() =>\n        arrayTypeOpts(headerRef.value, stats.value))\n    }\n  }\n})\n","import { render } from \"./HeaderProps.vue?vue&type=template&id=5860aeb3\"\nimport script from \"./HeaderProps.vue?vue&type=script&lang=ts\"\nexport * from \"./HeaderProps.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { BORDER_WIDTH, CHAR_WIDTH, columnSizes } from '../rendering'\nimport type { Header } from '../headers'\nimport type { ColumnStats } from 'pathofexile-dat/dat-analysis'\nimport type { DatFile } from 'pathofexile-dat'\n\nconst BYTE_WIDTH = Math.ceil(CHAR_WIDTH * 3)\n\ninterface RenderStat {\n  max: string\n  array: boolean\n  string: boolean\n  nullable: boolean\n  zero: boolean\n}\n\nexport interface RenderByte {\n  offset: number\n  selected: boolean\n  border: boolean\n  widthPx: number\n  leftPx: number\n  text: string\n  stat?: RenderStat\n}\n\nexport function renderByteCols (\n  selection: readonly boolean[],\n  stats: readonly RenderStat[],\n  headers: readonly Header[],\n  paintBegin: number,\n  paintEnd: number\n): RenderByte[] {\n  const res: RenderByte[] = []\n\n  let left = 0\n  for (const header of headers) {\n    const sizes = columnSizes(header)\n\n    if (header.type.byteView && !header.type.byteView.array) {\n      let textLeft = left\n      for (let i = 0; i < header.length; ++i) {\n        const hasBorder = (sizes.hasBorder && i === 0)\n        const thisWidth = (CHAR_WIDTH * 3) + (hasBorder ? BORDER_WIDTH : 0)\n        if ((Math.ceil(textLeft) + thisWidth) < paintBegin) {\n          textLeft += thisWidth\n          continue\n        }\n\n        const offset = header.offset + i\n        res.push({\n          offset,\n          selected: selection[offset],\n          border: hasBorder,\n          widthPx: BYTE_WIDTH,\n          leftPx: Math.ceil(textLeft),\n          text: String(offset % 100).padStart(2, '0'),\n          stat: stats[offset]\n        })\n\n        textLeft += thisWidth\n        if (Math.ceil(textLeft) >= paintEnd) return res\n      }\n    } else if ((left + sizes.borderWidth) >= paintBegin) {\n      res.push({\n        offset: header.offset,\n        selected: false,\n        border: sizes.hasBorder,\n        widthPx: sizes.paddingWidth,\n        leftPx: left,\n        text: String(header.offset % 100).padStart(2, '0')\n      })\n    }\n\n    left += sizes.borderWidth\n    if (left >= paintEnd) return res\n  }\n\n  return res\n}\n\nexport function renderColStats (stats: ColumnStats[], datFile: DatFile): RenderStat[] {\n  const render = stats.map(stat => ({\n    max: stat.bMax.toString(16).padStart(2, '0'),\n    array: false,\n    string: false,\n    nullable: false,\n    zero: (stat.bMax === 0x00)\n  }))\n\n  const { fieldSize } = datFile\n  for (let idx = 0; idx < stats.length; ++idx) {\n    const stat = stats[idx]\n    if (stat.refString) {\n      for (let k = 0; k < fieldSize.STRING; ++k) {\n        render[idx + k].string = true\n      }\n    }\n    if (stat.refArray) {\n      for (let k = 0; k < fieldSize.ARRAY; ++k) {\n        render[idx + k].array = true\n      }\n    }\n    if (stat.nullableMemsize) {\n      for (let k = 0; k < datFile.memsize; ++k) {\n        render[idx + k].nullable = true\n      }\n    }\n  }\n\n  return render\n}\n","\nimport { defineComponent, PropType, reactive, computed, provide, watch, shallowRef, shallowReactive, ref, render, onMounted } from 'vue'\nimport ResizeObserver from '@/ResizeObserver.vue'\nimport CanvasScroll from '@/CanvasScroll.vue'\nimport { Viewer, createViewer } from '../Viewer'\nimport ViewerActions from './Actions.vue'\nimport ViewerHead from './ViewerHead.vue'\nimport HeaderProps from './HeaderProps.vue'\nimport * as rendering from '../rendering'\nimport { renderByteCols, renderColStats } from '../rendering/byte-columns'\nimport { renderHeaderCols } from '../rendering/header-columns'\n\nexport default defineComponent({\n  components: { ResizeObserver, CanvasScroll, ViewerActions, ViewerHead, HeaderProps },\n  emits: ['update:kaState'],\n  props: {\n    args: {\n      type: Object as PropType<{\n        fileContent: Uint8Array\n        fullPath: string\n      }>,\n      required: true\n    },\n    kaState: {\n      type: Object as PropType<Viewer | undefined>,\n      default: undefined\n    }\n  },\n  setup (props, ctx) {\n    let viewer: Viewer\n    if (props.kaState) {\n      viewer = props.kaState // eslint-disable-line vue/no-setup-props-destructure\n    } else {\n      viewer = createViewer(props.args.fullPath, props.args.fileContent)\n      ctx.emit('update:kaState', viewer)\n    }\n    provide('viewer', viewer)\n\n    const canvasRef = ref<HTMLCanvasElement | null>(null)\n\n    const canvasScroll = ref<{ scrollTo(x: number | undefined, y: number | undefined): void } | null>(null)\n    onMounted(() => {\n      canvasScroll.value!.scrollTo(viewer.scrollPos.x, viewer.scrollPos.y)\n    })\n\n    const rowIndices = computed(() => {\n      if (viewer.rowSorting.value) {\n        return viewer.rowSorting.value\n      } else {\n        return Array.from(\n          { length: viewer.datFile.rowCount },\n          (_, rowIdx) => rowIdx)\n      }\n    })\n\n    const paintWidth = ref(0)\n    const paintHeight = ref(0)\n    function handleResize (sz: { width: number, height: number }) {\n      paintWidth.value = sz.width\n      paintHeight.value = sz.height\n    }\n    const { scrollPos } = viewer\n    function handleScroll (pos: { y: number, x: number }) {\n      scrollPos.x = pos.x\n      scrollPos.y = pos.y\n    }\n\n    const rowsFullWidth = computed(() =>\n      rendering.getRowWidth(viewer.headers.value))\n    const rowsFullHeight = computed(() =>\n      viewer.datFile.rowCount * rendering.LINE_HEIGHT)\n    const rowsOverlayWidth = computed(() =>\n      rendering.rowsOverlayWidth(viewer.datFile.rowCount))\n    const rowsWidth = computed(() =>\n      Math.max(0, paintWidth.value - rowsOverlayWidth.value))\n    const rowsHeight = computed(() =>\n      Math.max(0, paintHeight.value - rendering.HEADERS_HEIGHT))\n\n    watch([rowsWidth, rowsHeight], () => {\n      const dpr = window.devicePixelRatio\n\n      canvasRef.value!.style.width = rowsWidth.value + 'px'\n      canvasRef.value!.style.height = rowsHeight.value + 'px'\n\n      canvasRef.value!.width = rowsWidth.value * dpr\n      canvasRef.value!.height = rowsHeight.value * dpr\n\n      const ctx = canvasRef.value!.getContext('2d', { alpha: false })!\n      ctx.scale(dpr, dpr)\n\n      draw()\n    })\n\n    const renderStats = computed(() =>\n      renderColStats(viewer.columnStats.value, viewer.datFile))\n\n    const renderColumns = computed(() =>\n      renderByteCols(\n        viewer.columnSelection.value,\n        renderStats.value,\n        viewer.headers.value,\n        scrollPos.x,\n        scrollPos.x + Math.min(rowsFullWidth.value, rowsWidth.value))\n    )\n\n    watch([scrollPos, renderColumns, rowIndices, viewer.selectedRow], () => { draw() })\n\n    function draw () {\n      const ctx = canvasRef.value!.getContext('2d', { alpha: false })!\n\n      rendering.drawRows({\n        left: scrollPos.x,\n        paintWidth: rowsWidth.value,\n        top: renderItems.value.top,\n        rows: renderItems.value.ids,\n        columns: renderColumns.value,\n        viewer: viewer,\n        ctx\n      })\n    }\n\n    const renderItems = computed(() => {\n      const scrollTop = scrollPos.y\n\n      const count = Math.ceil(rowsHeight.value / rendering.LINE_HEIGHT) + 1\n      const startIdx = Math.floor(scrollTop / rendering.LINE_HEIGHT)\n\n      const top = (startIdx * rendering.LINE_HEIGHT) - scrollTop\n\n      return {\n        top,\n        ids: rowIndices.value.slice(startIdx, startIdx + count)\n      }\n    })\n\n    function focusEditingHeader () {\n      const header = viewer.editHeader.value!\n      const cols = renderHeaderCols(viewer.headers.value, null, 0, 0 + Infinity)\n      const target = cols.find(col => col.offset === header.offset)!\n      canvasScroll.value!.scrollTo(target.leftPx - rowsWidth.value * 0.33, undefined)\n    }\n\n    function handleCanvasClick (e: MouseEvent) {\n      const { selectedRow } = viewer\n      const sortedIdx = Math.floor((e.offsetY + scrollPos.y) / rendering.LINE_HEIGHT)\n      const realIdx = rowIndices.value[sortedIdx]\n      selectedRow.value = (selectedRow.value !== realIdx)\n        ? realIdx\n        : null\n    }\n\n    return {\n      headerBlockStyle: computed(() =>\n        ({ height: rendering.HEADERS_HEIGHT + 'px', width: paintWidth.value + 'px' })),\n      headerOverlayContentStyle: computed(() =>\n        ({ left: rowsOverlayWidth.value + 'px', height: rendering.HEADERS_HEIGHT + 'px', width: rowsWidth.value + 'px' })),\n      scrollableStyle: computed(() =>\n        ({ top: rendering.HEADERS_HEIGHT + 'px', left: rowsOverlayWidth.value + 'px' })),\n      scrollablePaintSize: computed(() =>\n        ({ width: rowsWidth.value, height: rowsHeight.value })),\n      scrollableFullSize: computed(() =>\n        ({ width: rowsFullWidth.value, height: rowsFullHeight.value })),\n      rowsOverlayStyle: computed(() =>\n        ({ top: rendering.HEADERS_HEIGHT + 'px', width: rowsOverlayWidth.value + 'px', height: rowsHeight.value + 'px', fontFamily: rendering.FONT_FAMILY, fontSize: rendering.FONT_SIZE + 'px', lineHeight: rendering.LINE_HEIGHT + 'px' })),\n      handleScroll,\n      handleResize,\n      renderItems,\n      canvasRef,\n      renderColumns,\n      scrollLeft: computed(() => scrollPos.x),\n      rowsWidth: computed(() => Math.min(rowsFullWidth.value, rowsWidth.value)),\n      LINE_HEIGHT: rendering.LINE_HEIGHT,\n      canvasScroll,\n      rowsNumberWidth: (rendering.rowsNumWidth(viewer.datFile.rowCount) + 'px'),\n      focusEditingHeader,\n      handleCanvasClick\n    }\n  }\n})\n","// extracted by mini-css-extract-plugin\nexport default {\"rowsOverlay\":\"DatViewer_rowsOverlay_10_gM\"};","import { render } from \"./DatViewer.vue?vue&type=template&id=a7ab6244\"\nimport script from \"./DatViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./DatViewer.vue?vue&type=script&lang=ts\"\n\nconst cssModules = script.__cssModules = {}\nimport style0 from \"./DatViewer.vue?vue&type=style&index=0&id=a7ab6244&lang=postcss&module=true\"\ncssModules[\"$style\"] = style0\nscript.render = render\n\nexport default script","\nimport { defineComponent, shallowRef } from 'vue'\nimport { SchemaFile, SCHEMA_VERSION } from 'pathofexile-dat-schema'\nimport { fetchFile, progress } from '../patchcdn/cache'\nimport { loadIndex, loadFileContent, index } from '../patchcdn/index-store'\nimport { publicSchema } from '../dat-viewer/db'\nimport { openTab } from './workbench-core'\nimport DatViewer from '../dat-viewer/components/DatViewer.vue'\n\nexport default defineComponent({\n  setup () {\n    const poePatch = shallowRef(localStorage.getItem('POE_PATCH_VER') || '')\n    const latestPoEPatch = shallowRef('')\n    const isCdnImportRunning = shallowRef(false)\n    const isFetchingSchema = shallowRef(false)\n\n    if (poePatch.value && !index.value) {\n      cdnImport()\n    }\n    if (!publicSchema.value.length) {\n      fetchSchema()\n    }\n    getLatestPoEPatch()\n\n    async function handleFile (e: Event) {\n      const elFile = (e.target as HTMLInputElement).files![0]\n      const fileContent = new Uint8Array(await elFile.arrayBuffer())\n      const fileName = elFile.name\n      openTab({\n        id: `file@${fileName}`,\n        title: fileName,\n        type: DatViewer,\n        args: {\n          fileContent,\n          fullPath: fileName\n        }\n      })\n    }\n\n    async function cdnImport () {\n      let bundle\n      try {\n        isCdnImportRunning.value = true\n        bundle = await fetchFile(poePatch.value, '_.index.bin')\n      } finally {\n        isCdnImportRunning.value = false\n      }\n\n      try {\n        await loadIndex(bundle)\n        localStorage.setItem('POE_PATCH_VER', poePatch.value)\n      } catch (e) {\n        window.alert(e.message)\n        throw e\n      }\n    }\n\n    async function fetchSchema () {\n      isFetchingSchema.value = true\n      const response = await fetch('https://poe-bundles.snos.workers.dev/schema.min.json')\n      const schema: SchemaFile = await response.json()\n      if (schema.version === SCHEMA_VERSION) {\n        publicSchema.value = schema.tables\n      } else {\n        console.warn('Latest schema version is not supported.')\n      }\n      isFetchingSchema.value = false\n    }\n\n    async function getLatestPoEPatch () {\n      const res = await fetch('https://raw.githubusercontent.com/poe-tool-dev/latest-patch-version/main/latest.txt')\n      const version = await res.text()\n      latestPoEPatch.value = version\n    }\n\n    return {\n      poePatch,\n      latestPoEPatch,\n      isCdnImportRunning,\n      isFetchingSchema,\n      handleFile,\n      cdnImport\n    }\n  }\n})\n","// extracted by mini-css-extract-plugin\nexport default {\"input\":\"ImportDialog_input_1F68e\",\"label\":\"ImportDialog_label_3GNMX\",\"importVariant\":\"ImportDialog_importVariant_3VzOU\"};","import { render } from \"./ImportDialog.vue?vue&type=template&id=7bfc668c\"\nimport script from \"./ImportDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ImportDialog.vue?vue&type=script&lang=ts\"\n\nconst cssModules = script.__cssModules = {}\nimport style0 from \"./ImportDialog.vue?vue&type=style&index=0&id=7bfc668c&lang=postcss&module=true\"\ncssModules[\"$style\"] = style0\nscript.render = render\n\nexport default script","import { shallowRef, shallowReactive, DefineComponent, triggerRef } from 'vue'\nimport ImportDialog from './ImportDialog.vue'\n\ninterface Tab {\n  id: string\n  title: string\n  type: DefineComponent\n  args: unknown\n  kaState: unknown\n}\n\nexport const activeTabId = shallowRef<string | null>('poe-dat-viewer@import')\n\nexport function setActiveTab (id: string | null) {\n  activeTabId.value = id\n}\n\nexport const tabs = shallowRef<Tab[]>([\n  {\n    id: 'poe-dat-viewer@import',\n    title: 'Import',\n    type: ImportDialog as any, // eslint-disable-line @typescript-eslint/no-explicit-any\n    args: undefined,\n    kaState: undefined\n  }\n])\n\ninterface OpenTabParams {\n  id: string\n  title: string\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  type: any // vue.DefineComponent\n  args: unknown\n}\n\nexport function openTab (params: OpenTabParams) {\n  const existing = tabs.value.find(tab => tab.id === params.id)\n  if (!existing) {\n    tabs.value.push({\n      id: params.id,\n      title: params.title,\n      type: params.type,\n      args: params.args,\n      kaState: undefined\n    })\n  }\n  setActiveTab(params.id)\n  triggerRef(tabs)\n}\n\nexport function closeTab (id: string) {\n  const idx = tabs.value.findIndex(tab => tab.id === id)\n  if (id === activeTabId.value) {\n    if ((idx + 1) < tabs.value.length) {\n      setActiveTab(tabs.value[idx + 1].id)\n    } else if (idx !== 0) {\n      setActiveTab(tabs.value[idx - 1].id)\n    } else {\n      setActiveTab(null)\n    }\n  }\n  tabs.value = tabs.value.filter(tab => tab.id !== id)\n}\n","\nimport { defineComponent, computed } from 'vue'\nimport { tabs, activeTabId, setActiveTab, closeTab, openTab } from './workbench-core'\nimport ImportDialog from './ImportDialog.vue'\n\nexport default defineComponent({\n  setup () {\n    const _tabs = computed(() =>\n      tabs.value.map(tab => ({\n        id: tab.id,\n        title: tab.title,\n        isActive: (tab.id === activeTabId.value)\n      }))\n    )\n\n    function openImport () {\n      openTab({\n        id: 'poe-dat-viewer@import',\n        title: 'Import',\n        type: ImportDialog,\n        args: undefined\n      })\n    }\n\n    return {\n      tabs: _tabs,\n      setActiveTab,\n      closeTab,\n      openImport\n    }\n  }\n})\n","// extracted by mini-css-extract-plugin\nexport default {\"titlebar\":\"Tabs_titlebar_3NzUh\",\"tab\":\"Tabs_tab_1nc-U\",\"active\":\"Tabs_active_1pZ1q\",\"rightBtn\":\"Tabs_rightBtn_RmPDC\"};","import { render } from \"./Tabs.vue?vue&type=template&id=6ad3302f\"\nimport script from \"./Tabs.vue?vue&type=script&lang=ts\"\nexport * from \"./Tabs.vue?vue&type=script&lang=ts\"\n\nconst cssModules = script.__cssModules = {}\nimport style0 from \"./Tabs.vue?vue&type=style&index=0&id=6ad3302f&lang=postcss&module=true\"\ncssModules[\"$style\"] = style0\nscript.render = render\n\nexport default script","<template>\n  <div class=\"layout-column flex-shrink-0\" :style=\"{ 'width': showTree ? '300px' : undefined }\">\n    <div class=\"flex p-1 items-center mb-px\">\n      <button\n        title=\"Toggle tree visibility\"\n        :class=\"$style.treeToggle\"\n        @click=\"toggleTree\"\n        ><i class=\"codicon codicon-list-flat\"></i></button>\n      <input v-if=\"showTree\"\n        v-model.trim=\"searchText\"\n        placeholder=\"Search in current folder\"\n        :class=\"$style.searchInput\"\n        type=\"search\" spellcheck=\"false\">\n    </div>\n    <template v-if=\"showTree\">\n      <div v-if=\"extensionOpts\"\n        class=\"flex gap-x-1 border-b pb-1.5 px-2 justify-end\">\n        <button v-for=\"opt in extensionOpts\" :key=\"opt.value\"\n          @click=\"opt.handleClick\"\n          :class=\"['px-2', (opt.active ? 'bg-gray-200' : 'hover:bg-gray-100') ]\"\n          v-text=\"opt.value\" />\n      </div>\n      <div v-if=\"!isIndexLoaded\"\n        class=\"italic text-center text-gray-500 p-2\">Waiting for Index bundle...</div>\n      <div v-if=\"isIndexLoaded && !tree.length\"\n        class=\"italic text-center text-gray-500 p-2\">No results found</div>\n      <virtual-scroll\n        class=\"flex-1\"\n        :scrollable-props=\"{ style: 'background: #fff;', widthY: 10 }\"\n        :items=\"tree\"\n        :item-height=\"22\"\n      >\n        <template v-slot=\"props\">\n          <button v-for=\"entry in props.entries\" :key=\"entry.item.fullPath\"\n            :class=\"{ [$style.itemBtn]: true, [$style.active]: entry.item.isActive }\"\n            :style=\"{ transform: `translate(0, ${entry.top}px` }\"\n            @click=\"handleTreeNav(entry.item)\"\n          >\n            <i v-if=\"!entry.item.isFile\" class=\"codicon codicon-folder pr-3\"></i\n            >{{ entry.item.label }}</button>\n        </template>\n      </virtual-scroll>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, shallowRef, computed, watch } from 'vue'\nimport FileSaver from 'file-saver'\nimport VirtualScroll from '@/VirtualScroll.vue'\nimport { getRootDirs, getDirContent } from 'pathofexile-dat/bundles/index-paths'\nimport { index, loadFileContent } from '../patchcdn/index-store'\nimport { openTab, activeTabId } from './workbench-core'\nimport DatViewer from '../dat-viewer/components/DatViewer.vue'\nimport * as perf from '../../perf'\n\ninterface TreeItem {\n  label: string\n  fullPath: string\n  isFile: boolean\n  isActive?: boolean\n}\n\nfunction useTreeNavigation () {\n  const currentDir = shallowRef('')\n\n  watch(index, () => {\n    currentDir.value = ''\n  })\n\n  const tree = computed<TreeItem[]>(() => {\n    if (!index.value) return []\n\n    if (currentDir.value === '') {\n      const dirs = perf.fn('Getting root dirs', () =>\n        getRootDirs(index.value!.pathReps, index.value!.dirsInfo))\n\n      return dirs.map(dirName => ({\n        label: dirName,\n        fullPath: dirName,\n        isFile: false\n      })).sort((a, b) => a.label.localeCompare(b.label))\n    }\n\n    const content = perf.fn(`Getting \"${currentDir.value}\" dir`, () =>\n      getDirContent(currentDir.value, index.value!.pathReps, index.value!.dirsInfo))\n\n    return [\n      {\n        label: '../',\n        fullPath: (currentDir.value.indexOf('/') === -1)\n          ? ''\n          : currentDir.value.split('/').slice(0, -1).join('/'),\n        isFile: false\n      },\n      ...content.dirs.map(dirName => ({\n        label: dirName.substr(currentDir.value.length + 1),\n        fullPath: dirName,\n        isFile: false\n      })).sort((a, b) => a.label.localeCompare(b.label)),\n      ...content.files.map(fileName => ({\n        label: fileName.substr(currentDir.value.length + 1),\n        fullPath: fileName,\n        isFile: true,\n        isActive: (`bundles@${fileName}` === activeTabId.value)\n      })).sort((a, b) => a.label.localeCompare(b.label))\n    ]\n  })\n\n  async function handleTreeNav (item: TreeItem) {\n    if (!item.isFile) {\n      currentDir.value = item.fullPath\n    } else {\n      const fileContent = await loadFileContent(item.fullPath)\n\n      if (item.fullPath.endsWith('.dat') || item.fullPath.endsWith('.dat64')) {\n        openTab({\n          id: `bundles@${item.fullPath}`,\n          title: item.label,\n          type: DatViewer,\n          args: {\n            fileContent,\n            fullPath: item.fullPath\n          }\n        })\n      } else {\n        FileSaver.saveAs(new File(\n          [fileContent],\n          item.fullPath.substring(item.fullPath.lastIndexOf('/') + 1),\n          { type: 'application/octet-stream' }\n        ))\n      }\n    }\n  }\n\n  return {\n    currentDir,\n    tree,\n    handleTreeNav\n  }\n}\n\nexport default defineComponent({\n  components: { VirtualScroll },\n  setup () {\n    const showTree = shallowRef(true)\n    function toggleTree () {\n      showTree.value = !showTree.value\n    }\n\n    const isIndexLoaded = computed(() => {\n      return Boolean(index.value)\n    })\n\n    const { tree, handleTreeNav, currentDir } = useTreeNavigation()\n\n    const searchExtension = shallowRef('.dat64')\n    const extensionOpts = computed(() => {\n      if (!currentDir.value.startsWith('Data')) return null\n\n      return ['.dat', '.dat64', '.datl', '.datl64'].map(ext => ({\n        value: ext,\n        active: searchExtension.value === ext,\n        handleClick: () => { searchExtension.value = ext }\n      }))\n    })\n\n    const searchText = shallowRef('')\n    const filteredTree = computed(() => {\n      const term = searchText.value.toLowerCase()\n      const ext = extensionOpts.value ? searchExtension.value : ''\n      return tree.value.filter(item => {\n        return item.label.toLowerCase().includes(term) &&\n          (item.isFile ? item.label.endsWith(ext) : true)\n      })\n    })\n\n    return {\n      showTree,\n      toggleTree,\n      tree: filteredTree,\n      handleTreeNav,\n      searchText,\n      isIndexLoaded,\n      extensionOpts\n    }\n  }\n})\n</script>\n\n<style lang=\"postcss\" module>\n.treeToggle {\n  @apply p-1;\n  @apply m-1;\n  line-height: 1;\n\n  &:hover {\n    @apply bg-gray-100;\n  }\n}\n\n.searchInput {\n  @apply h-7;\n  @apply border;\n  box-sizing: content-box;\n  @apply flex-1;\n  @apply mx-1;\n  @apply px-1 py-px;\n\n  &:focus {\n    @apply border-blue-500;\n  }\n}\n\n.itemBtn {\n  position: absolute;\n  line-height: 22px;\n  @apply px-3;\n  text-align: left;\n  @apply truncate;\n  width: 100%;\n\n  &:hover {\n    @apply bg-gray-100;\n  }\n\n  &.active {\n    @apply bg-blue-600;\n    @apply text-white;\n  }\n}\n</style>\n","<template>\n  <resize-observer @resize=\"handleResize\" class=\"relative\">\n    <canvas-scroll ref=\"scrollable\"\n      v-bind=\"scrollableProps\"\n      class=\"absolute\"\n      :paint-size=\"paintSize\"\n      :full-size=\"fullSize\"\n    >\n      <slot :entries=\"renderItems\" />\n    </canvas-scroll>\n  </resize-observer>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, shallowReactive, ref } from 'vue'\nimport ResizeObserver from './ResizeObserver.vue'\nimport CanvasScroll from './CanvasScroll.vue'\n\nexport default defineComponent({\n  components: { ResizeObserver, CanvasScroll },\n  props: {\n    items: {\n      type: Array,\n      required: true\n    },\n    itemHeight: {\n      type: Number,\n      required: true\n    },\n    scrollableProps: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup (props) {\n    const paintSize = shallowReactive({\n      width: 0,\n      height: 0\n    })\n\n    const fullSize = computed(() => ({\n      width: paintSize.width,\n      height: props.items.length * props.itemHeight\n    }))\n\n    function handleResize (sz: { width: number, height: number }) {\n      paintSize.width = sz.width\n      paintSize.height = sz.height\n    }\n\n    const scrollable = ref<{ scrollPos: { y: number } } | null>(null)\n\n    const renderItems = computed(() => {\n      const scrollTop = (scrollable.value?.scrollPos.y ?? 0)\n\n      const count = Math.ceil(paintSize.height / props.itemHeight) + 1\n      const startIdx = Math.floor(scrollTop / props.itemHeight)\n\n      const top = (startIdx * props.itemHeight) - scrollTop\n\n      return props.items\n        .slice(startIdx, startIdx + count)\n        .map((item, i) =>\n          ({\n            top: top + (i * props.itemHeight),\n            item\n          })\n        )\n    })\n\n    return {\n      handleResize,\n      paintSize,\n      fullSize,\n      scrollable,\n      renderItems\n    }\n  }\n})\n</script>\n","\nimport { defineComponent, computed, shallowReactive, ref } from 'vue'\nimport ResizeObserver from './ResizeObserver.vue'\nimport CanvasScroll from './CanvasScroll.vue'\n\nexport default defineComponent({\n  components: { ResizeObserver, CanvasScroll },\n  props: {\n    items: {\n      type: Array,\n      required: true\n    },\n    itemHeight: {\n      type: Number,\n      required: true\n    },\n    scrollableProps: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup (props) {\n    const paintSize = shallowReactive({\n      width: 0,\n      height: 0\n    })\n\n    const fullSize = computed(() => ({\n      width: paintSize.width,\n      height: props.items.length * props.itemHeight\n    }))\n\n    function handleResize (sz: { width: number, height: number }) {\n      paintSize.width = sz.width\n      paintSize.height = sz.height\n    }\n\n    const scrollable = ref<{ scrollPos: { y: number } } | null>(null)\n\n    const renderItems = computed(() => {\n      const scrollTop = (scrollable.value?.scrollPos.y ?? 0)\n\n      const count = Math.ceil(paintSize.height / props.itemHeight) + 1\n      const startIdx = Math.floor(scrollTop / props.itemHeight)\n\n      const top = (startIdx * props.itemHeight) - scrollTop\n\n      return props.items\n        .slice(startIdx, startIdx + count)\n        .map((item, i) =>\n          ({\n            top: top + (i * props.itemHeight),\n            item\n          })\n        )\n    })\n\n    return {\n      handleResize,\n      paintSize,\n      fullSize,\n      scrollable,\n      renderItems\n    }\n  }\n})\n","import { render } from \"./VirtualScroll.vue?vue&type=template&id=315fb3d7\"\nimport script from \"./VirtualScroll.vue?vue&type=script&lang=ts\"\nexport * from \"./VirtualScroll.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nexport function start () {\n  return Date.now()\n}\n\nexport function end (desc: string, start: number) {\n  const end = Date.now() - start\n  console.log(`${desc}. Done in -> ${end} ms`)\n}\n\nexport function fn<T> (desc: string, cb: () => T): T {\n  const t$ = start()\n  const res = cb()\n  end(desc, t$)\n  return res\n}\n","\nimport { defineComponent, shallowRef, computed, watch } from 'vue'\nimport FileSaver from 'file-saver'\nimport VirtualScroll from '@/VirtualScroll.vue'\nimport { getRootDirs, getDirContent } from 'pathofexile-dat/bundles/index-paths'\nimport { index, loadFileContent } from '../patchcdn/index-store'\nimport { openTab, activeTabId } from './workbench-core'\nimport DatViewer from '../dat-viewer/components/DatViewer.vue'\nimport * as perf from '../../perf'\n\ninterface TreeItem {\n  label: string\n  fullPath: string\n  isFile: boolean\n  isActive?: boolean\n}\n\nfunction useTreeNavigation () {\n  const currentDir = shallowRef('')\n\n  watch(index, () => {\n    currentDir.value = ''\n  })\n\n  const tree = computed<TreeItem[]>(() => {\n    if (!index.value) return []\n\n    if (currentDir.value === '') {\n      const dirs = perf.fn('Getting root dirs', () =>\n        getRootDirs(index.value!.pathReps, index.value!.dirsInfo))\n\n      return dirs.map(dirName => ({\n        label: dirName,\n        fullPath: dirName,\n        isFile: false\n      })).sort((a, b) => a.label.localeCompare(b.label))\n    }\n\n    const content = perf.fn(`Getting \"${currentDir.value}\" dir`, () =>\n      getDirContent(currentDir.value, index.value!.pathReps, index.value!.dirsInfo))\n\n    return [\n      {\n        label: '../',\n        fullPath: (currentDir.value.indexOf('/') === -1)\n          ? ''\n          : currentDir.value.split('/').slice(0, -1).join('/'),\n        isFile: false\n      },\n      ...content.dirs.map(dirName => ({\n        label: dirName.substr(currentDir.value.length + 1),\n        fullPath: dirName,\n        isFile: false\n      })).sort((a, b) => a.label.localeCompare(b.label)),\n      ...content.files.map(fileName => ({\n        label: fileName.substr(currentDir.value.length + 1),\n        fullPath: fileName,\n        isFile: true,\n        isActive: (`bundles@${fileName}` === activeTabId.value)\n      })).sort((a, b) => a.label.localeCompare(b.label))\n    ]\n  })\n\n  async function handleTreeNav (item: TreeItem) {\n    if (!item.isFile) {\n      currentDir.value = item.fullPath\n    } else {\n      const fileContent = await loadFileContent(item.fullPath)\n\n      if (item.fullPath.endsWith('.dat') || item.fullPath.endsWith('.dat64')) {\n        openTab({\n          id: `bundles@${item.fullPath}`,\n          title: item.label,\n          type: DatViewer,\n          args: {\n            fileContent,\n            fullPath: item.fullPath\n          }\n        })\n      } else {\n        FileSaver.saveAs(new File(\n          [fileContent],\n          item.fullPath.substring(item.fullPath.lastIndexOf('/') + 1),\n          { type: 'application/octet-stream' }\n        ))\n      }\n    }\n  }\n\n  return {\n    currentDir,\n    tree,\n    handleTreeNav\n  }\n}\n\nexport default defineComponent({\n  components: { VirtualScroll },\n  setup () {\n    const showTree = shallowRef(true)\n    function toggleTree () {\n      showTree.value = !showTree.value\n    }\n\n    const isIndexLoaded = computed(() => {\n      return Boolean(index.value)\n    })\n\n    const { tree, handleTreeNav, currentDir } = useTreeNavigation()\n\n    const searchExtension = shallowRef('.dat64')\n    const extensionOpts = computed(() => {\n      if (!currentDir.value.startsWith('Data')) return null\n\n      return ['.dat', '.dat64', '.datl', '.datl64'].map(ext => ({\n        value: ext,\n        active: searchExtension.value === ext,\n        handleClick: () => { searchExtension.value = ext }\n      }))\n    })\n\n    const searchText = shallowRef('')\n    const filteredTree = computed(() => {\n      const term = searchText.value.toLowerCase()\n      const ext = extensionOpts.value ? searchExtension.value : ''\n      return tree.value.filter(item => {\n        return item.label.toLowerCase().includes(term) &&\n          (item.isFile ? item.label.endsWith(ext) : true)\n      })\n    })\n\n    return {\n      showTree,\n      toggleTree,\n      tree: filteredTree,\n      handleTreeNav,\n      searchText,\n      isIndexLoaded,\n      extensionOpts\n    }\n  }\n})\n","// extracted by mini-css-extract-plugin\nexport default {\"treeToggle\":\"IndexTree_treeToggle_1Disw\",\"searchInput\":\"IndexTree_searchInput_1f5gZ\",\"itemBtn\":\"IndexTree_itemBtn_3xH8n\",\"active\":\"IndexTree_active_1ajD8\"};","import { render } from \"./IndexTree.vue?vue&type=template&id=86821028\"\nimport script from \"./IndexTree.vue?vue&type=script&lang=ts\"\nexport * from \"./IndexTree.vue?vue&type=script&lang=ts\"\n\nconst cssModules = script.__cssModules = {}\nimport style0 from \"./IndexTree.vue?vue&type=style&index=0&id=86821028&lang=postcss&module=true\"\ncssModules[\"$style\"] = style0\nscript.render = render\n\nexport default script","<template>\n  <div v-if=\"active\" :class=\"$style.notification\">\n    <template v-if=\"totalSize\">\n      <div class=\"bg-gray-200 h-1\"></div>\n      <div class=\"bg-blue-500 h-1 absolute top-0\"\n        :style=\"{ width: `${received/totalSize * 100}%` }\"></div>\n    </template>\n    <div class=\"p-3\">\n      <div class=\"font-semibold truncate\">{{ bundleName }}</div>\n      <div class=\"text-grey text-sm\">\n        <template v-if=\"totalSize\">{{ (totalSize / 1000000).toFixed(1) }} MB</template>\n        <template v-else>Downloading...</template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport { progress } from '../patchcdn/cache'\n\nexport default defineComponent({\n  setup () {\n    return progress\n  }\n})\n</script>\n\n<style lang=\"postcss\" module>\n.notification {\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  width: 20rem;\n  @apply bg-gray-50;\n  @apply m-6;\n  @apply shadow;\n  @apply border;\n  @apply text-base;\n}\n</style>\n","\nimport { defineComponent } from 'vue'\nimport { progress } from '../patchcdn/cache'\n\nexport default defineComponent({\n  setup () {\n    return progress\n  }\n})\n","// extracted by mini-css-extract-plugin\nexport default {\"notification\":\"DownloadProgress_notification_1LAA4\"};","import { render } from \"./DownloadProgress.vue?vue&type=template&id=8a6b4a52\"\nimport script from \"./DownloadProgress.vue?vue&type=script&lang=ts\"\nexport * from \"./DownloadProgress.vue?vue&type=script&lang=ts\"\n\nconst cssModules = script.__cssModules = {}\nimport style0 from \"./DownloadProgress.vue?vue&type=style&index=0&id=8a6b4a52&lang=postcss&module=true\"\ncssModules[\"$style\"] = style0\nscript.render = render\n\nexport default script","\nimport { defineComponent, computed } from 'vue'\nimport ViewerTabs from './Tabs.vue'\nimport IndexTree from './IndexTree.vue'\nimport DownloadProgress from './DownloadProgress.vue'\nimport { tabs, activeTabId } from './workbench-core'\n\nexport default defineComponent({\n  components: { IndexTree, ViewerTabs, DownloadProgress },\n  setup () {\n    const activeTab = computed(() =>\n      tabs.value.find(tab => tab.id === activeTabId.value)\n    )\n\n    return {\n      activeTab,\n      appVersion: process.env.APP_VERSION\n    }\n  }\n})\n","import { render } from \"./Workbench.vue?vue&type=template&id=0838a844\"\nimport script from \"./Workbench.vue?vue&type=script&lang=ts\"\nexport * from \"./Workbench.vue?vue&type=script&lang=ts\"\n\nimport \"./Workbench.vue?vue&type=style&index=0&id=0838a844&lang=postcss\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\nimport Workbench from './app/workbench/Workbench.vue'\n\ncreateApp(Workbench).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/poe-dat-viewer/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkpoe_dat_viewer\"] = self[\"webpackChunkpoe_dat_viewer\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(242); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","href","src","activeTab","type","args","key","id","kaState","appVersion","$style","titlebar","tabs","tab","active","isActive","setActiveTab","closeTab","title","rightBtn","openImport","style","for","target","importVariant","value","readonly","input","label","poePatch","placeholder","cdnImport","disabled","isCdnImportRunning","loading","latestPoEPatch","accept","handleFile","BUNDLE_DIR","progress","totalSize","received","bundleName","async","fetchFile","patchVer","name","localStorage","getItem","Error","_fetchFile","e","window","alert","path","cache","caches","open","res","match","fetch","status","statusText","buf","Number","headers","get","reader","body","getReader","chunks","done","read","push","length","Uint8Array","bufPos","chunk","set","delete","put","Response","String","byteLength","buffer","arrayBuffer","Worker_fn","Worker","thread","decompressBundle","bundle","byteOffset","decompressSliceInBundle","bundleSlice","slice","decompressFileTransferBundle","offset","size","analyzeDatFile","datFile","index","loadFileContent","fullPath","location","bundlesInfo","filesInfo","bundleBin","loadIndex","indexBin","indexBundle","_index","dirsInfo","pathReps","pathRepsBundle","publicSchema","db","upgrade","createObjectStore","keyPath","findByName","record","fromPublicSchema","saveHeaders","serializeHeaders","removeHeaders","map","header","string","array","boolean","decimal","integer","undefined","sch","find","s","columns","column","byteView","unsigned","foreign","textLength","handleResize","headerBlockStyle","headerOverlayContentStyle","left","scrollLeft","width","rowsWidth","renderColumns","ref","handleScroll","scrollableStyle","scrollablePaintSize","scrollableFullSize","handleCanvasClick","rowsOverlay","rowsOverlayStyle","renderItems","top","ids","rowIdx","i","LINE_HEIGHT","rowsNumberWidth","position","focusEditingHeader","tag","props","default","emits","setup","ctx","rootEl","resizeObserver","ResizeObserver","entries","emit","contentRect","height","observe","unobserve","scrollable","paintSize","handleMousedown","handleMousewheel","track","y","handleTrackMousedownY","scrollbarY","fixedSize","trackSize","thumb","x","handleTrackMousedownX","scrollbarX","MIN_THUMB_SIZE","SCROLL_DIR_THRESHOLD","WHEEL_SCROLL_SPEED","SCROLL_ACCELERATION_FN","dt","Math","max","pow","sign","scrollbar","scrollSize","otherScrollbar","scrollPos","thumbSize","floor","thumbRatio","thumbPos","round","useMouseMiddleButtonScroll","scrollByDelta","startY","startX","deltaY","deltaX","direction","rafTime","rafId","button","preventDefault","stopPropagation","document","cursor","clientY","clientX","requestAnimationFrame","scrollEachFrame","addEventListener","handleMouseMove","cancelScroll","cancelAnimationFrame","removeEventListener","removeProperty","dy","dx","abs","time","dtTime","useMouseWheelScroll","useScrollbarScroll","axis","scrollTo","start","rectProp","mEventProp","handleTrackMousedown","trackEl","currentTarget","getBoundingClientRect","thumbEl","Object","required","fullSize","widthY","widthX","min","deep","cssModules","selectColsByHeader","selection","toggleColsBetween","a","b","end","filter","hdr","some","clearColumnSelection","fill","getColumnSelections","ranges","last","idx","indexOf","curr","removeHeadersAtOffsets","offsets","removeHeader","createHeaderFromSelected","selections","selected","emptyHeader","updatedHeaders","splice","merged","mergeEmptyHeaders","h1","h2","createViewer","fileContent","parsed","viewer","rowLength","getNamePart","columnStats","columnSelection","Array","editHeader","selectedRow","rowSorting","then","stats","importHeaders","tryImportHeaders","message","serialized","hdrSerialized","headerLength","getHeaderLength","isValid","headerCreated","assign","exportAllRows","data","data_","every","row","entry","unknown","rid","unshift","rowCount","_","fromEntries","col","bar","defineColumn","range","restoreSchema","showSchema","exportDataJson","text","fields","join","File","JSON","stringify","openTab","ShowSchema","parse","headersRowStyle","border","widthPx","transform","leftPx","handleHeaderWheel","$event","colsRowStyle","selectStart","selectContinue","statsRowStyle","stat","sortRows","order","rows","from","sort","ai","bi","localeCompare","numberToString","out","color","numberArrayToString","booleanToString","booleanArrayToString","stringToString","stringArrayToString","str","keySelfToString","keySelfArrayToString","keyForeignToString","keyForeignArrayToString","renderCellContent","getFieldReader","draw","textY","prevColor","fillStyle","fillText","drawByteView","begin","dataFixed","subarray","hexDump","byte","toString","padStart","CHAR_WIDTH","drawArrayVarData","refArray","entryMaxLength","keyForeign","fieldSize","KEY_FOREIGN","keySelf","KEY","STRING","longLong","LONGLONG","long","LONG","short","SHORT","maxReadBytes","ceil","arrayLength","readerFixed","getSizeT","varOffset","memsize","dataVariable","FONT_FAMILY","FONT_SIZE","getMonoFontWidth","XBASE_HEIGHT","getFontBaseLine","ROWNUM_MIN_LENGTH","BORDER_WIDTH","COLUMN_STAT_HEIGHT","COLUMN_BYTE_HEIGHT","HEADERS_HEIGHT","rowNumLength","maxLen","rowsNumWidth","fontSize","fontFamily","canvasEl","createElement","context","getContext","font","metrics","measureText","textBaseline","xBase","alphabeticBaseline","actualBoundingBoxDescent","getBaseLine","lineHeight","drawRows","params","fillRect","canvas","selectedIdx","save","translate","drawColumns","restore","renderers","getColumnRenderers","paintWidth","render","beginPath","rect","clip","exec","grdH","createLinearGradient","addColorStop","grdV","paintBegin","paintEnd","sizes","columnSizes","borderWidth","paddingWidth","hexBegin","hexEnd","hasBorder","getRowWidth","renderHeaderCols","activeHeader","sortOrder","selectionStart","colsBeforeSelection","cancelSelection","buttons","len","h","ctrlKey","$emit","close","spellcheck","viewModeOpts","opt","byteViewMode","remove","dataTypeOpts","dataType","arrayTypeOpts","arrayType","opts","ARRAY","refString","bMax","headerRef","watchStop","mode","isVisible","BYTE_WIDTH","renderByteCols","textLeft","thisWidth","renderColStats","nullable","zero","k","nullableMemsize","components","CanvasScroll","ViewerActions","ViewerHead","HeaderProps","canvasRef","canvasScroll","rowIndices","paintHeight","sz","pos","rowsFullWidth","rowsFullHeight","rowsOverlayWidth","rowsHeight","dpr","devicePixelRatio","alpha","scale","renderStats","scrollTop","count","startIdx","cols","sortedIdx","offsetY","realIdx","isFetchingSchema","elFile","files","fileName","DatViewer","setItem","fetchSchema","response","schema","json","version","SCHEMA_VERSION","tables","console","warn","getLatestPoEPatch","activeTabId","ImportDialog","existing","findIndex","_tabs","showTree","treeToggle","toggleTree","searchText","searchInput","extensionOpts","handleClick","isIndexLoaded","tree","items","item","itemBtn","handleTreeNav","isFile","scrollableProps","itemHeight","Date","now","desc","log","fn","cb","t$","useTreeNavigation","currentDir","dirs","dirName","content","split","substr","endsWith","substring","lastIndexOf","VirtualScroll","Boolean","searchExtension","startsWith","ext","filteredTree","term","toLowerCase","includes","notification","toFixed","IndexTree","ViewerTabs","DownloadProgress","Workbench","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","keys","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}