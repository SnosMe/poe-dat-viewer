(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],f=0,d=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==i[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},i={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/poe-dat-viewer/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"01e5":function(e,t,r){"use strict";var n=r("af29"),i=r.n(n);i.a},"0e21":function(e,t,r){},"3f68":function(e,t,r){"use strict";var n=r("8984"),i=r.n(n);i.a},"499b":function(e,t,r){},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),i=r.n(n);i.a},"61d7":function(e,t,r){e.exports={code:"ExportSchema_code_NS_l7"}},"782d":function(e,t,r){e.exports=r.p+"img/discord-badge.b9bc316a.svg"},8984:function(e,t,r){},"9c0c":function(e,t,r){},af29:function(e,t,r){},c57a:function(e,t,r){"use strict";var n=r("61d7"),i=r.n(n);t["default"]=i.a},cd2f:function(e,t,r){"use strict";var n=r("499b"),i=r.n(n);i.a},cd49:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"getAllFilesMeta",(function(){return ge})),r.d(n,"findByPath",(function(){return ve})),r.d(n,"findByHash",(function(){return me})),r.d(n,"deleteByHash",(function(){return ye})),r.d(n,"putFile",(function(){return be})),r.d(n,"updateFileHeaders",(function(){return we}));r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("analyze")],1)},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout-column"},[r("div",{staticClass:"app-titlebar"},[e.viewer.datFile?r("div",{staticClass:"ellipsis q-mr-xs"},[e._v(e._s(e.viewer.datFile.meta.ggpkPath))]):e._e(),r("q-space"),r("q-btn",{staticClass:"q-mr-sm",attrs:{padding:"0 sm",label:"Import","no-caps":"",flat:""},on:{click:function(t){e.app.importDialog=!0}}}),r("q-btn",{staticClass:"q-mr-sm",attrs:{padding:"0 sm",label:"Help","no-caps":"",flat:""},on:{click:function(t){e.app.helpDialog=!0}}}),r("q-btn",{attrs:{padding:"0 sm",label:"Settings","no-caps":"",flat:""},on:{click:function(t){e.app.settingsDialog=!0}}})],1),r("q-dialog",{model:{value:e.app.exportSchemaDialog,callback:function(t){e.$set(e.app,"exportSchemaDialog",t)},expression:"app.exportSchemaDialog"}},[r("export-schema")],1),r("q-dialog",{model:{value:e.app.helpDialog,callback:function(t){e.$set(e.app,"helpDialog",t)},expression:"app.helpDialog"}},[r("help-content")],1),r("q-dialog",{model:{value:e.app.importDialog,callback:function(t){e.$set(e.app,"importDialog",t)},expression:"app.importDialog"}},[r("import-dialog")],1),r("q-dialog",{model:{value:e.app.settingsDialog,callback:function(t){e.$set(e.app,"settingsDialog",t)},expression:"app.settingsDialog"}},[r("settings-dialog")],1),r("div",{staticClass:"flex no-wrap bg-blue-grey-9 q-pa-sm"},[r("div",{staticClass:"flex no-wrap"},[0===e.selections.length?[r("div",{staticClass:"text-blue-grey-4 text-italic"},[e._v("No bytes selected")])]:1===e.selections.length?[r("q-btn",{attrs:{padding:"0 sm",label:"Define column","no-caps":"",color:"blue-grey-8"},on:{click:e.defineColumn}})]:e.selections.length>1?[r("div",{staticClass:"text-blue-grey-2 q-pr-xs"},[e._v("Selections")]),e._l(e.selections,(function(t){return r("div",{staticClass:"q-px-xs q-mr-xs font-mono bg-blue-grey-2 text-blue-grey-10 rounded-borders"},[e._v(e._s(t))])}))]:e._e()],2),r("q-space"),r("div",{staticClass:"flex no-wrap q-gutter-x-sm"},[e.viewer.rowSorting?r("q-btn",{attrs:{padding:"0 sm",label:"Reset sorting","no-caps":"",color:"blue-grey-8"},on:{click:function(t){e.viewer.rowSorting=null}}}):e._e(),r("q-btn",{attrs:{disable:!e.viewer.datFile,padding:"0 sm",label:"Export data","no-caps":"",color:"blue-grey-8"},on:{click:e.exportDataJson}}),r("q-btn",{attrs:{disable:!e.viewer.datFile,padding:"0 sm",label:"Export schema","no-caps":"",color:"blue-grey-8"},on:{click:function(t){e.app.exportSchemaDialog=!0}}})],1)],1),r("div",{staticClass:"flex min-h-0 flex-1"},[r("div",{staticClass:"layout-column min-w-0 flex-1"},[r("div",{staticClass:"flex-1 font-mono scroll",staticStyle:{"--ppc":"8px","letter-spacing":"calc(var(--ppc) - 1ch)"},attrs:{id:"viewer-fancy-scroll"}},[r("q-virtual-scroll",{staticStyle:{"min-width":"min-content"},attrs:{items:e.rows,"virtual-scroll-item-size":21,"scroll-target":"#viewer-fancy-scroll > .scroll"},scopedSlots:e._u([{key:"before",fn:function(){return[r("viewer-head",{attrs:{headers:e.viewer.headers,columns:e.viewer.columns}})]},proxy:!0},{key:"default",fn:function(t){var n=t.index;return[r("data-row",{attrs:{"row-idx":e.rows[n],format:e.rowFormat}})]}}])})],1),r("div",{staticClass:"app-footer bg-blue-grey-9 q-pa-sm text-white text-body2 flex q-gutter-x-lg"},[r("div",[e._v("Made by Alexander Drozdov, v"+e._s(e.appVersion)+" "),r("a",{staticClass:"q-link text-white border-b",attrs:{href:"https://github.com/SnosMe/poe-dat-viewer"}},[e._v("GitHub")])]),e._m(0)])]),r("div",{staticClass:"flex-shrink-0"},[r("header-props")],1)])],1)},l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"flex",attrs:{href:"https://discord.gg/SJjBdT3"}},[n("img",{attrs:{src:r("782d")}})])}],c=(r("cb29"),r("a15b"),r("d81d"),r("96cf"),r("1da1")),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex no-wrap"},[r("div",{staticClass:"viewer-rownum"},[e._v(e._s(e.rowNum))]),e._l(e.formatted,(function(t){return r("div",{staticClass:"viewer-row",class:{"viewer-row--border":t.dataStart,"viewer-row--selected":t.selected,"text-grey-7":1===t.color,"text-green-9":2===t.color,"text-indigo-14":3===t.color},style:{width:"calc(var(--ppc) * "+t.width+")"}},[e._v(e._s(t.text))])}))],2)},f=[],d=(r("4d90"),r("4de4"),r("a630"),r("13d5"),r("dca8"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("9ab4")),h=(r("c975"),r("a9e3"),4278124286),p=0xfefefefefeff0000,g=new TextDecoder("utf-16le"),v=[0,0,0,0],m={BOOL:1,BYTE:1,SHORT:2,LONG:4,LONGLONG:8,STRING:{4:4,8:8},KEY:{4:4,8:8},KEY_FOREIGN:{4:8,8:16},ARRAY:{4:8,8:16}};function y(e,t,r){if(1===t&&r)return function(t){return e.getUint8(t)};if(2===t&&r)return function(t){return e.getUint16(t)};if(4===t&&r)return function(t){return e.getUint32(t)};if(8===t&&r)return function(t){return Number(e.getBigUint64(t))};if(1===t&&!r)return function(t){return e.getInt8(t)};if(2===t&&!r)return function(t){return e.getInt16(t)};if(4===t&&!r)return function(t){return e.getInt32(t)};if(8===t&&!r)return function(t){return Number(e.getBigInt64(t))};throw new Error("never")}function b(e,t){if(4===t)return function(t){return e.getFloat32(t)};if(8===t)return function(t){return e.getFloat64(t)};throw new Error("never")}function w(e){return function(t){var r=q(e,v,t);while((r-t)%2!==0)r=q(e,v,r+1);return g.decode(e.subarray(t,r))}}function x(e,t){return e===(4===t?h:p)}function _(e){return 4===e?h:p}function C(e){var t=_(e.memsize);return function(r){var n=e.getSizeT(r);return n===t?null:n}}function S(e){var t=_(e.memsize);return function(r){var n=e.getSizeT(r);return n===t?null:[n,e.getSizeT(r+e.memsize)]}}function k(e,t){var r=e.type,n=t.dataFixed,i=t.dataVariable,a=t.readerFixed;if(r.boolean)return function(e){return Boolean(n[e])};if(r.string){var s=w(i);return function(e){var t=a.getSizeT(e);return s(t)}}if(r.integer)return y(a,r.integer.size,r.integer.unsigned);if(r.decimal)return b(a,r.decimal.size);if(r.key)return r.key.foreign?S(a):C(a);throw new Error("never")}function z(e,t){var r=e.type,n=t.dataVariable,i=t.readerVariable,a=function(){if(r.boolean)return[1,function(e){return Boolean(n[e])}];if(r.string){var e=w(n);return[t.memsize,function(t){var r=i.getSizeT(t);return e(r)}]}if(r.integer)return[r.integer.size,y(i,r.integer.size,r.integer.unsigned)];if(r.decimal)return[r.decimal.size,b(i,r.decimal.size)];if(r.key)return r.key.foreign?[2*t.memsize,S(i)]:[t.memsize,C(i)];throw new Error("never")}(),s=a[0],o=a[1];return function(e){var r=t.readerFixed.getSizeT(e);if(0===r)return[];var n=t.readerFixed.getSizeT(e+t.memsize),i=Array(r).fill(void 0);return i.map((function(e,t){return o(n+t*s)}))}}function O(e,t){var r,n=(null===(r=e.type.ref)||void 0===r?void 0:r.array)?z(e,t):k(e,t),i=Array(t.rowCount).fill(void 0);return i.map((function(r,i){return n(i*t.rowLength+e.offset)}))}function q(e,t,r){for(void 0===r&&(r=0);;){var n=e.indexOf(t[0],r);if(-1===n||n+t.length>e.length)return-1;for(var i=!0,a=n,s=0;s<t.length;a+=1,s+=1)if(e[a]!==t[s]){r=a,i=!1;break}if(i)return n}}function j(e){var t=[];function r(e){var t,r;return null===(r=null===(t=e.header)||void 0===t?void 0:t.type.integer)||void 0===r||r.unsigned,{offset:e.offset,length:1,selected:e.selected,dataStart:e.dataStart,cachedView:!e.header||e.header.type.byteView&&!e.header.type.byteView.array?null:e.header.cachedView}}return e.length?(e=Object(d["d"])(e),t.push(r(e.shift())),e.reduce((function(e,n){return e.selected===n.selected&&!1===n.dataStart?e.length+=1:(e=r(n),t.push(e)),e}),t[0]),t):t}function A(e,t,r){var n=r.dataFixed.subarray(e*r.rowLength,e*r.rowLength+r.rowLength);return t.map((function(t){if(t.cachedView)return{selected:!1,dataStart:!0,text:t.cachedView.entries[e][0],color:t.cachedView.entries[e][1],width:t.cachedView.length};var r=Array.from(n.subarray(t.offset,t.offset+t.length)),i=r.map((function(e){return e.toString(16).padStart(2,"0")})).join(" ");return{selected:t.selected,dataStart:t.dataStart,text:i,color:0,width:i.length}}))}function F(e,t,r){var n=r.readerFixed.getSizeT(e);if(0===n)return{value:[],size:0};var i=r.readerFixed.getSizeT(e+r.memsize);return{value:Array.from(r.dataVariable.subarray(i,i+t*n)),size:n}}function V(e,t,r){if(!t.refArray)throw Error("never");var n=Math.max.apply(Math,[[m.KEY_FOREIGN[r.memsize],t.refArray.keyForeign],[m.KEY[r.memsize],t.refArray.keySelf],[m.STRING[r.memsize],t.refArray.string],[m.LONGLONG,t.refArray.longLong],[m.LONG,t.refArray.long],[m.SHORT,t.refArray.short],[1,!0]].map((function(e){var t=e[0],r=e[1];return r?t:0}))),i=Array(r.rowCount).fill(void 0).map((function(t,i){return F(i*r.rowLength+e.offset,n,r)})),a=Math.max.apply(Math,i.map((function(e){return e.size}))),s=0,o=i.map((function(e){var t=e.value,r=e.size,n="";if(t.length){var i=t.map((function(e){return e.toString(16).padStart(2,"0")})).join(" ");n=String(r).padStart(a," ")+" { "+i+" }"}else n="[]";return s=Math.max(s,n.length),[n,0]}));s=D(o),s=Math.max(s,11),e.cachedView=Object.freeze({length:s,entries:o,entriesRaw:i.map((function(e){return e.value}))})}function T(e,t,r){var n=String(e-1+t).length;return Math.max(n,r)}function I(e,t){var r,n=O(e,t),i=0,a="",s=0,o=function(){var t;if(null===(t=e.type.ref)||void 0===t?void 0:t.array){if(e.type.boolean)return s=3,function(e){a="["+e.join(", ")+"]"};if(e.type.string)return s=1,function(e){a="["+e.map((function(e){return'"'+e+'"'})).join(", ")+"]"};if(e.type.integer||e.type.decimal)return s=2,function(e){a="["+e.join(", ")+"]"};if(e.type.key)return s=2,e.type.key.foreign?function(e){a="["+e.map((function(e){return"<"+e[0]+", "+e[1]+">"})).join(", ")+"]"}:function(e){a="["+e.map((function(e){return"<"+e+", self>"})).join(", ")+"]"};throw new Error("never")}if(e.type.boolean)return s=3,function(e){a=String(e)};if(e.type.string)return function(e){""===e?(a="null",s=3):(a=String(e),s=1)};if(e.type.integer||e.type.decimal)return s=2,function(e){a=String(e)};if(e.type.key)return e.type.key.foreign?function(e){null===e?(a="null",s=3):(a="<"+e[0]+", "+e[1]+">",s=2)}:function(e){null===e?(a="null",s=3):(a="<"+e+", self>",s=2)};throw new Error("never")}(),l=n.map((function(e){return o(e),i=Math.max(i,a.length),[a,s]}));((null===(r=e.type.ref)||void 0===r?void 0:r.array)||e.type.string)&&(i=D(l)),i=Math.max(i,11),e.cachedView=Object.freeze({length:i,entries:l,entriesRaw:n})}function D(e){var t=e.filter((function(e){var t=e[0];return"[]"!==t&&"null"!==t})).map((function(e){var t=e[0];return t.length}));if(!t.length)return 0;t.sort((function(e,t){return t-e}));var r=Math.floor(t.length/2),n=t.length%2!==0?t[r]:(t[r-1]+t[r])/2;return Math.min(n+11,t[0],Math.floor(1.2*n))}var M={props:["rowIdx","format"],inject:["viewer","app"],computed:{formatted:function(){return A(this.rowIdx,this.format,this.viewer.datFile)},rowNum:function(){return String(this.rowIdx+this.app.config.rowNumStart).padStart(this.viewer.rowNumberLength," ")}}},N=M,P=(r("3f68"),r("2877")),L=Object(P["a"])(N,u,f,!1,null,null,null),$=L.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"viewer-sticky-head"},[r("div",{staticClass:"viewer-col-rownum"},[e._v(e._s("".padStart(e.viewer.rowNumberLength)))]),r("div",{staticStyle:{display:"flex","flex-direction":"column"}},[r("div",{staticClass:"flex no-wrap"},[e._l(e.headers,(function(t){return r("button",{staticClass:"viewer-col viewer-col--border",style:{width:e.calcHeaderWidth(t)},on:{click:function(r){return e.editHeader(t)}}},[null===t.name?r("span",[e._v(e._s(" "))]):""===t.name?r("span",{staticClass:"bg-blue-grey-6 text-grey-2 rounded-borders q-px-px"},[e._v("?")]):[e._v(e._s(t.name))]],2)})),e.headers.length?e._e():r("div",{staticClass:"viewer-col"},[e._v("File does not have data")])],2),r("div",{staticClass:"flex no-wrap"},e._l(e.columns,(function(t){return r("button",{key:t.offset,staticClass:"viewer-col",class:{"viewer-col--border":t.dataStart,"viewer-col--selected":t.selected},style:{width:"calc(var(--ppc) * "+(t.header?t.header.cachedView.length:2)+")"},on:{mousedown:function(r){return e.selectColumn(t.offset,r)},mouseenter:function(r){return e.selectColumn(t.offset,r)},touchstart:function(r){return e.selectColumn(t.offset,r)},touchmove:function(r){return e.selectColumn(t.offset,r)}}},[e._v(e._s(t.colNum99))])})),0),r("div",{staticClass:"flex no-wrap"},e._l(e.columns,(function(t){return r("div",{key:t.offset,staticClass:"viewer-col-stat",class:{"viewer-col-stat--border":t.dataStart,"viewer-col-stat--selected":t.selected},style:{width:"calc(var(--ppc) * "+(t.header?t.header.cachedView.length+1:3)+")"}},[t.header?e._e():[t.stats.string?r("div",{staticClass:"viewer-col-stat_indicator bg-brown-4",staticStyle:{top:"0"}}):e._e(),t.stats.array?r("div",{staticClass:"viewer-col-stat_indicator bg-teal-4",staticStyle:{top:"var(--ppc)"}}):e._e(),t.stats.b00?r("div",{staticClass:"viewer-col-stat_indicator bg-grey-10",staticStyle:{top:"calc(var(--ppc) * 2)"}}):t.stats.nullable?r("div",{staticClass:"viewer-col-stat_indicator bg-pink-4",staticStyle:{top:"calc(var(--ppc) * 2)"}}):e._e(),t.selected?r("div",{staticClass:"viewer-col-stat_indicator bg-grey-10",staticStyle:{top:"0",height:"calc(var(--ppc) * 3)",opacity:"0.25"}}):e._e(),r("div",{staticClass:"viewer-col-stat_max",staticStyle:{top:"0",height:"calc(var(--ppc) * 3)"}},[e._v(e._s(t.stats.bMax))])]],2)})),0)])])},B=[];r("4160"),r("159b"),r("c740");function E(e,t){for(var r=t.findIndex((function(t){return t.offset===e.offset})),n=0;n<e.length;n+=1)t[r+n].selected=!0}function H(e,t,r){for(var n=Math.min(t,r),i=Math.max(t,r),a=0,s=e;a<s.length;a++){var o=s[a];o.offset>=n&&o.offset<=i&&(o.header||(o.selected=!o.selected))}}function Q(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];n.selected=!1}}function U(e){var t,r=[],n=e.findIndex((function(e){return e.selected}));if(n<0)return r;for(t=e[n],r.push([t]),n+=1;n<e.length;n+=1)if(e[n].selected){var i=e[n];i.offset-t.offset===1?r[r.length-1].push(i):r.push([i]),t=i}return r}function G(e,t){var r,n=e.cachedView.entriesRaw,i=n.map((function(e,t){return t}));return(null===(r=e.type.ref)||void 0===r?void 0:r.array)?i.sort((function(e,r){var i=n[e],a=n[r];return(a.length-i.length)*t})):e.type.boolean?i.sort((function(e,r){var i=Number(n[e]),a=Number(n[r]);return(i-a)*t})):e.type.string?i.sort((function(e,r){var i=n[e],a=n[r];return i.localeCompare(a)*t})):e.type.integer||e.type.decimal?i.sort((function(e,r){var i=n[e],a=n[r];return(a-i)*t})):e.type.key&&(e.type.key.foreign?i.sort((function(e,r){var i=n[e],a=n[r];return(((null===a||void 0===a?void 0:a[0])||0)-((null===i||void 0===i?void 0:i[0])||0))*t})):i.sort((function(e,r){var i=Number(n[e]),a=Number(n[r]);return(a-i)*t}))),i}var K={props:{headers:{type:Array,required:!0},columns:{type:Array,required:!0}},inject:["viewer"],data:function(){return{sortOrder:0}},methods:{selectStart:function(e){this.selectionStart=e,this.colsBeforeSelection=Object.freeze(this.columns.map((function(e){return{selected:e.selected}}))),H(this.columns,this.selectionStart,this.selectionStart)},selectContinue:function(e){var t=this;if(void 0!==this.selectionStart){var r=this.viewer.datFile.memsize,n=e-this.selectionStart;n>=r?e=this.selectionStart+(2*r-1):n>=4?e=this.selectionStart+7:n>=2&&(e=this.selectionStart+3),n<=-r?e=this.selectionStart-(2*r-1):n<=-4?e=this.selectionStart-7:n<=-2&&(e=this.selectionStart-3),this.columns.forEach((function(e,r){e.selected=t.colsBeforeSelection[r].selected})),H(this.columns,this.selectionStart,e)}},selectColumn:function(e,t){if("mousedown"===t.type||"touchstart"===t.type)this.selectStart(e);else if("mouseenter"===t.type&&1===t.buttons)this.selectContinue(e);else if("touchmove"===t.type&&1===t.changedTouches.length){var r=document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY),n=new Event("mouseenter");n.buttons=1,r.dispatchEvent(n)}"touchstart"!==t.type&&"touchmove"!==t.type||t.preventDefault()},editHeader:function(e){if(this.viewer.editHeader!==e||!e.cachedView||e.type.byteView&&!e.type.byteView.array)this.viewer.editHeader=e,this.sortOrder=0;else{0===this.sortOrder?this.sortOrder=1:1===this.sortOrder?this.sortOrder=-1:-1===this.sortOrder&&(this.sortOrder=1);var t=G(e,this.sortOrder);this.viewer.rowSorting=Object.freeze(t)}},calcHeaderWidth:function(e){var t=e.type.byteView&&!e.type.byteView.array?3*e.length-1:e.cachedView.length;return"calc(var(--ppc) * ".concat(t,")")}}},Y=K,J=(r("cd2f"),Object(P["a"])(Y,R,B,!1,null,null,null)),W=J.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.header?r("div",{staticClass:"shadow-1 h-full",staticStyle:{width:"20rem"}},[e._m(0),null===e.header.name?r("div",{staticClass:"q-pa-md"},[r("div",[e._v(e._s(e.header.length)+" bytes of unidentified data")])]):r("div",{staticClass:"q-pa-sm"},[r("div",{staticClass:"q-mb-md q-mt-sm q-px-sm"},[r("q-input",{attrs:{label:"Name",placeholder:"unnamed",outlined:""},model:{value:e.header.name,callback:function(t){e.$set(e.header,"name","string"===typeof t?t.trim():t)},expression:"header.name"}})],1),r("div",{staticClass:"q-mb-sm q-pl-sm flex no-wrap items-baseline"},[r("div",{staticClass:"q-mb-xs q-mr-sm"},[e._v("View mode")]),r("q-btn-toggle",{attrs:{unelevated:"",padding:"0 sm","no-caps":"",color:"blue-grey-1","text-color":"black",options:e.viewModeOpts},model:{value:e.byteViewMode,callback:function(t){e.byteViewMode=t},expression:"byteViewMode"}})],1),r("div",{staticClass:"q-mb-sm q-pl-sm"},[r("div",{staticClass:"q-mb-xs flex items-baseline justify-between"},[r("span",[e._v("Data type")]),r("q-btn",{attrs:{padding:"0 sm",label:"Remove","no-caps":"",flat:"",color:"negative"},on:{click:e.remove}})],1),r("q-option-group",{attrs:{dense:"",size:"xs",options:e.dataTypeOpts},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}}),e.arrayTypeOpts.length?r("div",{staticClass:"q-mt-sm"},[r("div",[e._v("of ...")]),r("q-option-group",{attrs:{dense:"",size:"xs",options:e.arrayTypeOpts},model:{value:e.arrayType,callback:function(t){e.arrayType=t},expression:"arrayType"}})],1):e._e(),e.header.type.integer?r("div",{staticClass:"q-mt-sm"},[r("q-toggle",{attrs:{label:"Unsigned",dense:"",size:"xs"},on:{input:e.recacheAfterOptChange},model:{value:e.header.type.integer.unsigned,callback:function(t){e.$set(e.header.type.integer,"unsigned",t)},expression:"header.type.integer.unsigned"}})],1):e._e()],1)])]):e._e()},Z=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex items-center bg-blue-grey-8 q-px-md shadow-1 font-mono",staticStyle:{height:"6ch"}},[r("div",{staticClass:"text-white font-sans"},[e._v("Column properties")])])}],ee=(r("7db0"),r("45fc"),r("a434"),r("b0c0"),function(){return{byteView:{array:!1}}});function te(e,t,r){for(var n,i=function(i){var a=t[i];null!=a.name&&e.some((function(e){return e>=a.offset&&e<a.offset+a.length}))?ne(a,t,r):i+=1,n=i},a=0;a<t.length;)i(a),a=n}function re(e,t){var r=U(e);if(0===r.length)throw new Error("No bytes selected");if(r.length>1)throw new Error("Cannot create header from non-contiguous selection");var n=r[0];te(n.map((function(e){return e.offset})),t,e);var i=t.find((function(e){return n[0].offset>=e.offset&&n[0].offset+n.length<=e.offset+e.length})),a=[{name:null,offset:i.offset,length:n[0].offset-i.offset,type:ee()},{name:"",offset:n[0].offset,length:n.length,type:ee()},{name:null,offset:n[0].offset+n.length,length:i.length-(n[0].offset-i.offset+n.length),type:ee()}],s=a[1];a=a.filter((function(e){return e.length})),t.splice.apply(t,Object(d["d"])([t.indexOf(i),1],a));for(var o=function(e){a.some((function(t){return e.offset===t.offset}))&&(e.dataStart=!0)},l=0,c=e;l<c.length;l++){var u=c[l];o(u)}return s}function ne(e,t,r){if(null==e.name)throw new Error("Cannot remove empty header");if(!e.type.byteView)throw new Error("Cannot remove header in data view mode");e.name=null,e.type=ee();for(var n=0;n<t.length-1;){var i=ie(t[n],t[n+1]);if(i){for(var a=0,s=r;a<s.length;a++){var o=s[a];o.offset===t[n+1].offset&&(o.dataStart=!1)}t.splice(n,2,i)}else n+=1}}function ie(e,t){return null===e.name&&null===t.name&&{name:null,offset:e.offset,length:e.length+t.length,type:ee()}}var ae={inject:["viewer"],computed:{header:function(){return this.viewer.editHeader},dataTypeOpts:function(){var e=[],t=this.viewer.datFile.memsize,r=this.header.length;return r===2*t&&this.stats.refArray&&e.push({label:"Array",value:"reference"}),r===t&&this.stats.refString&&e.push({label:"String",value:"reference"}),r===t&&this.stats.keySelf&&e.push({label:"Key (self)",value:"key"}),r===2*t&&e.push({label:"Key (foreign)",value:"key"}),8!==r&&4!==r&&2!==r&&1!==r||e.push({label:"Integer",value:"integer"}),8!==r&&4!==r||e.push({label:"Decimal",value:"decimal"}),1===r&&this.stats.bMax<=1&&e.push({label:"Boolean",value:"boolean"}),e},arrayTypeOpts:function(){var e=[];if(!this.header.type.ref||!this.header.type.ref.array)return e;var t=this.stats.refArray;return t.string&&e.push({label:"String",value:"string"}),t.keySelf&&e.push({label:"Key (self)",value:"key_self"}),t.keyForeign&&e.push({label:"Key (foreign)",value:"key_foreign"}),t.longLong&&e.push({label:"Integer - 8 bytes",value:"integer_8"}),t.long&&e.push({label:"Integer - 4 bytes",value:"integer_4"}),t.short&&e.push({label:"Integer - 2 bytes",value:"integer_2"}),t.longLong&&e.push({label:"Decimal - 8 bytes",value:"decimal_8"}),t.long&&e.push({label:"Decimal - 4 bytes",value:"decimal_4"}),t.boolean&&e.push({label:"Boolean",value:"boolean"}),e.push({label:"Integer - byte",value:"integer_1"}),e},viewModeOpts:function(){var e=[],t=this.header.type;return e.push({label:"Bytes",value:"bytes",class:"q-mr-px"}),t.ref&&t.ref.array&&e.push({label:"Var. bytes",value:"array-bytes",class:"q-mr-px"}),e.push({label:"Data",value:"data",disable:!this.dataType||"reference"===this.dataType&&!this.arrayType}),e},stats:function(){return this.viewer.columnStats[this.header.offset]},dataType:{get:function(){var e=this.header.type;return e.ref?"reference":e.key?"key":e.integer?"integer":e.decimal?"decimal":e.boolean?"boolean":void 0},set:function(e){this.setByteViewMode(!0);var t=this.header;if(t.type={byteView:{}},"reference"===e){var r=this.viewer.datFile.memsize;if(t.length!==r)return this.$set(t.type,"ref",{array:!0}),void this.setByteViewMode("array-bytes");this.$set(t.type,"ref",{array:!1}),this.$set(t.type,"string",{})}else if("key"===e){var n=this.viewer.datFile.memsize;t.length===n?this.$set(t.type,"key",{foreign:!1}):this.$set(t.type,"key",{foreign:!0})}else"integer"===e?this.$set(t.type,"integer",{unsigned:!0,size:t.length}):"decimal"===e?this.$set(t.type,"decimal",{size:t.length}):"boolean"===e&&this.$set(t.type,"boolean",{});this.setByteViewMode(!1),this.viewer.saveHeadersToFileCache()}},arrayType:{get:function(){var e=this.header.type;return e.string?"string":e.key?e.key.foreign?"key_foreign":"key_self":e.integer?"integer_".concat(e.integer.size):e.decimal?"decimal_".concat(e.decimal.size):e.boolean?"boolean":void 0},set:function(e){this.setByteViewMode(!0);var t=this.header;t.type={byteView:{},ref:{array:!0}},"string"===e?this.$set(t.type,"string",{}):"key_foreign"===e?this.$set(t.type,"key",{foreign:!0}):"key_self"===e?this.$set(t.type,"key",{foreign:!1}):"integer_1"===e?this.$set(t.type,"integer",{unsigned:!0,size:1}):"integer_2"===e?this.$set(t.type,"integer",{unsigned:!0,size:2}):"integer_4"===e?this.$set(t.type,"integer",{unsigned:!0,size:4}):"integer_8"===e?this.$set(t.type,"integer",{unsigned:!0,size:8}):"decimal_4"===e?this.$set(t.type,"decimal",{size:4}):"decimal_8"===e?this.$set(t.type,"decimal",{size:8}):"boolean"===e&&this.$set(t.type,"boolean",{}),this.setByteViewMode(!1),this.viewer.saveHeadersToFileCache()}},byteViewMode:{get:function(){var e=this.header.type;return e.byteView?e.byteView.array?"array-bytes":"bytes":"data"},set:function(e){this.setByteViewMode("data"!==e&&e)}}},methods:{recacheAfterOptChange:function(){I(this.header,this.viewer.datFile),this.viewer.saveHeadersToFileCache()},remove:function(){var e=this.viewer;this.setByteViewMode(!0),ne(e.editHeader,e.headers,e.columns),e.editHeader=null,e.saveHeadersToFileCache()},setByteViewMode:function(e){var t=this.header.type;e?"array-bytes"===e?(V(this.header,this.stats,this.viewer.datFile),t.byteView&&!t.byteView.array&&this.viewer.disableByteView(this.header),this.header.type.byteView={array:!0}):t.byteView&&!t.byteView.array||this.viewer.enableByteView(this.header):(I(this.header,this.viewer.datFile),t.byteView&&t.byteView.array?t.byteView=void 0:this.viewer.disableByteView(this.header))}}},se=ae,oe=Object(P["a"])(se,X,Z,!1,null,null,null),le=oe.exports,ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[r("q-tabs",{staticClass:"text-grey",attrs:{breakpoint:0,dense:"",align:"left","narrow-indicator":"","active-color":"primary","indicator-color":"primary"},model:{value:e.format,callback:function(t){e.format=t},expression:"format"}},[r("q-tab",{attrs:{name:"pypoe",label:"PyPoE"}}),r("q-tab",{attrs:{name:"pogo",label:"pogo"}}),r("q-tab",{attrs:{name:"c_struct",label:"C struct"}}),r("q-tab",{attrs:{name:"json",label:"JSON"}})],1),r("q-separator"),r("q-tab-panels",{attrs:{animated:""},model:{value:e.format,callback:function(t){e.format=t},expression:"format"}},[r("q-tab-panel",{staticStyle:{"max-height":"60vh"},attrs:{name:"pypoe"}},[r("div",{class:e.$style.code},[e._v(e._s(e.pypoe))])]),r("q-tab-panel",{staticStyle:{"max-height":"60vh"},attrs:{name:"pogo"}},[r("div",{class:e.$style.code},[e._v(e._s(e.pogo))])]),r("q-tab-panel",{staticStyle:{"max-height":"60vh"},attrs:{name:"c_struct"}},[r("div",{class:e.$style.code},[e._v(e._s(e.clang))])]),r("q-tab-panel",{staticStyle:{"max-height":"60vh"},attrs:{name:"json"}},[r("div",{class:e.$style.code},[e._v(e._s(e.json))])])],1),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""}},[e._v("Close")])],1)],1)},ue=[];r("5db7"),r("73d9"),r("843c");function fe(e,t,r,n){var i,a=n(e);return i="string"===typeof a?[[e.name||"Unknown"+ ++t,a]]:new Array(e.length).fill(void 0).map((function(e){return["Undefined"+ ++r,a.byte]})),{unknownNum:t,undefinedNum:r,fields:i}}r("99af"),r("ac1f"),r("8a79"),r("466d"),r("2ca0"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7");var de=r("3f4f"),he=Object(de["a"])("poe-dat-viewer",1,{upgrade:function(e){e.createObjectStore("dat-files",{keyPath:"sha256"})}}),pe="dat-files";function ge(){return Object(d["b"])(this,void 0,Promise,(function(){return Object(d["c"])(this,(function(e){switch(e.label){case 0:return[4,he];case 1:return[2,e.sent().getAll("dat-files")]}}))}))}function ve(e,t){var r;return Object(d["b"])(this,void 0,void 0,(function(){var n,i;return Object(d["c"])(this,(function(a){switch(a.label){case 0:return[4,he];case 1:return[4,a.sent().getAll("dat-files")];case 2:return n=a.sent(),i=null===(r=n.find((function(r){return r.patch===e&&r.ggpkPath===t})))||void 0===r?void 0:r.sha256,[2,i?me(i):void 0]}}))}))}function me(e){return Object(d["b"])(this,void 0,void 0,(function(){var t,r,n,i;return Object(d["c"])(this,(function(a){switch(a.label){case 0:return[4,he];case 1:return[4,a.sent().get("dat-files",e)];case 2:return t=a.sent(),t?[4,caches.open(pe)]:[2];case 3:return r=a.sent(),[4,r.match(e)];case 4:if(n=a.sent(),!n)throw new Error("Content for cached file is missing");return[4,n.arrayBuffer()];case 5:return i=a.sent(),[2,{content:i,meta:t}]}}))}))}function ye(e){return Object(d["b"])(this,void 0,void 0,(function(){var t;return Object(d["c"])(this,(function(r){switch(r.label){case 0:return[4,he];case 1:return[4,r.sent().delete("dat-files",e)];case 2:return r.sent(),[4,caches.open(pe)];case 3:return t=r.sent(),[4,t.delete(e)];case 4:return r.sent(),[2]}}))}))}function be(e,t,r){return Object(d["b"])(this,void 0,void 0,(function(){var n,i,a,s,o;return Object(d["c"])(this,(function(l){switch(l.label){case 0:return[4,crypto.subtle.digest("SHA-256",r)];case 1:return n=l.sent(),i=Array.from(new Uint8Array(n)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""),[4,me(i)];case 2:return a=l.sent(),a?[2,a]:(s={ggpkPath:t,sha256:i,cachedAt:new Date,size:r.byteLength,patch:e,headers:[]},[4,he]);case 3:return l.sent().put("dat-files",s),[4,caches.open(pe)];case 4:return o=l.sent(),[4,o.put(i,new Response(r,{headers:{"content-length":String(r.byteLength),"content-type":"application/octet-stream"}}))];case 5:return l.sent(),[2,{content:r,meta:s}]}}))}))}function we(e,t){return Object(d["b"])(this,void 0,void 0,(function(){var r;return Object(d["c"])(this,(function(n){switch(n.label){case 0:return[4,he];case 1:return[4,n.sent().get("dat-files",t)];case 2:if(r=n.sent(),!r)throw new Error("No file found");return r.headers=e,[4,he];case 3:return n.sent().put("dat-files",r),[2]}}))}))}function xe(e,t){if(t.byteLength<12)throw new Error("Invalid file size");var r=new Uint8Array(t),n=new DataView(r.buffer),i=e.endsWith(".dat64")?8:4,a=n.getUint32(0,!0),s=Oe(r);if(-1===s)throw new Error("Invalid file: section with variable data not found");var o=(s-4)/a,l=r.subarray(4,s),c=r.subarray(s),u=new DataView(l.buffer,l.byteOffset,l.byteLength),f=new DataView(c.buffer,c.byteOffset,c.byteLength);return{memsize:i,rowCount:a,rowLength:o,dataFixed:l,dataVariable:c,readerFixed:new qe(i,u),readerVariable:new qe(i,f)}}function _e(e,t){return Object(d["b"])(this,void 0,Promise,(function(){var r,i,a,s,o,l;return Object(d["c"])(this,(function(c){switch(c.label){case 0:return t.startsWith("/")||(t="/"+t),[4,ve(e,t)];case 1:return r=c.sent(),r?[3,5]:(i="http://patch.poecdn.com/patch/"+e+t,[4,fetch("https://cors-anywhere.herokuapp.com/"+i)]);case 2:if(a=c.sent(),200!==a.status)throw new Error("patch.poecdn.com: "+a.status+" "+a.statusText);return o=(s=n).putFile,l=[e,t],[4,a.arrayBuffer()];case 3:return[4,o.apply(s,l.concat([c.sent()]))];case 4:r=c.sent(),c.label=5;case 5:return[2,Object.freeze(Object(d["a"])({meta:r.meta},xe(r.meta.ggpkPath,r.content)))]}}))}))}function Ce(e){return Object(d["b"])(this,void 0,void 0,(function(){var t,r,i,a;return Object(d["c"])(this,(function(s){switch(s.label){case 0:return i=(r=n).putFile,a=[null,e.name],[4,e.arrayBuffer()];case 1:return[4,i.apply(r,a.concat([s.sent()]))];case 2:return t=s.sent(),[2,Object.freeze(Object(d["a"])({meta:t.meta},xe(t.meta.ggpkPath,t.content)))]}}))}))}function Se(e){return Object(d["b"])(this,void 0,void 0,(function(){var t;return Object(d["c"])(this,(function(r){switch(r.label){case 0:return[4,me(e)];case 1:return t=r.sent(),t?[2,Object.freeze(Object(d["a"])({meta:t.meta},xe(t.meta.ggpkPath,t.content)))]:[2]}}))}))}function ke(e){return Object(d["b"])(this,void 0,void 0,(function(){var t;return Object(d["c"])(this,(function(r){switch(r.label){case 0:return[4,ge()];case 1:return t=r.sent(),t=t.filter((function(t){return ze(t.ggpkPath)===e})).filter((function(e){return e.headers.length&&(e.headers.length>1||null!=e.headers[0].name)})),t.sort((function(e,t){return t.cachedAt.getTime()-e.cachedAt.getTime()})),[2,t.length?t[0].headers:void 0]}}))}))}function ze(e){return e.match(/[^/]+(?=\..+$)/)[0]}function Oe(e){return q(e,[187,187,187,187,187,187,187,187])}var qe=function(){function e(e,t){this.memsize=e,this._data=t}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this._data.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteLength",{get:function(){return this._data.byteLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteOffset",{get:function(){return this._data.byteOffset},enumerable:!1,configurable:!0}),e.prototype.getSizeT=function(e){return 4===this.memsize?this._data.getUint32(e,!0):Number(this._data.getBigUint64(e,!0))},e.prototype.getBigInt64=function(e){return this._data.getBigInt64(e,!0)},e.prototype.getBigUint64=function(e){return this._data.getBigUint64(e,!0)},e.prototype.getFloat32=function(e){return this._data.getFloat32(e,!0)},e.prototype.getFloat64=function(e){return this._data.getFloat64(e,!0)},e.prototype.getInt8=function(e){return this._data.getInt8(e)},e.prototype.getInt16=function(e){return this._data.getInt16(e,!0)},e.prototype.getInt32=function(e){return this._data.getInt32(e,!0)},e.prototype.getUint8=function(e){return this._data.getUint8(e)},e.prototype.getUint16=function(e){return this._data.getUint16(e,!0)},e.prototype.getUint32=function(e){return this._data.getUint32(e,!0)},e}();function je(e,t){var r=0,n=0,i=e.flatMap((function(e){var t=fe(e,r,n,Ae);return r=t.unknownNum,n=t.undefinedNum,t.fields})),a=Math.max.apply(Math,i.map((function(e){return e[0].length}))),s=i.map((function(e){return e[0]=e[0].padEnd(a," "),"  "+e[0]+" "+e[1]})).join("\n");return"type "+ze(t)+" struct {\n"+s+"\n}"}function Ae(e){var t,r=e.type.boolean,n=e.type.integer,i=e.type.decimal,a=e.type.string,s=null===(t=e.type.ref)||void 0===t?void 0:t.array,o=e.type.key,l=(null===n||void 0===n?void 0:n.size)||(null===i||void 0===i?void 0:i.size)||e.length;if(n){if(1===l&&n.unsigned&&!s)return"uint8";if(2===l&&n.unsigned&&!s)return"uint16";if(4===l&&n.unsigned&&!s)return"uint32";if(8===l&&n.unsigned&&!s)return"uint64";if(1===l&&!n.unsigned&&!s)return"uint8";if(2===l&&!n.unsigned&&!s)return"uint16";if(4===l&&!n.unsigned&&!s)return"int32";if(8===l&&!n.unsigned&&!s)return"int64";if(1===l&&n.unsigned&&s)return"[]uint8";if(2===l&&n.unsigned&&s)return"[]uint16";if(4===l&&n.unsigned&&s)return"[]uint32";if(8===l&&n.unsigned&&s)return"[]uint64";if(1===l&&!n.unsigned&&s)return"[]uint8";if(2===l&&!n.unsigned&&s)return"[]uint16";if(4===l&&!n.unsigned&&s)return"[]int32";if(8===l&&!n.unsigned&&s)return"[]int64"}if(i){if(4===l&&!s)return"float32";if(8===l&&!s)return"float64";if(4===l&&s)return"[]float32";if(8===l&&s)return"[]float64"}return r?s?"[]bool":"bool":a?s?"[]string":"string":o&&o.foreign?s?"[]int64":"*int64":o&&!o.foreign?s?"[]int32":"*int32":{byte:"uint8"}}function Fe(e,t){var r=0,n=0,i=e.flatMap((function(e){var t=fe(e,r,n,Ve);return r=t.unknownNum,n=t.undefinedNum,t.fields})),a=i.map((function(e){return"        ('"+e[0]+"', Field(\n            name='"+e[0]+"',\n            type='"+e[1]+"',\n        )),"})).join("\n");return"'"+ze(t)+".dat': File(\n    fields=OrderedDict((\n"+a+"\n    )),\n),"}function Ve(e){var t,r=e.type.boolean,n=e.type.integer,i=e.type.decimal,a=e.type.string,s=null===(t=e.type.ref)||void 0===t?void 0:t.array,o=e.type.key,l=(null===n||void 0===n?void 0:n.size)||(null===i||void 0===i?void 0:i.size)||e.length;if(n){if(1===l&&n.unsigned&&!s)return"ubyte";if(2===l&&n.unsigned&&!s)return"ushort";if(4===l&&n.unsigned&&!s)return"uint";if(8===l&&n.unsigned&&!s)return"ulong";if(1===l&&!n.unsigned&&!s)return"byte";if(2===l&&!n.unsigned&&!s)return"short";if(4===l&&!n.unsigned&&!s)return"int";if(8===l&&!n.unsigned&&!s)return"long";if(1===l&&n.unsigned&&s)return"ref|list|ubyte";if(2===l&&n.unsigned&&s)return"ref|list|ushort";if(4===l&&n.unsigned&&s)return"ref|list|uint";if(8===l&&n.unsigned&&s)return"ref|list|ulong";if(1===l&&!n.unsigned&&s)return"ref|list|byte";if(2===l&&!n.unsigned&&s)return"ref|list|short";if(4===l&&!n.unsigned&&s)return"ref|list|int";if(8===l&&!n.unsigned&&s)return"ref|list|long"}if(i){if(4===l&&!s)return"float";if(8===l&&!s)return"double";if(4===l&&s)return"ref|list|float";if(8===l&&s)return"ref|list|double"}return r?s?"ref|list|bool":"bool":a?s?"ref|list|ref|string":"ref|string":o&&o.foreign?s?"ref|list|ulong":"ulong":o&&!o.foreign?s?"ref|list|ref|generic":"ref|generic":{byte:"ubyte"}}function Te(e,t){var r=0,n=0,i=e.flatMap((function(e){var t=fe(e,r,n,Ie);return r=t.unknownNum,n=t.undefinedNum,t.fields})),a=i.map((function(e){return"  "+e[1]+" "+e[0]+";"})).join("\n");return"#include <stdbool.h>\n#include <stdint.h>\n#include <uchar.h>\n\n#pragma pack(push, 1)\ntypedef struct "+ze(t)+" {\n"+a+"\n} "+ze(t)+";\n#pragma pack(pop)"}function Ie(e){var t,r=e.type.boolean,n=e.type.integer,i=e.type.decimal,a=e.type.string,s=null===(t=e.type.ref)||void 0===t?void 0:t.array,o=e.type.key,l=(null===n||void 0===n?void 0:n.size)||(null===i||void 0===i?void 0:i.size)||e.length;if(n){if(1===l&&n.unsigned&&!s)return"uint8_t";if(2===l&&n.unsigned&&!s)return"uint16_t";if(4===l&&n.unsigned&&!s)return"uint32_t";if(8===l&&n.unsigned&&!s)return"uint64_t";if(1===l&&!n.unsigned&&!s)return"int8_t";if(2===l&&!n.unsigned&&!s)return"int16_t";if(4===l&&!n.unsigned&&!s)return"int32_t";if(8===l&&!n.unsigned&&!s)return"int64_t";if(1===l&&n.unsigned&&s)return"struct { size_t size; uint8_t* offset; }";if(2===l&&n.unsigned&&s)return"struct { size_t size; uint16_t* offset; }";if(4===l&&n.unsigned&&s)return"struct { size_t size; uint32_t* offset; }";if(8===l&&n.unsigned&&s)return"struct { size_t size; uint64_t* offset; }";if(1===l&&!n.unsigned&&s)return"struct { size_t size; int8_t* offset; }";if(2===l&&!n.unsigned&&s)return"struct { size_t size; int16_t* offset; }";if(4===l&&!n.unsigned&&s)return"struct { size_t size; int32_t* offset; }";if(8===l&&!n.unsigned&&s)return"struct { size_t size; int64_t* offset; }"}if(i){if(4===l&&!s)return"float";if(8===l&&!s)return"double";if(4===l&&s)return"struct { size_t size; float* offset; }";if(8===l&&s)return"struct { size_t size; double* offset; }"}return r?s?"struct { size_t size; bool* offset; }":"bool":a?s?"struct { size_t size; char16_t** offset; }":"char16_t*":o&&o.foreign?s?"struct { size_t size; struct { size_t rid; void* unknown; } *offset; }":"{ size_t rid; void* unknown; }":o&&!o.foreign?s?"struct { size_t size; size_t* offset; }":"size_t":{byte:"uint8_t"}}function De(e,t){return JSON.stringify({name:ze(t),headers:Me(e)},null,2)}function Me(e){return e.map((function(e){return{name:e.name,length:e.type.ref||e.type.key?void 0:e.length,type:Object(d["a"])(Object(d["a"])({},e.type),{byteView:void 0})}}))}function Ne(e,t){var r;if(e.length)return e.length;if(null===(r=e.type.ref)||void 0===r?void 0:r.array)return 2*t;if(e.type.string)return t;if(e.type.key)return e.type.key.foreign?2*t:t;throw new Error("Corrupted header")}function Pe(e,t){var r,n=e.type.boolean,i=e.type.integer,a=e.type.decimal,s=e.type.string,o=null===(r=e.type.ref)||void 0===r?void 0:r.array,l=e.type.key,c=(null===i||void 0===i?void 0:i.size)||(null===a||void 0===a?void 0:a.size),u=t.length-e.offset,f=t[e.offset];if(i){if(1===c&&!o)return u>=1;if(2===c&&!o)return u>=2;if(4===c&&!o)return u>=4;if(8===c&&!o)return u>=8;if(1===c&&o)return f.refArray&&!0;if(2===c&&o)return f.refArray&&f.refArray.short;if(4===c&&o)return f.refArray&&f.refArray.long;if(8===c&&o)return f.refArray&&f.refArray.longLong}if(a){if(4===c&&!o)return u>=4;if(8===c&&!o)return u>=8;if(4===c&&o)return f.refArray&&f.refArray.long;if(8===c&&o)return f.refArray&&f.refArray.longLong}return n?o?f.refArray&&f.refArray.boolean:f.bMax<=1:s?o?f.refArray&&f.refArray.string:f.refString:l&&l.foreign?o?f.refArray&&f.refArray.keyForeign:u>=e.length:l&&!l.foreign?o?f.refArray&&f.refArray.keySelf:f.keySelf:u>=e.length}var Le={inject:["viewer"],data:function(){return{format:"pypoe"}},computed:{pypoe:function(){var e=this.viewer,t=e.headers,r=e.datFile;return Fe(t,r.meta.ggpkPath)},pogo:function(){var e=this.viewer,t=e.headers,r=e.datFile;return je(t,r.meta.ggpkPath)},clang:function(){var e=this.viewer,t=e.headers,r=e.datFile;return Te(t,r.meta.ggpkPath)},json:function(){var e=this.viewer,t=e.headers,r=e.datFile;return De(t,r.meta.ggpkPath)}}},$e=Le,Re=r("c57a");function Be(e){this["$style"]=Re["default"].locals||Re["default"]}var Ee=Object(P["a"])($e,ce,ue,!1,Be,null,null),He=Ee.exports,Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row bg-white",staticStyle:{width:"820px","max-width":"80vw"}},[r("div",{staticClass:"flex-1 q-pa-md"},[r("div",{staticClass:"flex items-center"},[r("q-linear-progress",{staticStyle:{width:"4rem"},attrs:{rounded:"",size:"0.75rem",value:1,color:"brown-4"}}),r("div",{staticClass:"q-ml-sm"},[e._v("Octet is part of String")])],1),r("div",{staticClass:"flex items-center"},[r("q-linear-progress",{staticStyle:{width:"4rem"},attrs:{rounded:"",size:"0.75rem",value:1,color:"teal-4"}}),r("div",{staticClass:"q-ml-sm"},[e._v("Octet is part of Array")])],1),r("div",{staticClass:"flex items-center"},[r("q-linear-progress",{staticStyle:{width:"4rem"},attrs:{rounded:"",size:"0.75rem",value:1,color:"grey-10"}}),r("div",{staticClass:"q-ml-sm"},[e._v("All bytes in column are 00")])],1),r("div",{staticClass:"flex items-center"},[r("q-linear-progress",{staticStyle:{width:"4rem"},attrs:{rounded:"",size:"0.75rem",value:1,color:"pink-4"}}),r("div",{staticClass:"q-ml-sm"},[e._v("Octet is part of NULL")])],1),r("q-separator",{attrs:{spaced:""}}),r("div",[e._v("Mouse-over octet statistics bar to see the MAX byte value in column.")]),r("q-separator",{attrs:{spaced:""}}),r("div",[e._v("Dat format has reserved "),r("q-badge",{staticClass:"font-mono",attrs:{color:"grey-8"}},[e._v("fe fe fe fe (x32)")]),e._v(" and "),r("q-badge",{staticClass:"font-mono",attrs:{color:"grey-8"}},[e._v("fe fe fe fe fe fe fe fe (x64)")]),e._v(" for NULL value.")],1)],1),r("q-markup-table",[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v("Type")]),r("th",{staticClass:"text-left"},[e._v("C/C++ type")]),r("th",{staticClass:"text-right"},[e._v("x32_64")]),r("th",{staticClass:"text-right"},[e._v("x32 size")]),r("th",{staticClass:"text-right"},[e._v("x64 size")])])]),r("tbody",[r("tr",[r("td",{staticClass:"text-left"},[e._v("String")]),r("td",{staticClass:"text-left"},[e._v("char16_t*")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("4")]),r("td",{staticClass:"text-right"},[e._v("8")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Array")]),r("td",{staticClass:"text-left"},[e._v("{ size_t; void* }")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("4 + 4")]),r("td",{staticClass:"text-right"},[e._v("8 + 8")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Key (foreign)")]),r("td",{staticClass:"text-left"},[e._v("{ size_t; void* }")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("4 + 4")]),r("td",{staticClass:"text-right"},[e._v("8 + 8")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Key (self)")]),r("td",{staticClass:"text-left"},[e._v("size_t")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("4")]),r("td",{staticClass:"text-right"},[e._v("8")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Decimal")]),r("td",{staticClass:"text-left"},[e._v("double")]),r("td",{staticClass:"text-right"},[e._v("8")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Decimal")]),r("td",{staticClass:"text-left"},[e._v("float")]),r("td",{staticClass:"text-right"},[e._v("4")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Integer")]),r("td",{staticClass:"text-left"},[e._v("int64_t / uint64_t")]),r("td",{staticClass:"text-right"},[e._v("8")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Integer")]),r("td",{staticClass:"text-left"},[e._v("int32_t / uint32_t")]),r("td",{staticClass:"text-right"},[e._v("4")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Integer")]),r("td",{staticClass:"text-left"},[e._v("int16_t / uint16_t")]),r("td",{staticClass:"text-right"},[e._v("2")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Integer")]),r("td",{staticClass:"text-left"},[e._v("int8_t / uint8_t")]),r("td",{staticClass:"text-right"},[e._v("1")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])]),r("tr",[r("td",{staticClass:"text-left"},[e._v("Boolean")]),r("td",{staticClass:"text-left"},[e._v("bool")]),r("td",{staticClass:"text-right"},[e._v("1")]),r("td",{staticClass:"text-right"},[e._v("-")]),r("td",{staticClass:"text-right"},[e._v("-")])])])])],1)},Ue=[],Ge={},Ke=Object(P["a"])(Ge,Qe,Ue,!1,null,null,null),Ye=Ke.exports,Je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticStyle:{"max-width":"80vw"}},[r("q-card-section",[r("div",{staticClass:"q-gutter-xs flex items-baseline"},[r("q-input",{staticStyle:{width:"200px"},attrs:{value:"patch.poecdn.com/patch/",filled:"",hint:"Patch CDN",readonly:"",dense:""}}),r("q-input",{staticStyle:{width:"100px"},attrs:{filled:"",hint:"Patch #",dense:"",placeholder:"3.11.x.x.x"},model:{value:e.poePatch,callback:function(t){e.poePatch="string"===typeof t?t.trim():t},expression:"poePatch"}}),r("q-input",{staticStyle:{width:"250px"},attrs:{filled:"",hint:"Path inside GGPK",dense:"",placeholder:"/Data/BaseItemTypes.dat64"},model:{value:e.ggpkPath,callback:function(t){e.ggpkPath="string"===typeof t?t.trim():t},expression:"ggpkPath"}}),r("q-btn",{attrs:{label:"Import",color:"primary",loading:e.isCdnImportRunning},on:{click:e.cdnImport}})],1)]),r("q-separator"),r("q-card-section",[r("div",{staticClass:"flex items-baseline"},[r("q-file",{staticStyle:{"max-width":"250px"},attrs:{label:"Pick local file",accept:".dat,.dat64",filled:"",dense:""},on:{input:e.handleFile}}),r("q-space"),r("div",{staticClass:"text-caption text-italic text-grey-7 q-mr-sm"},[e._v(e._s((e.totalSize/1e6).toFixed(2))+" MB stored")]),r("q-btn",{attrs:{label:"Recent files",flat:"","no-caps":"",dense:"","icon-right":e.fasAngleDown,"text-color":"grey-8"},on:{click:function(t){e.showRecent=!e.showRecent}}})],1),r("q-slide-transition",[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.showRecent,expression:"!showRecent"}]},[r("div",{staticClass:"q-pt-sm"},[e._v(" Or import "),r("a",{staticClass:"q-link text-primary",staticStyle:{"border-bottom":"1px dashed currentColor"},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.importDemo(t)}}},[e._v("demo file")])])])]),r("q-slide-transition",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showRecent,expression:"showRecent"}]},[r("div",{staticClass:"q-pt-sm"},[r("q-space")],1),r("q-markup-table",{staticClass:"q-mt-xs scroll",staticStyle:{"max-height":"40vh"},attrs:{flat:"",bordered:""}},[r("thead",[r("tr",[r("th",{staticClass:"text-left text-grey-7 no-border",staticStyle:{"font-size":"0.875rem","font-weight":"normal"},attrs:{colspan:"4"}},[e._v("Recent files")])])]),r("tbody",e._l(e.cacheFiles,(function(t){return r("tr",{key:t.sha256},[r("td",{staticClass:"text-left"},[r("div",[r("span",{staticClass:"text-weight-medium"},[e._v(e._s(t.ggpkPath))]),t.patch?r("span",{staticClass:"text-grey-8"},[e._v(" - "+e._s(t.patch))]):e._e()]),r("div",{staticClass:"text-caption text-grey-8"},[e._v(" SHA-256: "+e._s(t.sha256.substr(0,7))+"… ")])]),r("td",{staticClass:"text-right"},[e._v(" "+e._s(t.cachedAt.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"}))+" ")]),r("td",{staticClass:"text-right"},[e._v(" "+e._s((t.size/1e6).toFixed(2))+" MB ")]),r("td",{staticClass:"text-right"},[r("div",{staticClass:"text-grey-8 q-gutter-xs"},[r("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",dense:"",label:"Delete",outline:""},on:{click:function(r){return e.remove(t.sha256)}}}),r("q-btn",{attrs:{size:"12px",dense:"",label:"Open",color:"primary"},on:{click:function(r){return e.open(t.sha256)}}})],1)])])})),0)])],1)])],1)],1)},We=[],Xe=r("d272"),Ze=[{name:"Id",type:{ref:{array:!1},string:{}}},{name:"ItemClassesKey",type:{key:{foreign:!0}}},{name:"Width",length:4,type:{integer:{unsigned:!0,size:4}}},{name:"Height",length:4,type:{integer:{unsigned:!0,size:4}}},{name:"Name",type:{ref:{array:!1},string:{}}}],et={created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.fasAngleDown=Xe["a"],t.next=3,ge();case 3:e.cacheFiles=t.sent;case 4:case"end":return t.stop()}}),t)})))()},inject:["app","viewer"],data:function(){return{showRecent:!1,poePatch:"",ggpkPath:"",isCdnImportRunning:!1,cacheFiles:[]}},computed:{totalSize:function(){return this.cacheFiles.reduce((function(e,t){return e+t.size}),0)}},methods:{handleFile:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ce(e);case 3:return n=r.sent,r.next=6,ge();case 6:return t.cacheFiles=r.sent,r.next=9,t.commonImport(n,!0);case 9:r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),t.$q.notify({color:"negative",message:r.t0.message,progress:!0});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},cdnImport:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isCdnImportRunning=!0,t.next=4,_e(e.poePatch,e.ggpkPath);case 4:return r=t.sent,t.next=7,ge();case 7:return e.cacheFiles=t.sent,t.next=10,e.commonImport(r,!0);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.$q.notify({color:"negative",message:t.t0.message,progress:!0});case 15:return t.prev=15,e.isCdnImportRunning=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})))()},importDemo:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.poePatch="3.11.1.6.2",e.ggpkPath="Data/Russian/BaseItemTypes.dat",e.isCdnImportRunning=!0,t.next=6,_e(e.poePatch,e.ggpkPath);case 6:return r=t.sent,t.next=9,ge();case 9:return e.cacheFiles=t.sent,t.next=12,e.commonImport(r,!1,!0);case 12:return t.prev=12,t.next=15,e.viewer.tryImportHeaders(Ze);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](12),console.error(t.t0);case 20:t.next=25;break;case 22:t.prev=22,t.t1=t["catch"](0),e.$q.notify({color:"negative",message:t.t1.message,caption:"You may need to adjust the patch version.",progress:!0});case 25:return t.prev=25,e.isCdnImportRunning=!1,t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[0,22,25,28],[12,17]])})))()},commonImport:function(e,t,r){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,n.$q.loading.show({delay:0}),i.next=4,n.viewer.loadDat(e);case 4:if(i.prev=4,!t||e.meta.headers.length){i.next=10;break}return i.next=8,ke(ze(e.meta.ggpkPath));case 8:a=i.sent,a&&(e.meta.headers=a);case 10:if(r){i.next=13;break}return i.next=13,n.viewer.tryImportHeaders(e.meta.headers);case 13:i.next=18;break;case 15:i.prev=15,i.t0=i["catch"](4),n.$q.notify({color:"warning",message:i.t0.message,progress:!0});case 18:n.app.importDialog=!1;case 19:return i.prev=19,n.$q.loading.hide(),i.finish(19);case 22:case"end":return i.stop()}}),i,null,[[0,,19,22],[4,15]])})))()},remove:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,ye(e);case 2:return r.next=4,ge();case 4:t.cacheFiles=r.sent;case 5:case"end":return r.stop()}}),r)})))()},open:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Se(e);case 3:return n=r.sent,r.next=6,t.commonImport(n,!1);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),t.$q.notify({color:"negative",message:r.t0.message,progress:!0});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}},tt=et,rt=Object(P["a"])(tt,Je,We,!1,null,null,null),nt=rt.exports,it=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticStyle:{width:"500px","max-width":"80vw"}},[r("q-card-section",[r("div",{staticClass:"text-h6"},[e._v("Settings")])]),r("q-card-section",[e._v(" There is nothing to configure here yet. Open an issue on GitHub for new settings. ")]),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""}},[e._v("Close")])],1)],1)},at=[],st={},ot=Object(P["a"])(st,it,at,!1,null,null,null),lt=ot.exports,ct=(r("fb6a"),r("c1f9"),10),ut={mustYield:function(e){return performance.now()-e>=ct},yield:function(){return new Promise((function(e){return requestAnimationFrame((function(t){e(t)}))}))}};function ft(e){return Object(d["b"])(this,void 0,void 0,(function(){var t,r,n,i,a,s,o,l,c,u,f,h,p,g,v;return Object(d["c"])(this,(function(d){switch(d.label){case 0:return t=function(t){return t<e.readerVariable.byteLength&&t>=4},r=new Array(e.rowLength).fill(void 0).map((function(t){return{b00:!0,b01:!0,bMax:0,nullableMemsize:!1,keySelf:!0,refString:!0,refArray:{boolean:!0,short:!0,long:!0,longLong:!0,string:!0,keyForeign:!0,keySelf:!0},memsize:e.memsize}})),[4,ut.yield()];case 1:n=d.sent(),i=0,d.label=2;case 2:if(!(i<e.rowLength))return[3,5];for(a=r[i],s=e.rowLength-i>=e.memsize,o=e.rowLength-i>=2*e.memsize,s||(a.refString=!1,a.keySelf=!1),o||(a.refArray=!1),l=0;l<e.rowCount;l+=1)if(c=l*e.rowLength,u=e.dataFixed[c+i],a.b00=a.b00&&0===u,a.b01=a.b01&&1===u,a.bMax=Math.max(a.bMax,u),!a.nullableMemsize&&s&&(a.nullableMemsize=254===u&&x(e.readerFixed.getSizeT(c+i),e.memsize)),a.refString&&(h=e.readerFixed.getSizeT(c+i),a.refString=t(h)&&dt(h,e.readerVariable)),a.keySelf&&(g=e.readerFixed.getSizeT(c+i),x(g,e.memsize)||(a.keySelf=g<e.rowCount)),a.refArray)if(f=e.readerFixed.getSizeT(c+i),h=e.readerFixed.getSizeT(c+i+e.memsize),t(h)&&t(h+1*f)){for(a.refArray.short=a.refArray.short&&t(h+2*f),a.refArray.long=a.refArray.long&&t(h+4*f),a.refArray.longLong=a.refArray.longLong&&t(h+8*f),a.refArray.string=a.refArray.string&&t(h+e.memsize*f),a.refArray.keySelf=a.refArray.keySelf&&t(h+e.memsize*f),a.refArray.keyForeign=a.refArray.keyForeign&&t(h+2*e.memsize*f),v=0;v<f&&a.refArray.string;v+=1)p=e.readerVariable.getSizeT(h+e.memsize*v),a.refArray.string=t(p)&&dt(p,e.readerVariable);for(v=0;v<f&&a.refArray.keySelf;v+=1)g=e.readerVariable.getSizeT(h+e.memsize*v),x(g,e.memsize)||(a.refArray.keySelf=g<e.rowCount);for(v=0;v<f&&a.refArray.boolean;v+=1)a.refArray.boolean=e.dataVariable[h+v]<=1;a.refArray.string||a.refArray.longLong||a.refArray.long||a.refArray.short||a.refArray.boolean||(a.refArray=!1)}else 0===f&&h===e.readerVariable.byteLength||(a.refArray=!1);return ut.mustYield(n)?[4,ut.yield()]:[3,4];case 3:n=d.sent(),d.label=4;case 4:return i+=1,[3,2];case 5:return[2,r]}}))}))}function dt(e,t){while(1){if(e+3>=t.byteLength)return!1;var r=t.getUint16(e),n=t.getUint16(e+2);if(0===r&&0===n)break;if(r>55295&&r<57344){if(r>56319)return!1;if(n<56320||n>57343)return!1;e+=4}else e+=2}return!0}var ht=function(){function e(){this.exportSchemaDialog=!1,this.helpDialog=!1,this.importDialog=!0,this.settingsDialog=!1,this.config={rowNumStart:0,colNumStart:0},this.viewers=[],this.viewers.push({instance:new gt(this)})}return e}(),pt=4,gt=function(){function e(e){this.app=e,this.headers=[],this.columns=[],this.datFile=null,this.columnStats=[],this.rowNumberLength=-1,this.editHeader=null,this.rowSorting=null}return e.prototype.loadDat=function(e){return Object(d["b"])(this,void 0,void 0,(function(){var t,r;return Object(d["c"])(this,(function(n){switch(n.label){case 0:return t=this.app,r=this,[4,ft(e)];case 1:return r.columnStats=n.sent(),this.rowNumberLength=T(e.rowCount,t.config.rowNumStart,pt),this.datFile=e,this.columns=this.stateColumns(this.columnStats),this.rowSorting=null,e.rowLength?this.headers=[{name:null,offset:0,length:e.rowLength,type:ee()}]:this.headers=[],[2]}}))}))},e.prototype.stateColumns=function(e){for(var t=this.app,r=new Array(e.length).fill(void 0).map((function(r,n){return{offset:n,colNum99:String((n+t.config.colNumStart)%100).padStart(2,"0"),colNum100:String(n+t.config.colNumStart).padStart(2,"0"),selected:!1,header:null,dataStart:!1,stats:{string:!1,array:!1,b00:e[n].b00,bMax:e[n].bMax.toString(16).padStart(2,"0"),nullable:!1}}})),n=0;n<e.length;n+=1){var i=e[n];if(i.refString)for(var a=0;a<i.memsize;a+=1)r[n+a].stats.string=!0;if(i.refArray)for(a=0;a<2*i.memsize;a+=1)r[n+a].stats.array=!0;if(i.nullableMemsize)for(a=0;a<i.memsize;a+=1)r[n+a].stats.nullable=!0}return r},e.prototype.tryImportHeaders=function(e){return Object(d["b"])(this,void 0,void 0,(function(){var t,r,n,i,a,s,o,l,c,u,f,h,p,g;return Object(d["c"])(this,(function(d){switch(d.label){case 0:return t=this,r=t.datFile,n=t.columns,i=t.columnStats,a=t.headers,[4,ut.yield()];case 1:s=d.sent(),o=0,l=0,c=e,d.label=2;case 2:if(!(l<c.length))return[3,5];if(u=c[l],f=Ne(u,r.memsize),null==u.name)return o+=f,[3,4];if(h={length:f,offset:o,type:u.type},p=Pe(h,i),!p)throw new Error("The schema is invalid.");return E(h,n),h=re(n,a),h.name=u.name,Q(n),g=u.type,(g.boolean||g.decimal||g.integer||g.key||g.string)&&(h.type=g,I(h,this.datFile),this.disableByteView(h)),o+=f,ut.mustYield(s)?[4,ut.yield()]:[3,4];case 3:s=d.sent(),d.label=4;case 4:return l++,[3,2];case 5:return[2]}}))}))},e.prototype.saveHeadersToFileCache=function(){return Object(d["b"])(this,void 0,void 0,(function(){return Object(d["c"])(this,(function(e){switch(e.label){case 0:return[4,we(Me(this.headers),this.datFile.meta.sha256)];case 1:return e.sent(),[2]}}))}))},e.prototype.disableByteView=function(e){var t=this.columns;e.type.byteView=void 0;var r=t.findIndex((function(t){return t.offset===e.offset}));t.splice(r+1,e.length-1),t[r].header=e,t[r].selected=!1},e.prototype.enableByteView=function(e){var t=this,r=t.columns,n=t.columnStats;e.type.byteView={array:!1};var i=r.findIndex((function(t){return t.offset===e.offset})),a=this.stateColumns(n);r.splice.apply(r,Object(d["d"])([i+1,0],a.slice(e.offset+1,e.offset+e.length))),r[i].header=null},e.prototype.collectData=function(){var e=this,t=this.headers.filter((function(e){var t=e.type;return t.boolean||t.decimal||t.integer||t.key||t.string})).map((function(t,r){var n;return{name:t.name||"Unknown"+(r+1),data:(null===(n=t.cachedView)||void 0===n?void 0:n.entriesRaw)||O(t,e.datFile)}}));return Array(this.datFile.rowCount).fill(void 0).map((function(e,r){return Object.fromEntries(t.map((function(e){return[e.name,e.data[r]]})))}))},e}(),vt=r("21a6"),mt=r.n(vt),yt={components:{ViewerHead:W,HeaderProps:le,DataRow:$,ExportSchema:He,HelpContent:Ye,ImportDialog:nt,SettingsDialog:lt},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge();case 2:if(r=t.sent,!r.length){t.next=20;break}return e.$q.loading.show({delay:0}),t.prev=5,t.next=8,Se(r[0].sha256);case 8:return n=t.sent,t.next=11,e.viewer.loadDat(n);case 11:return t.next=13,e.viewer.tryImportHeaders(n.meta.headers);case 13:e.$q.notify({color:"primary",message:"Previous session successfully restored",caption:"You can close Import dialog.",timeout:1250}),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](5),console.error(t.t0);case 19:e.$q.loading.hide();case 20:case"end":return t.stop()}}),t,null,[[5,16]])})))()},provide:function(){return{viewer:this.viewer,app:this.app}},data:function(){var e=new ht;return{app:e,viewer:e.viewers[0].instance}},computed:{rowComponent:function(){return $},rowFormat:function(){return j(this.viewer.columns)},selections:function(){return U(this.viewer.columns).map((function(e){return e.map((function(e){return e.colNum100})).join(" ")}))},rows:function(){return this.viewer.datFile?this.viewer.rowSorting?this.viewer.rowSorting:new Array(this.viewer.datFile.rowCount).fill(void 0).map((function(e,t){return t})):[]},appVersion:function(){return"1.1.0"}},methods:{defineColumn:function(){var e=this.viewer;e.editHeader=re(e.columns,e.headers),Q(e.columns),e.saveHeadersToFileCache()},exportDataJson:function(){var e=this.viewer.collectData();mt.a.saveAs(new File([JSON.stringify(e,null,2)],"".concat(ze(this.viewer.datFile.meta.ggpkPath),".json"),{type:"application/json;charset=utf-8"}))}}},bt=yt,wt=(r("01e5"),Object(P["a"])(bt,o,l,!1,null,null,null)),xt=wt.exports,_t={name:"App",components:{Analyze:xt}},Ct=_t,St=(r("5c0b"),Object(P["a"])(Ct,a,s,!1,null,null,null)),kt=St.exports,zt=(r("0e21"),r("b3f7")),Ot=r("b05d"),qt=r("9c40"),jt=r("a12b"),At=r("4983"),Ft=r("e7a9"),Vt=r("27f9"),Tt=r("6a67"),It=r("9f0a"),Dt=r("9564"),Mt=r("24e8"),Nt=r("7f67"),Pt=r("f09f"),Lt=r("4b7e"),$t=r("a370"),Rt=r("2c91"),Bt=r("7460"),Et=r("429b"),Ht=r("823b"),Qt=r("adad"),Ut=r("eb85"),Gt=r("2bb1"),Kt=r("6b1d"),Yt=r("58a8"),Jt=r("7d53"),Wt=r("e9c1"),Xt=r("0016"),Zt=r("66e5"),er=r("4074"),tr=r("0170"),rr=r("1c1c"),nr=r("2a19"),ir=r("f508");i["a"].use(Ot["a"],{config:{},components:{QOptionGroup:It["a"],QBtnToggle:Tt["a"],QInput:Vt["a"],QBtnGroup:Ft["a"],QScrollArea:At["a"],QVirtualScroll:jt["a"],QBtn:qt["a"],QToggle:Dt["a"],QDialog:Mt["a"],QCard:Pt["a"],QCardActions:Lt["a"],QCardSection:$t["a"],QSpace:Rt["a"],QTab:Bt["a"],QTabs:Et["a"],QTabPanel:Ht["a"],QTabPanels:Qt["a"],QSeparator:Ut["a"],QMarkupTable:Gt["a"],QLinearProgress:Kt["a"],QBadge:Yt["a"],QFile:Jt["a"],QSlideTransition:Wt["a"],QIcon:Xt["a"],QItem:Zt["a"],QItemSection:er["a"],QItemLabel:tr["a"],QList:rr["a"]},directives:{ClosePopup:Nt["a"]},plugins:{Notify:nr["a"],Loading:ir["a"]},iconSet:zt["a"]}),i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(kt)}}).$mount("#app")}});
//# sourceMappingURL=app.08bb8180.js.map