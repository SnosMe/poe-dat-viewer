var ht=Object.defineProperty,pt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var ke=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var xe=(e,t,n)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oe=(e,t)=>{for(var n in t||(t={}))vt.call(t,n)&&xe(e,n,t[n]);if(ke)for(var n of ke(t))mt.call(t,n)&&xe(e,n,t[n]);return e},ae=(e,t)=>pt(e,yt(t));import{r as Ce,w as gt,t as ye,s as $,o as bt,b as ve,a as ie,p as U,d as wt,c as T,e as X,f as Me,g as _t,h as me,i as q,j as Te,k as p,l as ge,m as N,n as m,q as $t,u as v,v as g,x,y as d,z as b,A as B,B as St,C as kt,D as w,E as be,F as ze,G as _,H as z,I as M,J as Ie,K as Re,L as F,M as re,N as xt,O as Ee,P as Pe,Q as Ct,R as E,S as H,T as Mt,U as Tt,V as zt,W as It,X as Rt,Y as Et}from"./vendor.79c0e264.js";const Pt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};Pt();const Lt="Bundles2",D=Ce({totalSize:0,received:0,active:!1,bundleName:""});async function we(e,t){if(e==null&&(e=localStorage.getItem("POE_PATCH_VER"),!e))throw new Error("never");try{return await Ht(e,t)}catch(n){throw window.alert("You may need to adjust the patch version."),n}}async function Ht(e,t){const n=`${e}/${Lt}/${t}`;let l=await caches.open("bundles"),o=await l.match(n);if(!o){if(D.totalSize=0,D.received=0,D.active=!0,D.bundleName=t,o=await fetch(`https://poe-bundles.snos.workers.dev/${n}`),o.status!==200)throw D.active=!1,new Error(`patchcdn: ${o.status} ${o.statusText}`);D.totalSize=Number(o.headers.get("content-length"));let a;try{const s=o.body.getReader(),i=[];for(;;){const{done:u,value:h}=await s.read();if(u)break;i.push(h),D.received+=h.length}a=new Uint8Array(D.received);let f=0;for(const u of i)a.set(u,f),f+=u.length}finally{D.active=!1}return localStorage.getItem("POE_PATCH_VER")!==e&&(await caches.delete("bundles"),l=await caches.open("bundles")),await l.put(n,new Response(a,{headers:{"content-length":String(a.byteLength),"content-type":"application/octet-stream"}})),a.buffer}return await o.arrayBuffer()}function Dt(){return new Worker("/poe-dat-viewer/assets/script.aed4df77.js",{type:"module"})}const de=gt(new Dt);async function Le(e){return await de.decompressSliceInBundle(ye(e,[e]))}async function He(e,t,n){return await de.decompressSliceInBundle(ye(e,[e]),t,n)}async function De(e,t){return await de.analyzeDatFile(ye(e,(t==null?void 0:t.transfer)?[e.dataFixed.buffer]:[]))}async function Ot(e,t,n){return await de.getBatchFileInfo(e,t,n)}const ue=$([]),_e=bt("poe-dat-viewer",3,{upgrade(e){e.createObjectStore("dat-schemas",{keyPath:"name"})}});async function Oe(e){const t=await(await _e).get("dat-schemas",e);return(t==null?void 0:t.headers)||At(e)||[]}async function Ft(e,t){await(await _e).put("dat-schemas",{name:e,headers:Bt(t)})}async function Vt(e){await(await _e).delete("dat-schemas",e)}function Bt(e){return e.map(t=>ae(oe({},t),{length:t.type.string||t.type.array||t.type.key||t.type.boolean||t.type.decimal||t.type.integer?void 0:t.length}))}function At(e){const t=ue.value.find(n=>n.name===e);return t?t.columns.map(n=>{var l,o;return{name:n.name||"",type:{array:n.array,byteView:n.type==="array"?{array:!0}:void 0,integer:n.type==="u8"?{unsigned:!0,size:1}:n.type==="u16"?{unsigned:!0,size:2}:n.type==="u32"?{unsigned:!0,size:4}:n.type==="u64"?{unsigned:!0,size:8}:n.type==="i8"?{unsigned:!1,size:1}:n.type==="i16"?{unsigned:!1,size:2}:n.type==="i32"?{unsigned:!1,size:4}:n.type==="i64"?{unsigned:!1,size:8}:void 0,decimal:n.type==="f32"?{size:4}:n.type==="f64"?{size:8}:void 0,string:n.type==="string"?{}:void 0,boolean:n.type==="bool"?{}:void 0,key:n.type==="row"||n.type==="foreignrow"?{foreign:n.type==="foreignrow",table:(o=(l=n.references)==null?void 0:l.table)!=null?o:null,viewColumn:null}:void 0},textLength:4*3-1}}):null}const k=$(null);async function Wt(e){const t=ve.getFileInfo(e,k.value.bundlesInfo,k.value.filesInfo),n=await we(null,t.bundle),{slice:l}=await He(n.slice(0),t.offset,t.size);return l}async function Nt(e){const{slice:t}=await Le(e),n=ve.readIndexBundle(t),{slice:l}=await Le(n.pathRepsBundle.slice().buffer);k.value={bundlesInfo:n.bundlesInfo,filesInfo:n.filesInfo,dirsInfo:n.dirsInfo,pathReps:l,tableStats:ie([])}}async function Yt(e){const t=ve.getDirContent("Data",k.value.pathReps,k.value.dirsInfo).files.filter(o=>o.endsWith(".dat64"));e.value=t.length;const l=(await Ot(t,k.value.bundlesInfo,k.value.filesInfo)).reduce((o,a,s)=>{const i=o.find(u=>u.name===a.bundle),f=t[s];return i?i.files.push({fullPath:f,location:a}):o.push({name:a.bundle,files:[{fullPath:t[s],location:a}]}),o},[]);for(const o of l){let a=await we(null,o.name);for(const{fullPath:s,location:i}of o.files){const f=await He(a,i.offset,i.size);a=f.bundle;const u=U.readDatFile(s,f.slice),h=await De(u,{transfer:!0}),c=s.replace("Data/","").replace(".dat64",""),r=await Oe(c);let y=!0,S=!1;{let L=0;for(const J of r){if(J.name==null){y=!1;break}const Z=U.getHeaderLength(J,u);if(!wt.validateHeader(ae(oe({},J),{offset:L}),h)){y=!1;break}L+=Z}S=L<u.rowLength}k.value.tableStats.push({name:c,totalRows:u.rowCount,headersValid:y,increasedRowLength:S})}}}var I=(e,t)=>{for(const[n,l]of t)e[n]=l;return e};const jt=T({props:{tag:{type:String,default:"div"}},emits:["resize"],setup(e,t){const n=X(null);return Me(()=>{const l=new ResizeObserver(o=>{t.emit("resize",{width:o[0].contentRect.width,height:o[0].contentRect.height})});l.observe(n.value),_t(()=>{l.unobserve(n.value)})}),{rootEl:n}}});function Gt(e,t,n,l,o,a){return p(),me(Te(e.tag),{ref:"rootEl","data-role":"resize-observer"},{default:q(()=>[ge(e.$slots,"default")]),_:3},512)}var Fe=I(jt,[["render",Gt]]);const Ut="_scrollable_66dfd_2",Xt="_track_66dfd_8",qt="_y_66dfd_11",Kt="_x_66dfd_12",Jt="_thumb_66dfd_15";var Zt={scrollable:Ut,track:Xt,y:qt,x:Kt,thumb:Jt};const Qt=40,Ve=15,en=100,Be=(e,t)=>Math.max(1,Math.pow(e*(3/1e3)*t,2))*Math.sign(e);function Ae(e,t,n,l,o){var u;if(n<=t)return null;const a=Math.max(0,t-((u=l==null?void 0:l.fixedSize)!=null?u:0)),s=Math.max(Qt,Math.floor(t*a/n)),i=(a-s)/(n-t),f=Math.round(o*i);return{trackSize:a,thumbSize:s,fixedSize:e,thumbRatio:i,thumbPos:f}}function tn(e){let t=0,n=0,l=0,o=0,a=null,s=0,i=0;function f(r){r.button===1&&(r.preventDefault(),r.stopPropagation(),document.body.style.cursor="all-scroll",a=null,t=r.clientY,n=r.clientX,l=0,o=0,s=0,i=requestAnimationFrame(c),document.addEventListener("mousemove",h),document.addEventListener("mouseup",u),document.addEventListener("mouseleave",u))}function u(){cancelAnimationFrame(i),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",u),document.removeEventListener("mouseleave",u),document.body.style.removeProperty("cursor")}function h(r){const y=r.clientY-t,S=r.clientX-n;if(a===null)if(Math.abs(y)>Ve)a="vertical",document.body.style.cursor="ns-resize";else if(Math.abs(S)>Ve)a="horizontal",document.body.style.cursor="ew-resize";else return;a==="vertical"?l=y:o=S}function c(r){const y=r-(s||r);s=r,i=requestAnimationFrame(c),e(Be(o,y),Be(l,y))}return{handleMousedown:f}}function nn(e){function t(n){e(0,Math.sign(n.deltaY)*en)}return{handleMousewheel:t}}function We(e,t,n){let l=0,o=0;const a=t==="y"?"y":"x",s=t==="y"?"clientY":"clientX";function i(h){h.preventDefault(),h.stopPropagation();const c=h.currentTarget;if(l=c.getBoundingClientRect()[a],h.target!==c){const r=h.target;o=h[s]-r.getBoundingClientRect()[a]}else o=e.value.thumbSize/2,f(h),o=h[s]-l-e.value.thumbPos;document.addEventListener("mousemove",f),document.addEventListener("mouseup",u),document.addEventListener("mouseleave",u)}function f(h){const c=(h[s]-l-o)/e.value.thumbRatio;t==="x"?n(c,void 0):n(void 0,c)}function u(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",u),document.removeEventListener("mouseleave",u)}return{handleTrackMousedown:i}}const sn=T({props:{paintSize:{type:Object,required:!0},fullSize:{type:Object,required:!0},widthY:{type:Number,default:14},widthX:{type:Number,default:12}},emits:["scroll"],setup(e,t){const n=ie({y:0,x:0});N(()=>[e.paintSize,e.fullSize],()=>{const{paintSize:i,fullSize:f}=e;n.x=Math.max(0,Math.min(n.x,f.width-i.width)),n.y=Math.max(0,Math.min(n.y,f.height-i.height))},{deep:!0}),N(n,()=>{t.emit("scroll",{y:n.y,x:n.x})});const l=m(()=>Ae(e.widthY,e.paintSize.height,e.fullSize.height,null,n.y)),o=m(()=>Ae(e.widthX,e.paintSize.width,e.fullSize.width,l.value,n.x));function a(i,f){const{paintSize:u,fullSize:h}=e;n.y=Math.max(0,Math.min(n.y+Math.floor(f),h.height-u.height)),n.x=Math.max(0,Math.min(n.x+Math.floor(i),h.width-u.width))}function s(i,f){const{paintSize:u,fullSize:h}=e;i!==void 0&&(n.x=Math.max(0,Math.min(Math.floor(i),h.width-u.width))),f!==void 0&&(n.y=Math.max(0,Math.min(Math.floor(f),h.height-u.height)))}return{scrollbarY:l,scrollbarX:o,scrollPos:$t(n),scrollTo:s,scrollByDelta:a,handleMousedown:tn(a).handleMousedown,handleMousewheel:nn(a).handleMousewheel,handleTrackMousedownY:We(l,"y",s).handleTrackMousedown,handleTrackMousedownX:We(o,"x",s).handleTrackMousedown}}});function ln(e,t,n,l,o,a){return p(),v("div",{class:g(e.$style.scrollable),style:x({width:e.paintSize.width+"px",height:e.paintSize.height+"px"}),onMousedown:t[2]||(t[2]=(...s)=>e.handleMousedown&&e.handleMousedown(...s)),onWheel:t[3]||(t[3]=(...s)=>e.handleMousewheel&&e.handleMousewheel(...s))},[ge(e.$slots,"default"),e.scrollbarY?(p(),v("div",{key:0,class:g(`${e.$style.track} ${e.$style.y}`),onMousedown:t[0]||(t[0]=(...s)=>e.handleTrackMousedownY&&e.handleTrackMousedownY(...s)),style:x({width:e.scrollbarY.fixedSize+"px",height:e.scrollbarY.trackSize+"px"})},[d("div",{class:g(e.$style.thumb),style:x({transform:`translate(0, ${e.scrollbarY.thumbPos}px)`,width:e.scrollbarY.fixedSize+"px",height:e.scrollbarY.thumbSize+"px"})},null,6)],38)):b("",!0),e.scrollbarX?(p(),v("div",{key:1,class:g(`${e.$style.track} ${e.$style.x}`),onMousedown:t[1]||(t[1]=(...s)=>e.handleTrackMousedownX&&e.handleTrackMousedownX(...s)),style:x({width:e.scrollbarX.trackSize+"px",height:e.scrollbarX.fixedSize+"px"})},[d("div",{class:g(e.$style.thumb),style:x({transform:`translate(${e.scrollbarX.thumbPos}px, 0)`,width:e.scrollbarX.thumbSize+"px",height:e.scrollbarX.fixedSize+"px"})},null,6)],38)):b("",!0)],38)}const Ne={};Ne.$style=Zt;var Ye=I(sn,[["render",ln],["__cssModules",Ne]]);function on(e,t){for(let n=e.offset;n<e.offset+e.length;++n)t[n]=!0}function je(e,t,n,l){const o=Math.min(t,n),a=Math.max(t,n);l=l.filter(s=>s.type.byteView&&!s.type.byteView.array);for(let s=o;s<=a;++s)l.some(i=>s>=i.offset&&s<i.offset+i.length)&&(e[s]=!e[s])}function Ge(e){e.fill(!1)}function Ue(e){const t=[];let n=e.indexOf(!0),l;if(n<0)return t;for(l=n,t.push([l]),n+=1;n<e.length;++n)if(e[n]){const o=n;o-l==1?t[t.length-1].push(o):t.push([o]),l=o}return t}const Y=()=>({byteView:{array:!1}});function an(e,t){for(let n=0;n<t.length;){const l=t[n];l.name!=null&&e.some(o=>o>=l.offset&&o<l.offset+l.length)?qe(l,t):n+=1}}function Xe(e,t){const n=Ue(e);if(n.length===0)throw new Error("No bytes selected");if(n.length>1)throw new Error("Cannot create header from non-contiguous selection");const l=n[0];an(l,t);const o=t.find(i=>l[0]>=i.offset&&l[0]+l.length<=i.offset+i.length);let a=[{name:null,offset:o.offset,length:l[0]-o.offset,type:Y()},{name:"",offset:l[0],length:l.length,type:Y(),textLength:4*3-1},{name:null,offset:l[0]+l.length,length:o.length-(l[0]-o.offset+l.length),type:Y()}];const s=a[1];return a=a.filter(i=>i.length),t.splice(t.indexOf(o),1,...a),s}function qe(e,t){if(e.name==null)throw new Error("Cannot remove empty header");e.name=null,e.type=Y();for(let n=0;n<t.length-1;){const l=rn(t[n],t[n+1]);l?t.splice(n,2,l):n+=1}}function rn(e,t){return e.name===null&&t.name===null?{name:null,offset:e.offset,length:e.length+t.length,type:Y()}:null}function dn(e,t){const n=U.readDatFile(e,t),l={headers:$(n.rowLength?[{name:null,offset:0,length:n.rowLength,type:Y()}]:[]),datFile:n,name:fn(e),columnStats:$([]),columnSelection:$(new Array(n.rowLength).fill(!1)),editHeader:$(null),selectedRow:$(null),rowSorting:$(null),scrollPos:ie({x:0,y:0})};return De(l.datFile).then(async o=>{l.columnStats.value=o,await Ke(l)}),l}async function Ke(e){e.editHeader.value=null,e.headers.value=e.datFile.rowLength?[{name:null,offset:0,length:e.datFile.rowLength,type:Y()}]:[];const t=await Oe(e.name);try{un(t,e)}catch(n){window.alert(`WARN: ${n.message}`)}finally{B(e.headers)}}function un(e,t){let n=0;for(const l of e){const o=l.length||St(l,t.datFile);if(l.name==null){n+=o;continue}const a=ae(oe({},l),{length:o,offset:n});if(!(l.length?t.datFile.rowLength-a.offset>=a.length:kt(a,t.columnStats.value)))throw new Error("The schema is invalid.");on(a,t.columnSelection.value);const i=Xe(t.columnSelection.value,t.headers.value);Object.assign(i,a),Ge(t.columnSelection.value),n+=o}}function cn(e,t){const n=e.filter(({type:l})=>l.boolean||l.decimal||l.integer||l.key||l.string).map((l,o)=>({name:l.name||`Unknown${o+1}`,data:U.readColumn(l,t)}));return n.unshift({name:"_rid",data:Array(t.rowCount).fill(void 0).map((l,o)=>o)}),Array(t.rowCount).fill(void 0).map((l,o)=>Object.fromEntries(n.map(a=>[a.name,a.data[o]])))}function fn(e){return e.match(/[^/]+(?=\..+$)/)[0]}async function ce(e){await Ft(e.name,e.headers.value)}async function hn(e){await Vt(e.name)}const pn=T({props:{args:{type:Object,required:!0}},setup(e){return{text:m(()=>{var o,a,s,i,f,u,h;const{name:t,headers:n}=e.args;let l="";for(const c of n){if(c.name==null)break;let r="";if(c.type.boolean?r="bool":c.type.string?r="string":((o=c.type.integer)==null?void 0:o.size)===1?r=c.type.integer.unsigned?"u8":"i8":((a=c.type.integer)==null?void 0:a.size)===2?r=c.type.integer.unsigned?"u16":"i16":((s=c.type.integer)==null?void 0:s.size)===4?r=c.type.integer.unsigned?"u32":"i32":((i=c.type.integer)==null?void 0:i.size)===8?r=c.type.integer.unsigned?"u64":"i64":((f=c.type.decimal)==null?void 0:f.size)===4?r="f32":((u=c.type.decimal)==null?void 0:u.size)===8?r="f64":c.type.key&&(r=c.type.key.foreign?(h=c.type.key.table)!=null?h:"rid":t),c.type.array)l+=`  ${c.name||"_"}: [${r||"_"}]
`;else if(r)l+=`  ${c.name||"_"}: ${r}
`;else break}return`type ${t} {
${l}}
`})}}}),yn={class:"p-4 overflow-auto border-l flex-1 text-base"};function vn(e,t,n,l,o,a){return p(),v("div",yn,[d("pre",null,w(e.text),1)])}var mn=I(pn,[["render",vn]]);const gn="_bar_5acw6_2";var bn={bar:gn};const wn=T({setup(){const e=be("viewer"),t=m(()=>Ue(e.columnSelection.value).map(s=>s.map(i=>String(i)).join(" ")));function n(){const{editHeader:s,columnSelection:i,headers:f}=e;s.value=Xe(i.value,f.value),Ge(i.value),B(f),B(i),ce(e)}function l(){const s=cn(e.headers.value,e.datFile);ze.saveAs(new File([JSON.stringify(s,null,2)],`${e.name}.json`,{type:"application/json;charset=utf-8"}))}function o(){se({id:"poe-dat-viewer@show-schema",title:"Schema",type:mn,args:{name:e.name,headers:JSON.parse(JSON.stringify(e.headers.value))}})}async function a(){await hn(e),await Ke(e)}return{rowSorting:e.rowSorting,selections:t,defineColumn:n,exportDataJson:l,showSchema:o,restoreSchema:a}}}),_n={class:"flex"},$n={key:0,class:"text-gray-400 italic px-1.5 self-center"},Sn=d("i",{class:"codicon codicon-add"},null,-1),kn=M(" Define column"),xn=[Sn,kn],Cn=d("div",{class:"text-gray-300 px-1.5 mr-1 self-center"},"Selections",-1),Mn=["textContent"],Tn={class:"flex gap-x-1"},zn=d("i",{class:"codicon codicon-discard"},null,-1),In=M(" Restore schema"),Rn=[zn,In],En=d("i",{class:"codicon codicon-json"},null,-1),Pn=M(" Show schema"),Ln=[En,Pn],Hn=d("i",{class:"codicon codicon-database"},null,-1),Dn=M(" Export data"),On=[Hn,Dn];function Fn(e,t,n,l,o,a){return p(),v("div",{class:g(e.$style.bar)},[d("div",_n,[e.selections.length===0?(p(),v("div",$n,"No bytes selected")):e.selections.length===1?(p(),v("button",{key:1,class:"hover:bg-gray-300 hover:text-black px-1.5 flex gap-x-1 items-center",onClick:t[0]||(t[0]=(...s)=>e.defineColumn&&e.defineColumn(...s))},xn)):e.selections.length>1?(p(),v(_,{key:2},[Cn,(p(!0),v(_,null,z(e.selections,s=>(p(),v("div",{class:"px-1.5 mr-1 font-mono bg-gray-200 text-black flex items-center",textContent:w(s)},null,8,Mn))),256))],64)):b("",!0)]),d("div",Tn,[e.rowSorting?(p(),v("button",{key:0,class:"bg-gray-600 hover:bg-gray-300 hover:text-black px-1.5 border border-gray-500",onClick:t[1]||(t[1]=s=>e.rowSorting=null)},"Clear sorting")):b("",!0),d("button",{class:"hover:bg-gray-300 hover:text-black px-1.5 flex gap-x-1 items-center",onClick:t[2]||(t[2]=(...s)=>e.restoreSchema&&e.restoreSchema(...s))},Rn),d("button",{class:"hover:bg-gray-300 hover:text-black px-1.5 flex gap-x-1 items-center",onClick:t[3]||(t[3]=(...s)=>e.showSchema&&e.showSchema(...s))},Ln),d("button",{class:"hover:bg-gray-300 hover:text-black px-1.5 flex gap-x-1 items-center",onClick:t[4]||(t[4]=(...s)=>e.exportDataJson&&e.exportDataJson(...s))},On)])],2)}const Je={};Je.$style=bn;var Vn=I(wn,[["render",Fn],["__cssModules",Je]]);function Bn(e,t,n){const l=U.readColumn(e,n),o=Array.from({length:n.rowCount},(a,s)=>s);return e.type.array?o.sort((a,s)=>{const i=l[a];return(l[s].length-i.length)*t}):e.type.boolean?o.sort((a,s)=>{const i=Number(l[a]),f=Number(l[s]);return(i-f)*t}):e.type.string?o.sort((a,s)=>{const i=l[a],f=l[s];return i.localeCompare(f)*t}):e.type.integer||e.type.decimal?o.sort((a,s)=>{const i=l[a];return(l[s]-i)*t}):e.type.key&&(e.type.key.foreign?o.sort((a,s)=>{const i=l[a];return((l[s]||0)-(i||0))*t}):o.sort((a,s)=>{const i=Number(l[a]);return(Number(l[s])-i)*t})),o}function An(e,t){t.text=String(e),t.color="#098658"}function Wn(e,t){t.text=`[${e.join(", ")}]`,t.color="#098658"}function Nn(e,t){t.text=String(e),t.color="#0000ff"}function Yn(e,t){t.text=`[${e.join(", ")}]`,t.color="#0000ff"}function jn(e,t){e===""?(t.text="empty",t.color="#0000ff"):(t.text=String(e),t.color="#001080")}function Gn(e,t){t.text=`[${e.map(n=>JSON.stringify(n)).join(", ")}]`,t.color="#001080"}function Ze(e,t){e===null?(t.text="<null, self>",t.color="#0000ff"):(t.text=`<${e}, self>`,t.color="#098658")}function Un(e,t){t.text=`[${e.map(n=>`<${n}, self>`).join(", ")}]`,t.color="#098658"}function Qe(e,t){e===null?(t.text="<null>",t.color="#0000ff"):(t.text=`<${e}>`,t.color="#098658")}function Xn(e,t){t.text=`[${e.map(n=>`<${n}>`).join(", ")}]`,t.color="#098658"}function qn(e,t,n,l,o){const a=Ie.getFieldReader(t,n);if(o==null?void 0:o.header.type.array)throw new Error("Can't show array of arrays.");const s=o&&Ie.getFieldReader(o.header,o.datFile),i={text:"",color:""},f=(()=>{var r,y;const c=o!=null?o.header.type:t.type;if(t.type.array){if(c.boolean)return Yn;if(c.string)return Gn;if(c.integer||c.decimal)return Wn;if((r=c.key)==null?void 0:r.foreign)return Xn;if(c.key)return Un}else{if(c.boolean)return Nn;if(c.string)return jn;if(c.integer||c.decimal)return An;if((y=c.key)==null?void 0:y.foreign)return Qe;if(c.key)return Ze}throw new Error("never")})();let u=0,h="";for(const c of l){let r=a(c);o?t.type.array?(r=r.map(y=>s(y)),f(r,i)):r===null?(t.type.key.foreign?Qe:Ze)(r,i):(r=s(r),f(r,i)):f(r,i),h!==i.color&&(e.fillStyle=i.color,h=i.color),e.fillText(i.text,0,u),u+=R}}function Kn(e,t,n,l,o,a){e.fillStyle="#000";let s=0;for(const i of l){const f=n.dataFixed.subarray(i*n.rowLength+t.offset+o,i*n.rowLength+t.offset+a),u=Array.from(f,h=>h.toString(16).padStart(2,"0")).join(" ");e.fillText(u,o*(O*3),s),s+=R}}function Jn(e,t,n,l,o){e.fillStyle="#000";const a=o.refArray,s=Math.max(a.keyForeign?n.fieldSize.KEY_FOREIGN:0,a.keySelf?n.fieldSize.KEY:0,a.string?n.fieldSize.STRING:0,a.numeric32?n.fieldSize.LONG:0,n.fieldSize.BYTE),i=Math.ceil(t.textLength/3);let f=0;for(const u of l){const h=n.readerFixed.getSizeT(u*n.rowLength+t.offset);if(h===0)e.fillText("[]",0,f);else{const c=n.readerFixed.getSizeT(u*n.rowLength+t.offset+n.memsize),r=n.dataVariable.subarray(c,c+Math.min(s*h,i)),y=Array.from(r,S=>S.toString(16).padStart(2,"0")).join(" ");e.fillText(`${h} { ${y} }`,0,f)}f+=R}}const j='Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',A=14,O=ss(A,j),Zn=ls(A,j),R=19,Qn=3,G=1,es=7,ee=Math.round(O*3),K=ee*2+es*3;function ts(e){const t=String(e-1).length;return Math.max(t,Qn)}function et(e){return Math.ceil(ts(e)*O)}function ns(e){return et(e)+8*2}function ss(e,t){const l=document.createElement("canvas").getContext("2d");return l.font=`${e}px ${t}`,l.measureText("0").width}function ls(e,t){const l=document.createElement("canvas").getContext("2d");l.font=`${e}px ${t}`,l.textBaseline="middle";const o=l.measureText("0");return e/2+(o.alphabeticBaseline!==void 0?-o.alphabeticBaseline:o.actualBoundingBoxDescent)}function os(e){return 1+(e-A)/2+Zn}function as(e){const{ctx:t}=e;if(t.fillStyle="#fff",t.fillRect(0,0,t.canvas.width,t.canvas.height),e.viewer.selectedRow.value!==null){const l=e.rows.indexOf(e.viewer.selectedRow.value);l!==-1&&(t.fillStyle="#bee3f8",t.fillRect(0,e.top+l*R,t.canvas.width,R))}t.save(),t.translate(-e.left,0),is(t,e.columns),t.restore(),t.font=`${A}px ${j}`,t.fillStyle="#000";const n=rs(e.viewer,e.left,e.left+e.paintWidth);for(const l of n)t.save(),t.beginPath(),t.translate(l.left-e.left,0),t.rect(0,0,l.width,t.canvas.height),t.clip(),t.translate(O/2,e.top+os(R)),l.exec(t,e.rows),t.restore();{const l=t.createLinearGradient(0,-16,0,4);l.addColorStop(0,"rgba(254,254,254,0.6)"),l.addColorStop(1,"transparent"),t.fillStyle=l,t.fillRect(0,0,t.canvas.width,6);const o=t.createLinearGradient(-16,0,4,0);o.addColorStop(0,"rgba(254,254,254,0.5)"),o.addColorStop(1,"transparent"),t.fillStyle=o,t.fillRect(0,0,6,t.canvas.height)}}function is(e,t){for(const n of t)n.selected&&(e.fillStyle="#bee3f8",e.fillRect(n.leftPx+(n.border?G:0),0,n.widthPx,e.canvas.height)),n.border&&(e.fillStyle="#bdbdbd",e.fillRect(n.leftPx,0,G,e.canvas.height))}function rs(e,t,n){const l=e.headers.value,o=e.columnStats.value,a=e.datFile,s=[];let i=0;for(const f of l){const u=fe(f);if(i+u.borderWidth>=t)if(f.type.byteView)if(f.type.byteView.array)s.push({left:i+(u.borderWidth?G:0),width:u.paddingWidth,exec:(h,c)=>Jn(h,f,a,c,o[f.offset])});else{const h=Math.max(0,Math.floor((t-i)/(O*3))),c=Math.min(f.length,Math.ceil((n-i)/(O*3)));s.push({left:i+(u.borderWidth?G:0),width:u.paddingWidth,exec:(r,y)=>Kn(r,f,a,y,h,c)})}else s.push({left:i+(u.borderWidth?G:0),width:u.paddingWidth,exec:(h,c)=>{var y;const r=((y=f.type.key)==null?void 0:y.viewColumn)!=null&&f.type.key.table===e.name&&l.find(S=>S.name===f.type.key.viewColumn);return qn(h,f,a,c,r?{header:r,datFile:a}:void 0)}});if(i+=u.borderWidth,i>=n)return s}return s}function fe(e){const t=e.type.byteView&&!e.type.byteView.array?e.length*3-1:e.textLength;return{paddingWidth:Math.ceil((t+1)*O),borderWidth:Math.ceil((t+1)*O)+(e.offset>0?G:0),hasBorder:e.offset>0}}function ds(e){let t=0;for(const n of e)t+=fe(n).borderWidth;return t}function tt(e,t,n,l){const o=[];let a=0;for(const s of e){const i=fe(s);if(a+i.borderWidth>=n&&o.push({offset:s.offset,border:i.hasBorder,active:s===t,widthPx:i.borderWidth,leftPx:a,name:s.name}),a+=i.borderWidth,a>=l)return o}return o}const us=T({props:{left:{type:Number,required:!0},width:{type:Number,required:!0},columns:{type:Array,required:!0}},setup(e){const t=$(0);let n=-1,l=[];const o=be("viewer");function a(h){n=h,l=[...o.columnSelection.value],je(o.columnSelection.value,n,n,o.headers.value),B(o.columnSelection),document.addEventListener("mouseup",c),document.addEventListener("mouseleave",c);function c(){n=-1,document.removeEventListener("mouseup",c),document.removeEventListener("mouseleave",c)}}function s(h,c){if(n===-1||c.buttons!==1)return;const{memsize:r}=o.datFile,y=h-n;y>=r?h=n+r*2-1:y>=4?h=n+8-1:y>=2&&(h=n+4-1),y<=-r?h=n-r*2+1:y<=-4?h=n-8+1:y<=-2&&(h=n-4+1),o.columnSelection.value=[...l],je(o.columnSelection.value,n,h,o.headers.value)}function i(h){const c=o.headers.value.find(r=>r.offset===h);o.editHeader.value===c&&(!c.type.byteView||c.type.byteView.array)?(t.value===0?t.value=1:t.value===1?t.value=-1:t.value===-1&&(t.value=1),o.rowSorting.value=Bn(c,t.value,o.datFile)):(o.editHeader.value=c,t.value=0)}function f(h,c){c.preventDefault();const r=o.headers.value.find(y=>y.offset===h);r.textLength!=null&&(r.textLength=Math.max(1,r.textLength-Math.sign(c.deltaY)*(c.ctrlKey?4*3-2:1)),B(o.headers),ce(o))}return{headers:m(()=>tt(o.headers.value,o.editHeader.value,e.left,e.left+e.width)),selectStart:a,selectContinue:s,editHeader:i,handleHeaderWheel:f,headersRowStyle:m(()=>({transform:`translate(${-e.left}px, 0)`,lineHeight:ee+"px",fontFamily:j,fontSize:A+"px"})),colsRowStyle:m(()=>({transform:`translate(${-e.left}px, ${ee}px)`,lineHeight:ee+"px",fontFamily:j,fontSize:A+"px"})),statsRowStyle:m(()=>({transform:`translate(${-e.left}px, ${ee*2}px)`,fontFamily:j,fontSize:A+"px"}))}}}),cs={class:"datv-header-layer"},fs=["title","onClick","onWheel"],hs=M("\xA0"),ps={key:1,class:"bg-gray-500 text-gray-200 px-1"},ys=["onMousedown","onMouseenter","title","textContent"],vs={key:0,class:"datv-stat__line bg-yellow-500",style:{top:"0"}},ms={key:1,class:"datv-stat__line bg-green-500",style:{top:"7px"}},gs={key:2,class:"datv-stat__line bg-gray-800",style:{top:"14px"}},bs={key:3,class:"datv-stat__line bg-pink-400",style:{top:"14px"}},ws=["textContent"],_s={key:1,class:"inline-flex mx-auto items-center h-full"},$s=d("i",{class:"codicon codicon-key"},null,-1),Ss=[$s];function ks(e,t,n,l,o,a){return p(),v("div",cs,[d("div",{style:x(e.headersRowStyle),class:"absolute"},[(p(!0),v(_,null,z(e.headers,s=>(p(),v("button",{key:s.offset,class:g(["datv-header",{"datv-col--border":s.border,"datv-header--active":s.active}]),style:x({width:s.widthPx+"px",transform:`translate(${s.leftPx}px, 0)`}),title:s.name==null?"unidentified":s.name||"unnamed",onClick:i=>e.editHeader(s.offset),onWheel:i=>e.handleHeaderWheel(s.offset,i)},[s.name===null?(p(),v(_,{key:0},[hs],64)):s.name===""?(p(),v("span",ps,"?")):(p(),v(_,{key:2},[M(w(s.name),1)],64))],46,fs))),128))],4),d("div",{style:x(e.colsRowStyle),class:"absolute"},[(p(!0),v(_,null,z(e.columns,s=>(p(),v("button",{key:s.offset,class:g(["datv-byte",{"datv-col--border":s.border,"datv-byte--selected":s.selected}]),style:x({width:s.widthPx+"px",transform:`translate(${s.leftPx}px, 0)`}),onMousedown:i=>e.selectStart(s.offset),onMouseenter:i=>e.selectContinue(s.offset,i),title:String(s.offset),textContent:w(s.text)},null,46,ys))),128))],4),d("div",{style:x(e.statsRowStyle),class:"absolute datv-stats_row"},[(p(!0),v(_,null,z(e.columns,s=>(p(),v("div",{key:s.offset,class:g(["datv-stat",{"datv-col--border":s.border,"datv-byte--selected":s.selected}]),style:x({width:s.widthPx+"px",transform:`translate(${s.leftPx}px, 0)`})},[s.stat?(p(),v(_,{key:0},[s.stat.string?(p(),v("div",vs)):b("",!0),s.stat.array?(p(),v("div",ms)):b("",!0),s.stat.zero?(p(),v("div",gs)):s.stat.nullable?(p(),v("div",bs)):b("",!0),d("div",{class:"datv-stat__max",textContent:w(s.stat.max)},null,8,ws)],64)):s.key?(p(),v("span",_s,Ss)):b("",!0)],6))),128))],4)])}var xs=I(us,[["render",ks]]);function Cs(e,t){let n=0;for(let l=0;l<e.length;l+=1){const o=t.indexOf(e[l]);o!==-1&&(n+=1,l===0&&o===0&&(n+=2),l>0&&o>0&&e[l-1]===t[o-1]&&(n+=1),l<e.length-1&&o<t.length-1&&e[l+1]===t[o+1]&&(n+=1))}return n}const nt=/([A-Z][a-z]+|[A-Z]{2,}(?![a-z]{2,}))/g;function Ms(e,t,n){const l=n.filter(u=>t<u.totalRows&&u.name!==e),o=e.match(nt).map(u=>Re.exports.singular(u)),a=l.map((u,h)=>{const c=u.name.match(nt).map(r=>Re.exports.singular(r));return[h,t-u.totalRows,Cs(c,o)]}),s=a[0].length,i=new Array(s).fill(1/0),f=new Array(s).fill(-1/0);for(let u=0;u<a.length;u+=1)for(let h=1;h<s;h+=1){const c=a[u][h];c<i[h]&&(i[h]=c),c>f[h]&&(f[h]=c)}for(let u=1;u<s;u+=1)if(i[u]!==f[u])for(let h=0;h<a.length;h+=1)a[h][u]=(a[h][u]-i[u])/(f[u]-i[u]);return a.sort((u,h)=>h.reduce((c,r)=>c+r)-h[0]-(u.reduce((c,r)=>c+r)-u[0])),a.map(([u])=>l[u])}function Ts(e,t,n){const l=[],{fieldSize:o}=n,a=e.length;return a===o.ARRAY&&t.refArray&&l.push({label:"Array",value:"array"}),a===o.STRING&&t.refString&&l.push({label:"String",value:"string"}),a===o.KEY&&t.keySelf&&l.push({label:"Key (self)",value:"key_self"}),a===o.KEY_FOREIGN&&t.keyForeign&&l.push({label:"Key (foreign)",value:"key_foreign"}),a===4&&l.push({label:"Integer",value:"integer"}),a===4&&l.push({label:"Decimal",value:"decimal"}),a===1&&t.maxValue<=1&&l.push({label:"Boolean",value:"boolean"}),l}function zs(e,t){const n=[];if(!e.type.array||!t.refArray)return n;const l=t.refArray;return l.string&&n.push({label:"String",value:"string"}),l.keySelf&&n.push({label:"Key (self)",value:"key_self"}),l.keyForeign&&n.push({label:"Key (foreign)",value:"key_foreign"}),l.numeric32&&n.push({label:"Integer - 4 bytes",value:"integer_4"}),l.numeric32&&n.push({label:"Decimal - 4 bytes",value:"decimal_4"}),l.boolean&&n.push({label:"Boolean",value:"boolean"}),n}const Is=T({setup(){const e=be("viewer"),t=m(()=>e.editHeader.value&&Ce(e.editHeader.value));{let r=null;N(t,y=>{r&&(r(),r=null),y&&(r=N(y,()=>{B(e.headers),ce(e)},{deep:!0}))})}const n=m(()=>e.columnStats.value[t.value.offset]),l=m({get(){const r=t.value.type;return r.array?"array":r.string?"string":r.key?r.key.foreign?"key_foreign":"key_self":r.integer?"integer":r.decimal?"decimal":r.boolean?"boolean":void 0},set(r){const y=t.value;y.type={},r==="array"?(y.type.array=!0,y.type.byteView={array:!0}):r==="string"?y.type.string={}:r==="key_foreign"?y.type.key={foreign:!0,table:null,viewColumn:null}:r==="key_self"?y.type.key={foreign:!1,table:e.name,viewColumn:null}:r==="integer"?y.type.integer={unsigned:!1,size:y.length}:r==="decimal"?y.type.decimal={size:y.length}:r==="boolean"&&(y.type.boolean={})}}),o=m({get(){const r=t.value.type;return r.string?"string":r.key?r.key.foreign?"key_foreign":"key_self":r.integer?`integer_${r.integer.size}`:r.decimal?`decimal_${r.decimal.size}`:r.boolean?"boolean":void 0},set(r){const y=t.value;y.type={array:!0},r==="string"?y.type.string={}:r==="key_foreign"?y.type.key={foreign:!0,table:null,viewColumn:null}:r==="key_self"?y.type.key={foreign:!1,table:e.name,viewColumn:null}:r==="integer_1"?y.type.integer={unsigned:!1,size:1}:r==="integer_2"?y.type.integer={unsigned:!1,size:2}:r==="integer_4"?y.type.integer={unsigned:!1,size:4}:r==="integer_8"?y.type.integer={unsigned:!1,size:8}:r==="decimal_4"?y.type.decimal={size:4}:r==="decimal_8"?y.type.decimal={size:8}:r==="boolean"&&(y.type.boolean={})}}),a=m(()=>{const r=[],y=t.value.type;return r.push({label:"Bytes",value:"bytes"}),y.array&&r.push({label:"Var. bytes",value:"array-bytes"}),r.push({label:"Data",value:"data",disabled:!l.value||l.value==="array"&&!o.value}),r}),s=m({get(){const r=t.value.type;return r.byteView?r.byteView.array?"array-bytes":"bytes":"data"},set(r){const y=t.value.type;r==="data"?y.byteView=void 0:y.byteView={array:r==="array-bytes"}}}),i=m(()=>{const r=U.readColumn(t.value,e.datFile);return Math.max(...t.value.type.array?r.flat():r)}),f=m(()=>{let r;if(!t.value.type.key.foreign)return r=[{value:e.name,label:e.name}],r;if(r=[{value:null,label:"rid (unknown)"}],k.value.tableStats.length){const y=Ms(e.name,i.value,k.value.tableStats);r.push(...y.map(S=>({value:S.name,label:S.name})))}else t.value.type.key.table!==null&&r.push({value:t.value.type.key.table,label:t.value.type.key.table});return r}),u=m(()=>{if(!t.value.type.key)return[];const r=[{value:null,label:"row index"}];return t.value.type.key.foreign?[]:(r.push(...e.headers.value.filter(y=>y.name!==null&&y.name.length&&!y.type.array).map(y=>({label:y.name,value:y.name}))),r)});function h(){e.editHeader.value=null}function c(){qe(t.value,e.headers.value),e.editHeader.value=null,B(e.headers),ce(e)}return{isVisible:m(()=>e.editHeader.value!=null),HEADERS_HEIGHT:K,header:t,byteViewMode:s,dataType:l,arrayType:o,close:h,remove:c,viewModeOpts:a,keyTableOpts:f,keyDisplayColumnOpts:u,dataTypeOpts:m(()=>Ts(t.value,n.value,e.datFile)),arrayTypeOpts:m(()=>zs(t.value,n.value))}}}),Rs={key:0,style:{width:"300px"},class:"relative overflow-hidden"},Es={class:"m-2 shadow border border-gray-300 bg-white absolute inset-0 flex flex-col"},Ps={class:"p-2 bg-gray-100 text-gray-600 shadow flex items-center"},Ls=d("span",{class:"px-2"},"Column properties",-1),Hs=d("i",{class:"codicon codicon-close"},null,-1),Ds=[Hs],Os={key:0,class:"p-4"},Fs={key:1,class:"p-4 overflow-auto"},Vs={class:"mb-4"},Bs=d("label",{for:"datv-header-name"},"Name",-1),As={class:"mb-4 flex items-baseline"},Ws=d("div",{class:"mr-2"},"View mode",-1),Ns={class:"gap-x-px flex"},Ys=["onClick","disabled","textContent"],js={class:"mb-4"},Gs={class:"mb-2 flex justify-between items-baseline"},Us=d("span",null,"Data type",-1),Xs={class:"inline-flex items-center"},qs=["value"],Ks={class:"ml-2 cursor-pointer"},Js={key:0,class:"mt-3"},Zs=d("div",{class:"mb-1"},"of ...",-1),Qs={class:"inline-flex items-center"},el=["value"],tl={class:"ml-2 cursor-pointer"},nl={key:0,class:"mb-4"},sl={class:"inline-flex items-center"},ll=d("span",{class:"ml-2 cursor-pointer"},"Unsigned",-1),ol={key:1,class:"mb-4"},al=d("label",{for:"datv-header-key-table"},"Table",-1),il=["value"],rl=d("hr",{class:"my-6"},null,-1),dl={key:2,class:"mb-4"},ul=d("label",{for:"datv-header-key-column"},"Display Column",-1),cl=["value"],fl={key:3,class:"mb-4"},hl=d("label",{class:"mr-4"},"Width",-1),pl=M(" chars "),yl=d("div",{class:"italic mt-2"},"(move mouse over the column name in Viewer and use `ScrollWheel`, hold `Ctrl` to increase resize step)",-1);function vl(e,t,n,l,o,a){return e.isVisible?(p(),v("div",Rs,[d("div",{style:x({height:e.HEADERS_HEIGHT+"px"}),class:"bg-gray-100"},null,4),d("div",Es,[d("div",Ps,[Ls,d("button",{class:"border border-gray-400 rounded-full px-3",onClick:t[0]||(t[0]=s=>e.$emit("focus-editing-header"))},"Focus"),d("button",{onClick:t[1]||(t[1]=(...s)=>e.close&&e.close(...s)),class:"px-2 py-1 ml-auto",title:"Close"},Ds)]),e.header.name===null?(p(),v("div",Os,[d("div",null,w(e.header.length)+" bytes of unidentified data",1)])):(p(),v("div",Fs,[d("div",Vs,[Bs,F(d("input",{id:"datv-header-name",placeholder:"Unnamed","onUpdate:modelValue":t[2]||(t[2]=s=>e.header.name=s),class:"border p-1 mt-1 w-full focus:border-blue-500",spellcheck:"false"},null,512),[[re,e.header.name,void 0,{trim:!0}]])]),d("div",As,[Ws,d("div",Ns,[(p(!0),v(_,null,z(e.viewModeOpts,s=>(p(),v("button",{key:s.value,class:g(["px-2",e.byteViewMode===s.value?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-300"]),onClick:i=>e.byteViewMode=s.value,disabled:s.disabled,textContent:w(s.label)},null,10,Ys))),128))])]),d("div",js,[d("div",Gs,[Us,d("button",{class:"text-red-700 bg-red-100 px-2",onClick:t[3]||(t[3]=(...s)=>e.remove&&e.remove(...s))},"Delete")]),d("div",null,[(p(!0),v(_,null,z(e.dataTypeOpts,s=>(p(),v("div",{key:s.value,class:"mb-0.5"},[d("label",Xs,[F(d("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=i=>e.dataType=i),value:s.value},null,8,qs),[[Pe,e.dataType]]),d("span",Ks,w(s.label),1)])]))),128)),e.arrayTypeOpts.length?(p(),v("div",Js,[Zs,(p(!0),v(_,null,z(e.arrayTypeOpts,s=>(p(),v("div",{key:s.value,class:"mb-0.5"},[d("label",Qs,[F(d("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=i=>e.arrayType=i),value:s.value},null,8,el),[[Pe,e.arrayType]]),d("span",tl,w(s.label),1)])]))),128))])):b("",!0)])]),e.header.type.integer?(p(),v("div",nl,[d("label",sl,[F(d("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>e.header.type.integer.unsigned=s)},null,512),[[xt,e.header.type.integer.unsigned]]),ll])])):b("",!0),e.header.type.key?(p(),v("div",ol,[al,F(d("select",{id:"datv-header-key-table",class:"border mt-1 w-full focus:border-blue-500","onUpdate:modelValue":t[7]||(t[7]=s=>e.header.type.key.table=s)},[(p(!0),v(_,null,z(e.keyTableOpts,s=>(p(),v("option",{key:s.label,value:s.value},w(s.label),9,il))),128))],512),[[Ee,e.header.type.key.table]])])):b("",!0),rl,e.keyDisplayColumnOpts.length?(p(),v("div",dl,[ul,F(d("select",{id:"datv-header-key-column",class:"border mt-1 w-full focus:border-blue-500","onUpdate:modelValue":t[8]||(t[8]=s=>e.header.type.key.viewColumn=s)},[(p(!0),v(_,null,z(e.keyDisplayColumnOpts,s=>(p(),v("option",{key:s.label,value:s.value},w(s.label),9,cl))),128))],512),[[Ee,e.header.type.key.viewColumn]])])):b("",!0),e.dataType?(p(),v("div",fl,[hl,F(d("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>e.header.textLength=s),class:"border w-16 text-center"},null,512),[[re,e.header.textLength,void 0,{number:!0}]]),pl,yl])):b("",!0)]))])])):b("",!0)}var ml=I(Is,[["render",vl]]);const gl=Math.ceil(O*3);function bl(e,t,n,l,o){const a=[];let s=0;for(const i of n){const f=fe(i);if(i.type.byteView&&!i.type.byteView.array){let u=s;for(let h=0;h<i.length;++h){const c=f.hasBorder&&h===0,r=O*3+(c?G:0);if(Math.ceil(u)+r<l){u+=r;continue}const y=i.offset+h;if(a.push({offset:y,selected:e[y],border:c,widthPx:gl,leftPx:Math.ceil(u),text:String(y%100).padStart(2,"0"),stat:t[y],key:!1}),u+=r,Math.ceil(u)>=o)return a}}else s+f.borderWidth>=l&&a.push({offset:i.offset,selected:!1,border:f.hasBorder,widthPx:f.paddingWidth,leftPx:s,text:String(i.offset%100).padStart(2,"0"),key:i.type.key!=null});if(s+=f.borderWidth,s>=o)return a}return a}function wl(e,t){const n=e.map(o=>({max:o.maxValue.toString(16).padStart(2,"0"),array:!1,string:!1,nullable:!1,zero:o.maxValue===0})),{fieldSize:l}=t;for(let o=0;o<e.length;++o){const a=e[o];if(a.refString)for(let s=0;s<l.STRING;++s)n[o+s].string=!0;if(a.refArray)for(let s=0;s<l.ARRAY;++s)n[o+s].array=!0;if(a.nullableMemsize)for(let s=0;s<t.memsize;++s)n[o+s].nullable=!0}return n}const _l="_rowsOverlay_wksgp_2";var $l={rowsOverlay:_l};const Sl=T({components:{ResizeObserver:Fe,CanvasScroll:Ye,ViewerActions:Vn,ViewerHead:xs,HeaderProps:ml},emits:["update:kaState"],props:{args:{type:Object,required:!0},kaState:{type:Object,default:void 0}},setup(e,t){let n;e.kaState?n=e.kaState:(n=dn(e.args.fullPath,e.args.fileContent),t.emit("update:kaState",n)),Ct("viewer",n);const l=X(null),o=X(null);Me(()=>{o.value.scrollTo(n.scrollPos.x,n.scrollPos.y)});const a=m(()=>n.rowSorting.value?n.rowSorting.value:Array.from({length:n.datFile.rowCount},(C,V)=>V)),s=X(0),i=X(0);function f(C){s.value=C.width,i.value=C.height}const{scrollPos:u}=n;function h(C){u.x=C.x,u.y=C.y}const c=m(()=>ds(n.headers.value)),r=m(()=>n.datFile.rowCount*R),y=m(()=>ns(n.datFile.rowCount)),S=m(()=>Math.max(0,s.value-y.value)),L=m(()=>Math.max(0,i.value-K));N([S,L],()=>{const C=window.devicePixelRatio;l.value.style.width=S.value+"px",l.value.style.height=L.value+"px",l.value.width=S.value*C,l.value.height=L.value*C,l.value.getContext("2d",{alpha:!1}).scale(C,C),he()});const J=m(()=>wl(n.columnStats.value,n.datFile)),Z=m(()=>bl(n.columnSelection.value,J.value,n.headers.value,u.x,u.x+Math.min(c.value,S.value)));N([u,Z,a,n.selectedRow],()=>{he()});function he(){const C=l.value.getContext("2d",{alpha:!1});as({left:u.x,paintWidth:S.value,top:pe.value.top,rows:pe.value.ids,columns:Z.value,viewer:n,ctx:C})}const pe=m(()=>{const C=u.y,V=Math.ceil(L.value/R)+1,W=Math.floor(C/R);return{top:W*R-C,ids:a.value.slice(W,W+V)}});function ct(){const C=n.editHeader.value,W=tt(n.headers.value,null,0,0+1/0).find(Q=>Q.offset===C.offset);o.value.scrollTo(W.leftPx-S.value*.33,void 0)}function ft(C){const{selectedRow:V}=n,W=Math.floor((C.offsetY+u.y)/R),Q=a.value[W];V.value=V.value!==Q?Q:null}return{headerBlockStyle:m(()=>({height:K+"px",width:s.value+"px"})),headerOverlayContentStyle:m(()=>({left:y.value+"px",height:K+"px",width:S.value+"px"})),scrollableStyle:m(()=>({top:K+"px",left:y.value+"px"})),scrollablePaintSize:m(()=>({width:S.value,height:L.value})),scrollableFullSize:m(()=>({width:c.value,height:r.value})),rowsOverlayStyle:m(()=>({top:K+"px",width:y.value+"px",height:L.value+"px",fontFamily:j,fontSize:A+"px",lineHeight:R+"px"})),handleScroll:h,handleResize:f,renderItems:pe,canvasRef:l,renderColumns:Z,scrollLeft:m(()=>u.x),rowsWidth:m(()=>Math.min(c.value,S.value)),LINE_HEIGHT:R,canvasScroll:o,rowsNumberWidth:et(n.datFile.rowCount)+"px",focusEditingHeader:ct,handleCanvasClick:ft}}}),kl={class:"flex flex-1"},xl=["textContent"];function Cl(e,t,n,l,o,a){const s=E("viewer-actions"),i=E("viewer-head"),f=E("canvas-scroll"),u=E("resize-observer"),h=E("header-props");return p(),v(_,null,[H(s),d("div",kl,[H(u,{onResize:e.handleResize,class:"flex-1 min-h-0 relative"},{default:q(()=>[d("div",{class:"bg-gray-100 absolute",style:x(e.headerBlockStyle)},[H(i,{style:x(e.headerOverlayContentStyle),left:e.scrollLeft,width:e.rowsWidth,columns:e.renderColumns},null,8,["style","left","width","columns"])],4),H(f,{ref:"canvasScroll",class:"absolute bg-white",onScroll:e.handleScroll,style:x(e.scrollableStyle),"paint-size":e.scrollablePaintSize,"full-size":e.scrollableFullSize},{default:q(()=>[d("canvas",{ref:"canvasRef",onClick:t[0]||(t[0]=(...c)=>e.handleCanvasClick&&e.handleCanvasClick(...c))},null,512)]),_:1},8,["onScroll","style","paint-size","full-size"]),d("div",{class:g(e.$style.rowsOverlay),style:x(e.rowsOverlayStyle)},[d("div",{class:"absolute",style:x({transform:`translate(0, ${e.renderItems.top}px)`})},[(p(!0),v(_,null,z(e.renderItems.ids,(c,r)=>(p(),v("div",{key:c,style:x({transform:`translate(0, ${r*e.LINE_HEIGHT}px)`,width:e.rowsNumberWidth,position:"absolute"}),textContent:w(c)},null,12,xl))),128))],4)],6)]),_:1},8,["onResize"]),H(h,{onFocusEditingHeader:e.focusEditingHeader},null,8,["onFocusEditingHeader"])])],64)}const st={};st.$style=$l;var lt=I(Sl,[["render",Cl],["__cssModules",st]]);const Ml="_input_16vaf_2",Tl="_label_16vaf_20",zl="_importVariant_16vaf_26";var Il={input:Ml,label:Tl,importVariant:zl};const Rl=T({setup(){const e=$(localStorage.getItem("POE_PATCH_VER")||""),t=$(""),n=$(!1),l=$(!1);e.value&&!k.value&&a(),ue.value.length||s(),i();async function o(f){const u=f.target.files[0],h=new Uint8Array(await u.arrayBuffer()),c=u.name;se({id:`file@${c}`,title:c,type:lt,args:{fileContent:h,fullPath:c}})}async function a(){let f;try{n.value=!0,f=await we(e.value,"_.index.bin")}finally{n.value=!1}try{await Nt(f),localStorage.setItem("POE_PATCH_VER",e.value)}catch(u){throw window.alert(u.message),u}}async function s(){l.value=!0;const u=await(await fetch("https://poe-bundles.snos.workers.dev/schema.min.json")).json();u.version===Mt.SCHEMA_VERSION?ue.value=u.tables:console.warn("Latest schema version is not supported."),l.value=!1}async function i(){const u=await(await fetch("https://raw.githubusercontent.com/poe-tool-dev/latest-patch-version/main/latest.txt")).text();t.value=u}return{poePatch:e,latestPoEPatch:t,isCdnImportRunning:n,isFetchingSchema:l,handleFile:o,cdnImport:a}}}),El={class:"p-4 overflow-auto border-l flex-1 text-base"},Pl={class:"flex gap-x-4 items-baseline mt-4"},Ll=d("div",{class:"max-w-xl mb-4 font-semibold"},"Useful when a new league is released. While the update is still downloading, you can review files and fix schema directly from the update servers.",-1),Hl={class:"inline-flex items-baseline pb-2"},Dl={style:{width:"200px"},class:"my-1"},Ol={style:{width:"100px"},class:"m-1"},Fl={style:{width:"220px"},class:"my-1"},Vl=["disabled","loading"],Bl={key:0},Al=M(" Latest PoE patch is "),Wl={class:"px-1 border border-gray-300 rounded"},Nl={class:"flex gap-x-4 items-baseline mt-4 border-b pb-3"},Yl={class:"flex items-baseline"},jl=d("span",{class:"pr-2"},"or just",-1),Gl=d("label",{class:"bg-gray-100 py-1 px-2 cursor-pointer hover:bg-gray-300",style:{width:"200px"},for:"import-local-file"},"Pick a local dat file",-1),Ul={class:"mt-3 flex gap-x-2 items-center"},Xl={key:0,class:"codicon codicon-loading animate-spin"},ql={key:1,class:"codicon codicon-check"},Kl={key:0},Jl={key:1},Zl=d("a",{href:"https://github.com/poe-tool-dev/dat-schema",class:"underline",target:"_blank"},"github.com/poe-tool-dev/dat-schema",-1);function Ql(e,t,n,l,o,a){return p(),v("div",El,[d("div",Pl,[d("div",{class:g(e.$style.importVariant)},"1",2),d("div",null,[Ll,d("div",Hl,[d("div",Dl,[d("input",{value:"patchcdn.pathofexile.com/",readonly:"",class:g(e.$style.input)},null,2),d("label",{class:g(e.$style.label)},"Patch CDN",2)]),d("div",Ol,[F(d("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.poePatch=s),placeholder:"3.12.x.x.x",class:g(e.$style.input)},null,2),[[re,e.poePatch,void 0,{trim:!0}]]),d("label",{class:g(e.$style.label)},"Patch #",2)]),d("div",Fl,[d("input",{value:"/Bundles2/_.index.bin",readonly:"",class:g(e.$style.input)},null,2),d("label",{class:g(e.$style.label)},"Index",2)]),d("button",{class:"ml-1 py-1 px-3 bg-blue-600 text-white hover:bg-blue-800",onClick:t[1]||(t[1]=(...s)=>e.cdnImport&&e.cdnImport(...s)),disabled:e.isCdnImportRunning,loading:e.isCdnImportRunning},w(e.isCdnImportRunning?"Wait...":"Import"),9,Vl)]),e.latestPoEPatch&&e.poePatch!==e.latestPoEPatch?(p(),v("div",Bl,[Al,d("code",Wl,w(e.latestPoEPatch),1)])):b("",!0)])]),d("div",Nl,[d("div",{class:g(e.$style.importVariant)},"2",2),d("div",Yl,[jl,Gl,d("input",{class:"hidden",id:"import-local-file",type:"file",accept:".dat,.dat64",onInput:t[2]||(t[2]=(...s)=>e.handleFile&&e.handleFile(...s))},null,32)])]),d("div",Ul,[e.isFetchingSchema?(p(),v("i",Xl)):(p(),v("i",ql)),d("div",null,[e.isFetchingSchema?(p(),v("span",Kl," Downloading schema from ")):(p(),v("span",Jl," Downloaded schema from ")),Zl])])])}const ot={};ot.$style=Il;var at=I(Rl,[["render",Ql],["__cssModules",ot]]);const te=$("poe-dat-viewer@import");function ne(e){te.value=e}const P=$([{id:"poe-dat-viewer@import",title:"Import",type:at,args:void 0,kaState:void 0}]);function se(e){P.value.find(n=>n.id===e.id)||P.value.push({id:e.id,title:e.title,type:e.type,args:e.args,kaState:void 0}),ne(e.id),B(P)}function eo(e){const t=P.value.findIndex(n=>n.id===e);e===te.value&&(t+1<P.value.length?ne(P.value[t+1].id):ne(t!==0?P.value[t-1].id:null)),P.value=P.value.filter(n=>n.id!==e)}const $e=$(!1),Se=$(0),to=$(0),le=$(0),no=T({setup(){return{timeLeft:m(()=>{!le.value&&k.value.tableStats.length&&(le.value=Date.now()/1e3);const t=Date.now()/1e3,n=Se.value*(t-le.value)/k.value.tableStats.length;return Math.max(Math.ceil(n-t+le.value),0)}),totalTables:Se,isPreloading:$e,preloadDataTables:async()=>{le.value=0,to.value=Date.now()/1e3,$e.value=!0,await Yt(Se),$e.value=!1},tables:m(()=>k.value.tableStats)}}}),so={class:"p-4 overflow-auto border-l flex-1 text-base"},lo={key:1,class:"flex items-center gap-x-4"},oo=d("i",{class:"codicon codicon-loading animate-spin"},null,-1),ao={key:0},io={class:"border mt-4"},ro=d("thead",null,[d("tr",null,[d("th",{class:"border-b px-4"},"Name"),d("th",{class:"border-b px-4"},"Rows"),d("th",{class:"border-b px-8"},"Valid"),d("th",{class:"border-b px-4"},"More data")])],-1),uo={class:"border-b px-4"},co={class:"border-b px-4 text-right"},fo={key:0},ho=d("td",{colspan:"2",class:"px-8 py-4"},"Waiting for preload...",-1),po=[ho];function yo(e,t,n,l,o,a){return p(),v("div",so,[!e.isPreloading&&!e.tables.length?(p(),v("button",{key:0,class:"py-1 px-3 bg-blue-600 text-white hover:bg-blue-800",onClick:t[0]||(t[0]=(...s)=>e.preloadDataTables&&e.preloadDataTables(...s))},"Preload Data tables")):e.tables.length!==e.totalTables?(p(),v("div",lo,[oo,d("div",null,[M(w(e.tables.length)+" / "+w(e.totalTables)+" tables",1),e.tables.length?(p(),v("span",ao,", estimated "+w(e.timeLeft)+" sec",1)):b("",!0)])])):b("",!0),d("table",io,[ro,d("tbody",null,[(p(!0),v(_,null,z(e.tables,s=>(p(),v("tr",{key:s.name},[d("td",uo,w(s.name),1),d("td",co,w(s.totalRows),1),d("td",{class:g(["border-b px-4 text-center",{"bg-red-400":!s.headersValid}])},w(s.headersValid),3),d("td",{class:g(["border-b px-4 text-center",{"bg-yellow-300":s.increasedRowLength}])},w(s.increasedRowLength),3)]))),128)),e.tables.length?b("",!0):(p(),v("tr",fo,po))])])])}var vo=I(no,[["render",yo]]);const mo="_titlebar_v2ooq_2",go="_tab_v2ooq_12",bo="_active_v2ooq_21",wo="_rightBtn_v2ooq_31";var _o={titlebar:mo,tab:go,active:bo,rightBtn:wo};const $o=T({setup(){const e=m(()=>P.value.map(l=>({id:l.id,title:l.title,isActive:l.id===te.value})));function t(){se({id:"poe-dat-viewer@import",title:"Import",type:at,args:void 0})}function n(){se({id:"poe-dat-viewer@data-tables",title:"Data Tables",type:vo,args:void 0})}return{tabs:e,setActiveTab:ne,closeTab:eo,openImport:t,openDataTables:n,showDataTables:m(()=>k.value!=null&&ue.value.length)}}}),So={class:"flex overflow-hidden divide-x divide-gray-600"},ko=["onClick","onMouseup"],xo=["onClick"],Co=d("i",{class:"codicon codicon-close"},null,-1),Mo=[Co],To={class:"flex p-1.5 flex-shrink-0 gap-x-1"},zo=d("i",{class:"codicon codicon-cloud-download"},null,-1),Io=M(" Import"),Ro=[zo,Io],Eo=d("i",{class:"codicon codicon-table"},null,-1),Po=M(" Data Tables"),Lo=[Eo,Po];function Ho(e,t,n,l,o,a){return p(),v("div",{class:g(e.$style.titlebar)},[d("div",So,[(p(!0),v(_,null,z(e.tabs,s=>(p(),v("div",{key:s.id,class:g([e.$style.tab,{[e.$style.active]:s.isActive}])},[d("button",{class:"pl-3 h-full",onClick:i=>e.setActiveTab(s.id),onMouseup:Tt(i=>e.closeTab(s.id),["middle"])},w(s.title),41,ko),d("button",{class:"mx-2 w-7 h-7 hover:bg-gray-500 text-center",title:"Close",onClick:i=>e.closeTab(s.id)},Mo,8,xo)],2))),128))]),d("div",To,[d("button",{class:g(e.$style.rightBtn),onClick:t[0]||(t[0]=(...s)=>e.openImport&&e.openImport(...s))},Ro,2),e.showDataTables?(p(),v("button",{key:0,class:g(e.$style.rightBtn),onClick:t[1]||(t[1]=(...s)=>e.openDataTables&&e.openDataTables(...s))},Lo,2)):b("",!0)])],2)}const it={};it.$style=_o;var Do=I($o,[["render",Ho],["__cssModules",it]]);const Oo=()=>T({components:{ResizeObserver:Fe,CanvasScroll:Ye},props:{items:{type:Array,required:!0},itemHeight:{type:Number,required:!0},scrollableProps:{type:Object,default:()=>({})}},setup(e){const t=ie({width:0,height:0}),n=m(()=>({width:t.width,height:e.items.length*e.itemHeight}));function l(s){t.width=s.width,t.height=s.height}const o=X(null),a=m(()=>{var h,c;const s=(c=(h=o.value)==null?void 0:h.scrollPos.y)!=null?c:0,i=Math.ceil(t.height/e.itemHeight)+1,f=Math.floor(s/e.itemHeight),u=f*e.itemHeight-s;return e.items.slice(f,f+i).map((r,y)=>({top:u+y*e.itemHeight,item:r}))});return{handleResize:l,paintSize:t,fullSize:n,scrollable:o,renderItems:a}}}),Fo=Oo();function Vo(e,t,n,l,o,a){const s=E("canvas-scroll"),i=E("resize-observer");return p(),me(i,{onResize:e.handleResize,class:"relative"},{default:q(()=>[H(s,zt({ref:"scrollable"},e.scrollableProps,{class:"absolute","paint-size":e.paintSize,"full-size":e.fullSize}),{default:q(()=>[ge(e.$slots,"default",{entries:e.renderItems})]),_:3},16,["paint-size","full-size"])]),_:3},8,["onResize"])}var Bo=I(Fo,[["render",Vo]]);function Ao(){return Date.now()}function Wo(e,t){const n=Date.now()-t;console.log(`${e}. Done in -> ${n} ms`)}function rt(e,t){const n=Ao(),l=t();return Wo(e,n),l}const No="_treeToggle_2880p_2",Yo="_searchInput_2880p_12",jo="_itemBtn_2880p_25",Go="_active_2880p_39";var Uo={treeToggle:No,searchInput:Yo,itemBtn:jo,active:Go};function Xo(){const e=$("");N(k,()=>{e.value=""});const t=m(()=>{if(!k.value)return[];if(e.value==="")return rt("Getting root dirs",()=>It(k.value.pathReps,k.value.dirsInfo)).map(a=>({label:a,fullPath:a,isFile:!1})).sort((a,s)=>a.label.localeCompare(s.label));const l=rt(`Getting "${e.value}" dir`,()=>Rt(e.value,k.value.pathReps,k.value.dirsInfo));return[{label:"../",fullPath:e.value.indexOf("/")===-1?"":e.value.split("/").slice(0,-1).join("/"),isFile:!1},...l.dirs.map(o=>({label:o.substr(e.value.length+1),fullPath:o,isFile:!1})).sort((o,a)=>o.label.localeCompare(a.label)),...l.files.map(o=>({label:o.substr(e.value.length+1),fullPath:o,isFile:!0,isActive:`bundles@${o}`===te.value})).sort((o,a)=>o.label.localeCompare(a.label))]});async function n(l){if(!l.isFile)e.value=l.fullPath;else{const o=await Wt(l.fullPath);l.fullPath.endsWith(".dat")||l.fullPath.endsWith(".dat64")?se({id:`bundles@${l.fullPath}`,title:l.label,type:lt,args:{fileContent:o,fullPath:l.fullPath}}):ze.saveAs(new File([o],l.fullPath.substring(l.fullPath.lastIndexOf("/")+1),{type:"application/octet-stream"}))}}return{currentDir:e,tree:t,handleTreeNav:n}}const qo=T({components:{VirtualScroll:Bo},setup(){const e=$(!0);function t(){e.value=!e.value}const n=m(()=>Boolean(k.value)),{tree:l,handleTreeNav:o,currentDir:a}=Xo(),s=$(".dat64"),i=m(()=>a.value.startsWith("Data")?[".dat",".dat64",".datl",".datl64"].map(h=>({value:h,active:s.value===h,handleClick:()=>{s.value=h}})):null),f=$(""),u=m(()=>{const h=f.value.toLowerCase(),c=i.value?s.value:"";return l.value.filter(r=>r.label.toLowerCase().includes(h)&&(r.isFile?r.label.endsWith(c):!0))});return{showTree:e,toggleTree:t,tree:u,handleTreeNav:o,searchText:f,isIndexLoaded:n,extensionOpts:i}}}),Ko={class:"flex p-1 items-center mb-px"},Jo=d("i",{class:"codicon codicon-list-flat"},null,-1),Zo=[Jo],Qo={key:0,class:"flex gap-x-1 border-b pb-1.5 px-2 justify-end"},ea=["onClick","textContent"],ta={key:1,class:"italic text-center text-gray-500 p-2"},na={key:2,class:"italic text-center text-gray-500 p-2"},sa=["onClick"],la={key:0,class:"codicon codicon-folder pr-3"};function oa(e,t,n,l,o,a){const s=E("virtual-scroll");return p(),v("div",{class:"layout-column flex-shrink-0",style:x({width:e.showTree?"300px":void 0})},[d("div",Ko,[d("button",{title:"Toggle tree visibility",class:g(e.$style.treeToggle),onClick:t[0]||(t[0]=(...i)=>e.toggleTree&&e.toggleTree(...i))},Zo,2),e.showTree?F((p(),v("input",{key:0,"onUpdate:modelValue":t[1]||(t[1]=i=>e.searchText=i),placeholder:"Search in current folder",class:g(e.$style.searchInput),type:"search",spellcheck:"false"},null,2)),[[re,e.searchText,void 0,{trim:!0}]]):b("",!0)]),e.showTree?(p(),v(_,{key:0},[e.extensionOpts?(p(),v("div",Qo,[(p(!0),v(_,null,z(e.extensionOpts,i=>(p(),v("button",{key:i.value,onClick:i.handleClick,class:g(["px-2",i.active?"bg-gray-200":"hover:bg-gray-100"]),textContent:w(i.value)},null,10,ea))),128))])):b("",!0),e.isIndexLoaded?b("",!0):(p(),v("div",ta,"Waiting for Index bundle...")),e.isIndexLoaded&&!e.tree.length?(p(),v("div",na,"No results found")):b("",!0),H(s,{class:"flex-1","scrollable-props":{style:"background: #fff;",widthY:10},items:e.tree,"item-height":22},{default:q(i=>[(p(!0),v(_,null,z(i.entries,f=>(p(),v("button",{key:f.item.fullPath,class:g({[e.$style.itemBtn]:!0,[e.$style.active]:f.item.isActive}),style:x({transform:`translate(0, ${f.top}px`}),onClick:u=>e.handleTreeNav(f.item)},[f.item.isFile?b("",!0):(p(),v("i",la)),M(w(f.item.label),1)],14,sa))),128))]),_:1},8,["items"])],64)):b("",!0)],4)}const dt={};dt.$style=Uo;var aa=I(qo,[["render",oa],["__cssModules",dt]]);const ia="_notification_eng9d_2";var ra={notification:ia};const da=T({setup(){return D}}),ua=d("div",{class:"bg-gray-200 h-1"},null,-1),ca={class:"p-3"},fa={class:"font-semibold truncate"},ha={class:"text-grey text-sm"},pa=M("Downloading...");function ya(e,t,n,l,o,a){return e.active?(p(),v("div",{key:0,class:g(e.$style.notification)},[e.totalSize?(p(),v(_,{key:0},[ua,d("div",{class:"bg-blue-500 h-1 absolute top-0",style:x({width:`${e.received/e.totalSize*100}%`})},null,4)],64)):b("",!0),d("div",ca,[d("div",fa,w(e.bundleName),1),d("div",ha,[e.totalSize?(p(),v(_,{key:0},[M(w((e.totalSize/1e6).toFixed(1))+" MB",1)],64)):(p(),v(_,{key:1},[pa],64))])])],2)):b("",!0)}const ut={};ut.$style=ra;var va=I(da,[["render",ya],["__cssModules",ut]]),ma="/poe-dat-viewer/assets/discord-badge.9068e0df.svg";const ga=T({components:{IndexTree:aa,ViewerTabs:Do,DownloadProgress:va},setup(){return{activeTab:m(()=>P.value.find(t=>t.id===te.value)),appVersion:"3.3.0"}}}),ba={class:"layout-column flex-1 min-w-0"},wa={class:"layout-column flex-1 min-h-0"},_a={key:1,class:"bg-gray-50 flex-1 text-lg text-gray-500 flex items-center justify-center"},$a={class:"app-footer"},Sa=d("a",{class:"q-link text-white border-b",href:"https://github.com/SnosMe/poe-dat-viewer"},"GitHub",-1),ka=d("a",{href:"https://discord.gg/SJjBdT3",class:"flex ml-8"},[d("img",{src:ma})],-1);function xa(e,t,n,l,o,a){const s=E("index-tree"),i=E("viewer-tabs"),f=E("download-progress");return p(),v(_,null,[H(s),d("div",ba,[H(i),d("div",wa,[e.activeTab?(p(),me(Te(e.activeTab.type),{args:e.activeTab.args,key:e.activeTab.id,"ka-state":e.activeTab.kaState,"onUpdate:ka-state":t[0]||(t[0]=u=>e.activeTab.kaState=u)},null,8,["args","ka-state"])):(p(),v("div",_a,"The viewer is ready to fulfill your wishes \u{1F47E}"))]),d("div",$a,[d("div",null,[M("Made by Alexander Drozdov, v"+w(e.appVersion)+" ",1),Sa]),ka])]),H(f)],64)}var Ca=I(ga,[["render",xa]]);Et(Ca).mount("#app");
